<html lang="en">
<head>
 <meta charset="utf-8">
 <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">  <!-- Use Chrome Frame in IE -->
 <meta name="viewport"
       content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
 <meta name="description" content="A sample Vector dataset on terrain rendered with 3D Tiles.">
 <meta name="cesium-sandcastle-labels" content="Showcases, 3D Tiles">
 <!--引入cesium基础lib-->
 <link rel="stylesheet" href="../Build/bootstrap.css">
 <link href="../Build/Cesium/Widgets/widgets.css" rel="stylesheet" type="text/css" />
 <script src="../Build/Cesium/Cesium.js" type="text/javascript" ></script>
 <link href="../Build/pie.css" rel="stylesheet" type="text/css" />
 <script src="../Build/pie.js" type="text/javascript" ></script>
 <script type="text/javascript" src="./config.js"></script>
 </head>
 <body>
 <style>
  html, body, #cesiumContainer {
   width: 100%;
   height: 100%;
   margin: 0;
   padding: 0;
   overflow: hidden;
  }

  .cesium-viewer, .cesium-viewer-cesiumWidgetContainer, .cesium-widget {
   width: 100%;
   height: 100%;
   margin: 0;
   padding: 0;
   overflow: hidden;
  }

  canvas {
   width: 100%;
   height: 100%;
   margin: 0;
   padding: 0;
   overflow: hidden;
  }
 </style>

 <div id="cesiumContainer" class="fullSize"></div>
 <span style="position: absolute;top:10px;left:10px;">
    <button class="btn btn-primary" onclick="addSlope()">等高线分析</button>
</span>
 <script>
  var map;
  var slope;
  function startup() {
   'use strict';
   createMap();
  }

  function addSlope(){
   var positions = [
    Cesium.Cartesian3.fromDegrees(119.237751,28.371917,0),
    Cesium.Cartesian3.fromDegrees(119.177946,28.372862,0),
    Cesium.Cartesian3.fromDegrees(119.175999,28.442828,0),
    Cesium.Cartesian3.fromDegrees(119.212809,28.444119,0)
   ];

   // 渲染效果
   var contourLine = new mars3d.thing.ContourLine({
    contourShow: true, // 是否显示等高线
    shadingType: "none", // 地表渲染效果类型:无nono, 高程 elevation, 坡度slope, 坡向aspect
    shadingAlpha: 0.6 /// 地表渲染的透明度
   });
   map.addThing(contourLine);
   contourLine.positions = positions;
  }

  function createMap() {
   var mapOptions = {
    scene: {
     center: {lat: 28.49724744269, lng: 119.10514093954193, alt: 6199.96958, heading: 135.302, pitch: -21.81564}
    },
     terrain: {
      url:'../data/zjTerrain',
      show: true
     },
    basemaps: [
     {
      name: "底图",
      type: "wmts",
      url: baseMapUrl,
      layer: "",
      format: "",
      tileMatrixSetID: "",
      tileMatrixLabels: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19"],
      crs: "EPSG:4326",
      show: true
     }
    ]
   };


   map = new mars3d.Map('cesiumContainer', mapOptions);
  }

   startup(Cesium);
 </script>
 </body>
 </html>

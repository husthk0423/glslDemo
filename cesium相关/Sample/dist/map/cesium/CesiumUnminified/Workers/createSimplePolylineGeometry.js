define(["./defaultValue-81eec7ed","./Cartesian2-cce28994","./ArcType-98ec98bf","./BoundingSphere-2b618cd6","./Color-f5223c05","./ComponentDatatype-c1201c79","./Check-edea0f91","./GeometryAttribute-c4e682f4","./GeometryAttributes-32b29525","./IndexDatatype-2503dc5a","./Math-29cbc3fa","./PolylinePipeline-f785d88a","./GeographicProjection-54ec8d9d","./Matrix4-da4bb68c","./RuntimeError-94b0bf5f","./Rectangle-1bad9972","./Transforms-599d3866","./when-422ea0ae","./Resource-721e53e7","./combine-0897f2e3","./WebGLConstants-1c8239cc","./Matrix2-c857e514","./EllipsoidGeodesic-bc3178c0","./EllipsoidRhumbLine-52cdeee5","./IntersectionTests-878c0e54","./Plane-d04f021c"],(function(e,o,r,t,a,l,i,n,c,s,p,d,f,y,u,h,C,g,T,m,v,b,P,_,B,A){"use strict";function E(e,o,r,t,l,i,n){var c,s=d.PolylinePipeline.numberOfPoints(e,o,l),p=r.red,f=r.green,y=r.blue,u=r.alpha,h=t.red,C=t.green,g=t.blue,T=t.alpha;if(a.Color.equals(r,t)){for(c=0;c<s;c++)i[n++]=a.Color.floatToByte(p),i[n++]=a.Color.floatToByte(f),i[n++]=a.Color.floatToByte(y),i[n++]=a.Color.floatToByte(u);return n}var m=(h-p)/s,v=(C-f)/s,b=(g-y)/s,P=(T-u)/s,_=n;for(c=0;c<s;c++)i[_++]=a.Color.floatToByte(p+c*m),i[_++]=a.Color.floatToByte(f+c*v),i[_++]=a.Color.floatToByte(y+c*b),i[_++]=a.Color.floatToByte(u+c*P);return _}function k(t){var l=(t=e.defaultValue(t,e.defaultValue.EMPTY_OBJECT)).positions,i=t.colors,n=e.defaultValue(t.colorsPerVertex,!1);this._positions=l,this._colors=i,this._colorsPerVertex=n,this._arcType=e.defaultValue(t.arcType,r.ArcType.GEODESIC),this._granularity=e.defaultValue(t.granularity,p.CesiumMath.RADIANS_PER_DEGREE),this._ellipsoid=e.defaultValue(t.ellipsoid,o.Ellipsoid.WGS84),this._workerName="createSimplePolylineGeometry";var c=1+l.length*o.Cartesian3.packedLength;c+=e.defined(i)?1+i.length*a.Color.packedLength:1,this.packedLength=c+o.Ellipsoid.packedLength+3}k.pack=function(r,t,l){var i;l=e.defaultValue(l,0);var n=r._positions,c=n.length;for(t[l++]=c,i=0;i<c;++i,l+=o.Cartesian3.packedLength)o.Cartesian3.pack(n[i],t,l);var s=r._colors;for(c=e.defined(s)?s.length:0,t[l++]=c,i=0;i<c;++i,l+=a.Color.packedLength)a.Color.pack(s[i],t,l);return o.Ellipsoid.pack(r._ellipsoid,t,l),l+=o.Ellipsoid.packedLength,t[l++]=r._colorsPerVertex?1:0,t[l++]=r._arcType,t[l]=r._granularity,t},k.unpack=function(r,t,l){var i;t=e.defaultValue(t,0);var n=r[t++],c=new Array(n);for(i=0;i<n;++i,t+=o.Cartesian3.packedLength)c[i]=o.Cartesian3.unpack(r,t);var s=(n=r[t++])>0?new Array(n):void 0;for(i=0;i<n;++i,t+=a.Color.packedLength)s[i]=a.Color.unpack(r,t);var p=o.Ellipsoid.unpack(r,t);t+=o.Ellipsoid.packedLength;var d=1===r[t++],f=r[t++],y=r[t];return e.defined(l)?(l._positions=c,l._colors=s,l._ellipsoid=p,l._colorsPerVertex=d,l._arcType=f,l._granularity=y,l):new k({positions:c,colors:s,ellipsoid:p,colorsPerVertex:d,arcType:f,granularity:y})};var G=new Array(2),w=new Array(2),D={positions:G,height:w,ellipsoid:void 0,minDistance:void 0,granularity:void 0};return k.createGeometry=function(i){var f,y,u,h,C,g=i._positions,T=i._colors,m=i._colorsPerVertex,v=i._arcType,b=i._granularity,P=i._ellipsoid,_=p.CesiumMath.chordLength(b,P.maximumRadius),B=e.defined(T)&&!m,A=g.length,k=0;if(v===r.ArcType.GEODESIC||v===r.ArcType.RHUMB){var L,V,x;v===r.ArcType.GEODESIC?(L=p.CesiumMath.chordLength(b,P.maximumRadius),V=d.PolylinePipeline.numberOfPoints,x=d.PolylinePipeline.generateArc):(L=b,V=d.PolylinePipeline.numberOfPointsRhumbLine,x=d.PolylinePipeline.generateRhumbArc);var R=d.PolylinePipeline.extractHeights(g,P),S=D;if(v===r.ArcType.GEODESIC?S.minDistance=_:S.granularity=b,S.ellipsoid=P,B){var I=0;for(f=0;f<A-1;f++)I+=V(g[f],g[f+1],L)+1;y=new Float64Array(3*I),h=new Uint8Array(4*I),S.positions=G,S.height=w;var O=0;for(f=0;f<A-1;++f){G[0]=g[f],G[1]=g[f+1],w[0]=R[f],w[1]=R[f+1];var M=x(S);if(e.defined(T)){var U=M.length/3;C=T[f];for(var N=0;N<U;++N)h[O++]=a.Color.floatToByte(C.red),h[O++]=a.Color.floatToByte(C.green),h[O++]=a.Color.floatToByte(C.blue),h[O++]=a.Color.floatToByte(C.alpha)}y.set(M,k),k+=M.length}}else if(S.positions=g,S.height=R,y=new Float64Array(x(S)),e.defined(T)){for(h=new Uint8Array(y.length/3*4),f=0;f<A-1;++f){k=E(g[f],g[f+1],T[f],T[f+1],_,h,k)}var F=T[A-1];h[k++]=a.Color.floatToByte(F.red),h[k++]=a.Color.floatToByte(F.green),h[k++]=a.Color.floatToByte(F.blue),h[k++]=a.Color.floatToByte(F.alpha)}}else{u=B?2*A-2:A,y=new Float64Array(3*u),h=e.defined(T)?new Uint8Array(4*u):void 0;var H=0,W=0;for(f=0;f<A;++f){var Y=g[f];if(B&&f>0&&(o.Cartesian3.pack(Y,y,H),H+=3,C=T[f-1],h[W++]=a.Color.floatToByte(C.red),h[W++]=a.Color.floatToByte(C.green),h[W++]=a.Color.floatToByte(C.blue),h[W++]=a.Color.floatToByte(C.alpha)),B&&f===A-1)break;o.Cartesian3.pack(Y,y,H),H+=3,e.defined(T)&&(C=T[f],h[W++]=a.Color.floatToByte(C.red),h[W++]=a.Color.floatToByte(C.green),h[W++]=a.Color.floatToByte(C.blue),h[W++]=a.Color.floatToByte(C.alpha))}}var j=new c.GeometryAttributes;j.position=new n.GeometryAttribute({componentDatatype:l.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:y}),e.defined(T)&&(j.color=new n.GeometryAttribute({componentDatatype:l.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:4,values:h,normalize:!0}));var q=2*((u=y.length/3)-1),z=s.IndexDatatype.createTypedArray(u,q),J=0;for(f=0;f<u-1;++f)z[J++]=f,z[J++]=f+1;return new n.Geometry({attributes:j,indices:z,primitiveType:n.PrimitiveType.LINES,boundingSphere:t.BoundingSphere.fromPoints(g)})},function(r,t){return e.defined(t)&&(r=k.unpack(r,t)),r._ellipsoid=o.Ellipsoid.clone(r._ellipsoid),k.createGeometry(r)}}));

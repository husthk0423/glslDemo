define(["./defaultValue-81eec7ed","./Cartesian2-cce28994","./BoundingSphere-2b618cd6","./ComponentDatatype-c1201c79","./Check-edea0f91","./GeometryAttribute-c4e682f4","./GeometryAttributes-32b29525","./IndexDatatype-2503dc5a","./Math-29cbc3fa","./WallGeometryLibrary-44afdb82","./GeographicProjection-54ec8d9d","./Matrix4-da4bb68c","./RuntimeError-94b0bf5f","./Rectangle-1bad9972","./WebGLConstants-1c8239cc","./Matrix2-c857e514","./Transforms-599d3866","./when-422ea0ae","./Resource-721e53e7","./combine-0897f2e3","./arrayRemoveDuplicates-9a47c9b6","./PolylinePipeline-f785d88a","./EllipsoidGeodesic-bc3178c0","./EllipsoidRhumbLine-52cdeee5","./IntersectionTests-878c0e54","./Plane-d04f021c"],(function(e,i,t,a,n,r,o,s,l,d,m,u,p,c,f,h,g,y,v,_,E,b,C,H,A,k){"use strict";var w=new i.Cartesian3,x=new i.Cartesian3;function G(t){var a=(t=e.defaultValue(t,e.defaultValue.EMPTY_OBJECT)).positions,n=t.maximumHeights,r=t.minimumHeights,o=e.defaultValue(t.granularity,l.CesiumMath.RADIANS_PER_DEGREE),s=e.defaultValue(t.ellipsoid,i.Ellipsoid.WGS84);this._positions=a,this._minimumHeights=r,this._maximumHeights=n,this._granularity=o,this._ellipsoid=i.Ellipsoid.clone(s),this._workerName="createWallOutlineGeometry";var d=1+a.length*i.Cartesian3.packedLength+2;e.defined(r)&&(d+=r.length),e.defined(n)&&(d+=n.length),this.packedLength=d+i.Ellipsoid.packedLength+1}G.pack=function(t,a,n){var r;n=e.defaultValue(n,0);var o=t._positions,s=o.length;for(a[n++]=s,r=0;r<s;++r,n+=i.Cartesian3.packedLength)i.Cartesian3.pack(o[r],a,n);var l=t._minimumHeights;if(s=e.defined(l)?l.length:0,a[n++]=s,e.defined(l))for(r=0;r<s;++r)a[n++]=l[r];var d=t._maximumHeights;if(s=e.defined(d)?d.length:0,a[n++]=s,e.defined(d))for(r=0;r<s;++r)a[n++]=d[r];return i.Ellipsoid.pack(t._ellipsoid,a,n),a[n+=i.Ellipsoid.packedLength]=t._granularity,a};var L=i.Ellipsoid.clone(i.Ellipsoid.UNIT_SPHERE),P={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:L,granularity:void 0};return G.unpack=function(t,a,n){var r;a=e.defaultValue(a,0);var o,s,l=t[a++],d=new Array(l);for(r=0;r<l;++r,a+=i.Cartesian3.packedLength)d[r]=i.Cartesian3.unpack(t,a);if((l=t[a++])>0)for(o=new Array(l),r=0;r<l;++r)o[r]=t[a++];if((l=t[a++])>0)for(s=new Array(l),r=0;r<l;++r)s[r]=t[a++];var m=i.Ellipsoid.unpack(t,a,L),u=t[a+=i.Ellipsoid.packedLength];return e.defined(n)?(n._positions=d,n._minimumHeights=o,n._maximumHeights=s,n._ellipsoid=i.Ellipsoid.clone(m,n._ellipsoid),n._granularity=u,n):(P.positions=d,P.minimumHeights=o,P.maximumHeights=s,P.granularity=u,new G(P))},G.fromConstantHeights=function(i){var t,a,n=(i=e.defaultValue(i,e.defaultValue.EMPTY_OBJECT)).positions,r=i.minimumHeight,o=i.maximumHeight,s=e.defined(r),l=e.defined(o);if(s||l){var d=n.length;t=s?new Array(d):void 0,a=l?new Array(d):void 0;for(var m=0;m<d;++m)s&&(t[m]=r),l&&(a[m]=o)}return new G({positions:n,maximumHeights:a,minimumHeights:t,ellipsoid:i.ellipsoid})},G.createGeometry=function(n){var m=n._positions,u=n._minimumHeights,p=n._maximumHeights,c=n._granularity,f=n._ellipsoid,h=d.WallGeometryLibrary.computePositions(f,m,p,u,c,!1);if(e.defined(h)){var g,y=h.bottomPositions,v=h.topPositions,_=v.length,E=2*_,b=new Float64Array(E),C=0;for(_/=3,g=0;g<_;++g){var H=3*g,A=i.Cartesian3.fromArray(v,H,w),k=i.Cartesian3.fromArray(y,H,x);b[C++]=k.x,b[C++]=k.y,b[C++]=k.z,b[C++]=A.x,b[C++]=A.y,b[C++]=A.z}var G=new o.GeometryAttributes({position:new r.GeometryAttribute({componentDatatype:a.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:b})}),L=E/3;E=2*L-4+L;var P=s.IndexDatatype.createTypedArray(L,E),T=0;for(g=0;g<L-2;g+=2){var V=g,D=g+2,R=i.Cartesian3.fromArray(b,3*V,w),S=i.Cartesian3.fromArray(b,3*D,x);if(!i.Cartesian3.equalsEpsilon(R,S,l.CesiumMath.EPSILON10)){var I=g+1,M=g+3;P[T++]=I,P[T++]=V,P[T++]=I,P[T++]=M,P[T++]=V,P[T++]=D}}return P[T++]=L-2,P[T++]=L-1,new r.Geometry({attributes:G,indices:P,primitiveType:r.PrimitiveType.LINES,boundingSphere:new t.BoundingSphere.fromVertices(b)})}},function(t,a){return e.defined(a)&&(t=G.unpack(t,a)),t._ellipsoid=i.Ellipsoid.clone(t._ellipsoid),G.createGeometry(t)}}));

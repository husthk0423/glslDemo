define(["./defaultValue-81eec7ed","./Cartesian2-cce28994","./Rectangle-1bad9972","./GeometryOffsetAttribute-0a70352a","./BoundingSphere-2b618cd6","./ComponentDatatype-c1201c79","./Check-edea0f91","./GeometryAttribute-c4e682f4","./GeometryAttributes-32b29525","./IndexDatatype-2503dc5a","./Math-29cbc3fa","./PolygonPipeline-8ba20582","./RectangleGeometryLibrary-56fdcfae","./GeographicProjection-54ec8d9d","./Matrix4-da4bb68c","./RuntimeError-94b0bf5f","./WebGLConstants-1c8239cc","./Matrix2-c857e514","./Transforms-599d3866","./when-422ea0ae","./Resource-721e53e7","./combine-0897f2e3","./EllipsoidRhumbLine-52cdeee5"],(function(e,t,i,a,r,n,o,l,u,s,c,d,p,f,g,h,y,b,m,_,v,E,A){"use strict";var G=new r.BoundingSphere,R=new r.BoundingSphere,P=new t.Cartesian3,w=new i.Rectangle;function L(e,t){var i=e._ellipsoid,a=t.height,r=t.width,o=t.northCap,c=t.southCap,d=a,f=2,g=0,h=4;o&&(f-=1,d-=1,g+=1,h-=2),c&&(f-=1,d-=1,g+=1,h-=2),g+=f*r+2*d-h;var y,b=new Float64Array(3*g),m=0,_=0,v=P;if(o)p.RectangleGeometryLibrary.computePosition(t,i,!1,_,0,v),b[m++]=v.x,b[m++]=v.y,b[m++]=v.z;else for(y=0;y<r;y++)p.RectangleGeometryLibrary.computePosition(t,i,!1,_,y,v),b[m++]=v.x,b[m++]=v.y,b[m++]=v.z;for(y=r-1,_=1;_<a;_++)p.RectangleGeometryLibrary.computePosition(t,i,!1,_,y,v),b[m++]=v.x,b[m++]=v.y,b[m++]=v.z;if(_=a-1,!c)for(y=r-2;y>=0;y--)p.RectangleGeometryLibrary.computePosition(t,i,!1,_,y,v),b[m++]=v.x,b[m++]=v.y,b[m++]=v.z;for(y=0,_=a-2;_>0;_--)p.RectangleGeometryLibrary.computePosition(t,i,!1,_,y,v),b[m++]=v.x,b[m++]=v.y,b[m++]=v.z;for(var E=b.length/3*2,A=s.IndexDatatype.createTypedArray(b.length/3,E),G=0,R=0;R<b.length/3-1;R++)A[G++]=R,A[G++]=R+1;A[G++]=b.length/3-1,A[G++]=0;var w=new l.Geometry({attributes:new u.GeometryAttributes,primitiveType:l.PrimitiveType.LINES});return w.attributes.position=new l.GeometryAttribute({componentDatatype:n.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:b}),w.indices=A,w}function C(a){var r=(a=e.defaultValue(a,e.defaultValue.EMPTY_OBJECT)).rectangle,n=e.defaultValue(a.granularity,c.CesiumMath.RADIANS_PER_DEGREE),o=e.defaultValue(a.ellipsoid,t.Ellipsoid.WGS84),l=e.defaultValue(a.rotation,0),u=e.defaultValue(a.height,0),s=e.defaultValue(a.extrudedHeight,u);this._rectangle=i.Rectangle.clone(r),this._granularity=n,this._ellipsoid=o,this._surfaceHeight=Math.max(u,s),this._rotation=l,this._extrudedHeight=Math.min(u,s),this._offsetAttribute=a.offsetAttribute,this._workerName="createRectangleOutlineGeometry"}C.packedLength=i.Rectangle.packedLength+t.Ellipsoid.packedLength+5,C.pack=function(a,r,n){return n=e.defaultValue(n,0),i.Rectangle.pack(a._rectangle,r,n),n+=i.Rectangle.packedLength,t.Ellipsoid.pack(a._ellipsoid,r,n),n+=t.Ellipsoid.packedLength,r[n++]=a._granularity,r[n++]=a._surfaceHeight,r[n++]=a._rotation,r[n++]=a._extrudedHeight,r[n]=e.defaultValue(a._offsetAttribute,-1),r};var x=new i.Rectangle,D=t.Ellipsoid.clone(t.Ellipsoid.UNIT_SPHERE),S={rectangle:x,ellipsoid:D,granularity:void 0,height:void 0,rotation:void 0,extrudedHeight:void 0,offsetAttribute:void 0};C.unpack=function(a,r,n){r=e.defaultValue(r,0);var o=i.Rectangle.unpack(a,r,x);r+=i.Rectangle.packedLength;var l=t.Ellipsoid.unpack(a,r,D);r+=t.Ellipsoid.packedLength;var u=a[r++],s=a[r++],c=a[r++],d=a[r++],p=a[r];return e.defined(n)?(n._rectangle=i.Rectangle.clone(o,n._rectangle),n._ellipsoid=t.Ellipsoid.clone(l,n._ellipsoid),n._surfaceHeight=s,n._rotation=c,n._extrudedHeight=d,n._offsetAttribute=-1===p?void 0:p,n):(S.granularity=u,S.height=s,S.rotation=c,S.extrudedHeight=d,S.offsetAttribute=-1===p?void 0:p,new C(S))};var H=new t.Cartographic;return C.createGeometry=function(t){var i,o,u=t._rectangle,f=t._ellipsoid,g=p.RectangleGeometryLibrary.computeOptions(u,t._granularity,t._rotation,0,w,H);if(!c.CesiumMath.equalsEpsilon(u.north,u.south,c.CesiumMath.EPSILON10)&&!c.CesiumMath.equalsEpsilon(u.east,u.west,c.CesiumMath.EPSILON10)){var h,y=t._surfaceHeight,b=t._extrudedHeight;if(!c.CesiumMath.equalsEpsilon(y,b,0,c.CesiumMath.EPSILON2)){if(i=function(e,t){var i=e._surfaceHeight,a=e._extrudedHeight,r=e._ellipsoid,n=a,o=i,l=L(e,t),u=t.height,c=t.width,p=d.PolygonPipeline.scaleToGeodeticHeight(l.attributes.position.values,o,r,!1),f=p.length,g=new Float64Array(2*f);g.set(p);var h=d.PolygonPipeline.scaleToGeodeticHeight(l.attributes.position.values,n,r);g.set(h,f),l.attributes.position.values=g;var y=t.northCap,b=t.southCap,m=4;y&&(m-=1),b&&(m-=1);var _=2*(g.length/3+m),v=s.IndexDatatype.createTypedArray(g.length/3,_);f=g.length/6;for(var E,A=0,G=0;G<f-1;G++)v[A++]=G,v[A++]=G+1,v[A++]=G+f,v[A++]=G+f+1;if(v[A++]=f-1,v[A++]=0,v[A++]=f+f-1,v[A++]=f,v[A++]=0,v[A++]=f,y)E=u-1;else{var R=c-1;v[A++]=R,v[A++]=R+f,E=c+u-2}if(v[A++]=E,v[A++]=E+f,!b){var P=c+E-1;v[A++]=P,v[A]=P+f}return l.indices=v,l}(t,g),e.defined(t._offsetAttribute)){var m=i.attributes.position.values.length/3,_=new Uint8Array(m);t._offsetAttribute===a.GeometryOffsetAttribute.TOP?_=a.arrayFill(_,1,0,m/2):(h=t._offsetAttribute===a.GeometryOffsetAttribute.NONE?0:1,_=a.arrayFill(_,h)),i.attributes.applyOffset=new l.GeometryAttribute({componentDatatype:n.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:1,values:_})}var v=r.BoundingSphere.fromRectangle3D(u,f,y,R),E=r.BoundingSphere.fromRectangle3D(u,f,b,G);o=r.BoundingSphere.union(v,E)}else{if((i=L(t,g)).attributes.position.values=d.PolygonPipeline.scaleToGeodeticHeight(i.attributes.position.values,y,f,!1),e.defined(t._offsetAttribute)){var A=i.attributes.position.values.length,P=new Uint8Array(A/3);h=t._offsetAttribute===a.GeometryOffsetAttribute.NONE?0:1,a.arrayFill(P,h),i.attributes.applyOffset=new l.GeometryAttribute({componentDatatype:n.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:1,values:P})}o=r.BoundingSphere.fromRectangle3D(u,f,y)}return new l.Geometry({attributes:i.attributes,indices:i.indices,primitiveType:l.PrimitiveType.LINES,boundingSphere:o,offsetAttribute:t._offsetAttribute})}},function(a,r){return e.defined(r)&&(a=C.unpack(a,r)),a._ellipsoid=t.Ellipsoid.clone(a._ellipsoid),a._rectangle=i.Rectangle.clone(a._rectangle),C.createGeometry(a)}}));

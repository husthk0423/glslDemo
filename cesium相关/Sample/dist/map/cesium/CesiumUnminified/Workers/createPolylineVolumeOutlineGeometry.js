define(["./defaultValue-81eec7ed","./Cartesian2-cce28994","./arrayRemoveDuplicates-9a47c9b6","./BoundingRectangle-01a4d1a7","./BoundingSphere-2b618cd6","./ComponentDatatype-c1201c79","./PolylineVolumeGeometryLibrary-58345cc1","./Check-edea0f91","./GeometryAttribute-c4e682f4","./GeometryAttributes-32b29525","./IndexDatatype-2503dc5a","./Math-29cbc3fa","./PolygonPipeline-8ba20582","./GeographicProjection-54ec8d9d","./Rectangle-1bad9972","./Matrix4-da4bb68c","./RuntimeError-94b0bf5f","./WebGLConstants-1c8239cc","./EllipsoidTangentPlane-3ee186ca","./AxisAlignedBoundingBox-a270696e","./IntersectionTests-878c0e54","./Plane-d04f021c","./Transforms-599d3866","./when-422ea0ae","./Resource-721e53e7","./combine-0897f2e3","./PolylinePipeline-f785d88a","./EllipsoidGeodesic-bc3178c0","./EllipsoidRhumbLine-52cdeee5","./Matrix2-c857e514"],(function(e,i,n,a,t,r,o,l,s,p,c,d,u,y,h,g,f,m,v,E,P,_,b,k,C,L,T,G,D,R){"use strict";function A(n){var a=(n=e.defaultValue(n,e.defaultValue.EMPTY_OBJECT)).polylinePositions,t=n.shapePositions;this._positions=a,this._shape=t,this._ellipsoid=i.Ellipsoid.clone(e.defaultValue(n.ellipsoid,i.Ellipsoid.WGS84)),this._cornerType=e.defaultValue(n.cornerType,o.CornerType.ROUNDED),this._granularity=e.defaultValue(n.granularity,d.CesiumMath.RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeOutlineGeometry";var r=1+a.length*i.Cartesian3.packedLength;r+=1+t.length*i.Cartesian2.packedLength,this.packedLength=r+i.Ellipsoid.packedLength+2}A.pack=function(n,a,t){var r;t=e.defaultValue(t,0);var o=n._positions,l=o.length;for(a[t++]=l,r=0;r<l;++r,t+=i.Cartesian3.packedLength)i.Cartesian3.pack(o[r],a,t);var s=n._shape;for(l=s.length,a[t++]=l,r=0;r<l;++r,t+=i.Cartesian2.packedLength)i.Cartesian2.pack(s[r],a,t);return i.Ellipsoid.pack(n._ellipsoid,a,t),t+=i.Ellipsoid.packedLength,a[t++]=n._cornerType,a[t]=n._granularity,a};var V=i.Ellipsoid.clone(i.Ellipsoid.UNIT_SPHERE),w={polylinePositions:void 0,shapePositions:void 0,ellipsoid:V,height:void 0,cornerType:void 0,granularity:void 0};A.unpack=function(n,a,t){var r;a=e.defaultValue(a,0);var o=n[a++],l=new Array(o);for(r=0;r<o;++r,a+=i.Cartesian3.packedLength)l[r]=i.Cartesian3.unpack(n,a);o=n[a++];var s=new Array(o);for(r=0;r<o;++r,a+=i.Cartesian2.packedLength)s[r]=i.Cartesian2.unpack(n,a);var p=i.Ellipsoid.unpack(n,a,V);a+=i.Ellipsoid.packedLength;var c=n[a++],d=n[a];return e.defined(t)?(t._positions=l,t._shape=s,t._ellipsoid=i.Ellipsoid.clone(p,t._ellipsoid),t._cornerType=c,t._granularity=d,t):(w.polylinePositions=l,w.shapePositions=s,w.cornerType=c,w.granularity=d,new A(w))};var B=new a.BoundingRectangle;return A.createGeometry=function(e){var l=e._positions,d=n.arrayRemoveDuplicates(l,i.Cartesian3.equalsEpsilon),y=e._shape;if(y=o.PolylineVolumeGeometryLibrary.removeDuplicatesFromShape(y),!(d.length<2||y.length<3)){u.PolygonPipeline.computeWindingOrder2D(y)===u.WindingOrder.CLOCKWISE&&y.reverse();var h=a.BoundingRectangle.fromPoints(y,B);return function(e,i){var n=new p.GeometryAttributes;n.position=new s.GeometryAttribute({componentDatatype:r.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:e});var a,o,l=i.length,d=n.position.values.length/3,u=e.length/3/l,y=c.IndexDatatype.createTypedArray(d,2*l*(u+1)),h=0,g=(a=0)*l;for(o=0;o<l-1;o++)y[h++]=o+g,y[h++]=o+g+1;for(y[h++]=l-1+g,y[h++]=g,g=(a=u-1)*l,o=0;o<l-1;o++)y[h++]=o+g,y[h++]=o+g+1;for(y[h++]=l-1+g,y[h++]=g,a=0;a<u-1;a++){var f=l*a,m=f+l;for(o=0;o<l;o++)y[h++]=o+f,y[h++]=o+m}return new s.Geometry({attributes:n,indices:c.IndexDatatype.createTypedArray(d,y),boundingSphere:t.BoundingSphere.fromVertices(e),primitiveType:s.PrimitiveType.LINES})}(o.PolylineVolumeGeometryLibrary.computePositions(d,y,h,e,!1),y)}},function(n,a){return e.defined(a)&&(n=A.unpack(n,a)),n._ellipsoid=i.Ellipsoid.clone(n._ellipsoid),A.createGeometry(n)}}));

define(["exports","./Cartesian2-cce28994","./Check-edea0f91","./defaultValue-81eec7ed","./GeographicProjection-54ec8d9d","./Math-29cbc3fa","./Matrix4-da4bb68c","./Rectangle-1bad9972"],(function(e,a,n,r,t,i,s,c){"use strict";var u=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});function d(e,a){this.start=r.defaultValue(e,0),this.stop=r.defaultValue(a,0)}function o(e,n){this.center=a.Cartesian3.clone(r.defaultValue(e,a.Cartesian3.ZERO)),this.radius=r.defaultValue(n,0)}var C=new a.Cartesian3,l=new a.Cartesian3,f=new a.Cartesian3,v=new a.Cartesian3,y=new a.Cartesian3,x=new a.Cartesian3,m=new a.Cartesian3,g=new a.Cartesian3,h=new a.Cartesian3,z=new a.Cartesian3,p=new a.Cartesian3,w=new a.Cartesian3,S=4/3*i.CesiumMath.PI;o.fromPoints=function(e,n){if(r.defined(n)||(n=new o),!r.defined(e)||0===e.length)return n.center=a.Cartesian3.clone(a.Cartesian3.ZERO,n.center),n.radius=0,n;var t,i=a.Cartesian3.clone(e[0],m),s=a.Cartesian3.clone(i,C),c=a.Cartesian3.clone(i,l),u=a.Cartesian3.clone(i,f),d=a.Cartesian3.clone(i,v),S=a.Cartesian3.clone(i,y),q=a.Cartesian3.clone(i,x),b=e.length;for(t=1;t<b;t++){a.Cartesian3.clone(e[t],i);var E=i.x,R=i.y,M=i.z;E<s.x&&a.Cartesian3.clone(i,s),E>d.x&&a.Cartesian3.clone(i,d),R<c.y&&a.Cartesian3.clone(i,c),R>S.y&&a.Cartesian3.clone(i,S),M<u.z&&a.Cartesian3.clone(i,u),M>q.z&&a.Cartesian3.clone(i,q)}var O=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(d,s,g)),P=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(S,c,g)),V=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(q,u,g)),I=s,T=d,D=O;P>D&&(D=P,I=c,T=S),V>D&&(D=V,I=u,T=q);var B=h;B.x=.5*(I.x+T.x),B.y=.5*(I.y+T.y),B.z=.5*(I.z+T.z);var Z=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(T,B,g)),N=Math.sqrt(Z),j=z;j.x=s.x,j.y=c.y,j.z=u.z;var G=p;G.x=d.x,G.y=S.y,G.z=q.z;var k=a.Cartesian3.midpoint(j,G,w),U=0;for(t=0;t<b;t++){a.Cartesian3.clone(e[t],i);var W=a.Cartesian3.magnitude(a.Cartesian3.subtract(i,k,g));W>U&&(U=W);var A=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(i,B,g));if(A>Z){var H=Math.sqrt(A);Z=(N=.5*(N+H))*N;var _=H-N;B.x=(N*B.x+_*i.x)/H,B.y=(N*B.y+_*i.y)/H,B.z=(N*B.z+_*i.z)/H}}return N<U?(a.Cartesian3.clone(B,n.center),n.radius=N):(a.Cartesian3.clone(k,n.center),n.radius=U),n};var q=new t.GeographicProjection,b=new a.Cartesian3,E=new a.Cartesian3,R=new a.Cartographic,M=new a.Cartographic;o.fromRectangle2D=function(e,a,n){return o.fromRectangleWithHeights2D(e,a,0,0,n)},o.fromRectangleWithHeights2D=function(e,n,t,i,s){if(r.defined(s)||(s=new o),!r.defined(e))return s.center=a.Cartesian3.clone(a.Cartesian3.ZERO,s.center),s.radius=0,s;n=r.defaultValue(n,q),c.Rectangle.southwest(e,R),R.height=t,c.Rectangle.northeast(e,M),M.height=i;var u=n.project(R,b),d=n.project(M,E),C=d.x-u.x,l=d.y-u.y,f=d.z-u.z;s.radius=.5*Math.sqrt(C*C+l*l+f*f);var v=s.center;return v.x=u.x+.5*C,v.y=u.y+.5*l,v.z=u.z+.5*f,s};var O=[];o.fromRectangle3D=function(e,n,t,i){if(n=r.defaultValue(n,a.Ellipsoid.WGS84),t=r.defaultValue(t,0),r.defined(i)||(i=new o),!r.defined(e))return i.center=a.Cartesian3.clone(a.Cartesian3.ZERO,i.center),i.radius=0,i;var s=c.Rectangle.subsample(e,n,t,O);return o.fromPoints(s,i)},o.fromVertices=function(e,n,t,i){if(r.defined(i)||(i=new o),!r.defined(e)||0===e.length)return i.center=a.Cartesian3.clone(a.Cartesian3.ZERO,i.center),i.radius=0,i;n=r.defaultValue(n,a.Cartesian3.ZERO),t=r.defaultValue(t,3);var s=m;s.x=e[0]+n.x,s.y=e[1]+n.y,s.z=e[2]+n.z;var c,u=a.Cartesian3.clone(s,C),d=a.Cartesian3.clone(s,l),S=a.Cartesian3.clone(s,f),q=a.Cartesian3.clone(s,v),b=a.Cartesian3.clone(s,y),E=a.Cartesian3.clone(s,x),R=e.length;for(c=0;c<R;c+=t){var M=e[c]+n.x,O=e[c+1]+n.y,P=e[c+2]+n.z;s.x=M,s.y=O,s.z=P,M<u.x&&a.Cartesian3.clone(s,u),M>q.x&&a.Cartesian3.clone(s,q),O<d.y&&a.Cartesian3.clone(s,d),O>b.y&&a.Cartesian3.clone(s,b),P<S.z&&a.Cartesian3.clone(s,S),P>E.z&&a.Cartesian3.clone(s,E)}var V=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(q,u,g)),I=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(b,d,g)),T=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(E,S,g)),D=u,B=q,Z=V;I>Z&&(Z=I,D=d,B=b),T>Z&&(Z=T,D=S,B=E);var N=h;N.x=.5*(D.x+B.x),N.y=.5*(D.y+B.y),N.z=.5*(D.z+B.z);var j=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(B,N,g)),G=Math.sqrt(j),k=z;k.x=u.x,k.y=d.y,k.z=S.z;var U=p;U.x=q.x,U.y=b.y,U.z=E.z;var W=a.Cartesian3.midpoint(k,U,w),A=0;for(c=0;c<R;c+=t){s.x=e[c]+n.x,s.y=e[c+1]+n.y,s.z=e[c+2]+n.z;var H=a.Cartesian3.magnitude(a.Cartesian3.subtract(s,W,g));H>A&&(A=H);var _=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(s,N,g));if(_>j){var L=Math.sqrt(_);j=(G=.5*(G+L))*G;var X=L-G;N.x=(G*N.x+X*s.x)/L,N.y=(G*N.y+X*s.y)/L,N.z=(G*N.z+X*s.z)/L}}return G<A?(a.Cartesian3.clone(N,i.center),i.radius=G):(a.Cartesian3.clone(W,i.center),i.radius=A),i},o.fromEncodedCartesianVertices=function(e,n,t){if(r.defined(t)||(t=new o),!r.defined(e)||!r.defined(n)||e.length!==n.length||0===e.length)return t.center=a.Cartesian3.clone(a.Cartesian3.ZERO,t.center),t.radius=0,t;var i=m;i.x=e[0]+n[0],i.y=e[1]+n[1],i.z=e[2]+n[2];var s,c=a.Cartesian3.clone(i,C),u=a.Cartesian3.clone(i,l),d=a.Cartesian3.clone(i,f),S=a.Cartesian3.clone(i,v),q=a.Cartesian3.clone(i,y),b=a.Cartesian3.clone(i,x),E=e.length;for(s=0;s<E;s+=3){var R=e[s]+n[s],M=e[s+1]+n[s+1],O=e[s+2]+n[s+2];i.x=R,i.y=M,i.z=O,R<c.x&&a.Cartesian3.clone(i,c),R>S.x&&a.Cartesian3.clone(i,S),M<u.y&&a.Cartesian3.clone(i,u),M>q.y&&a.Cartesian3.clone(i,q),O<d.z&&a.Cartesian3.clone(i,d),O>b.z&&a.Cartesian3.clone(i,b)}var P=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(S,c,g)),V=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(q,u,g)),I=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(b,d,g)),T=c,D=S,B=P;V>B&&(B=V,T=u,D=q),I>B&&(B=I,T=d,D=b);var Z=h;Z.x=.5*(T.x+D.x),Z.y=.5*(T.y+D.y),Z.z=.5*(T.z+D.z);var N=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(D,Z,g)),j=Math.sqrt(N),G=z;G.x=c.x,G.y=u.y,G.z=d.z;var k=p;k.x=S.x,k.y=q.y,k.z=b.z;var U=a.Cartesian3.midpoint(G,k,w),W=0;for(s=0;s<E;s+=3){i.x=e[s]+n[s],i.y=e[s+1]+n[s+1],i.z=e[s+2]+n[s+2];var A=a.Cartesian3.magnitude(a.Cartesian3.subtract(i,U,g));A>W&&(W=A);var H=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(i,Z,g));if(H>N){var _=Math.sqrt(H);N=(j=.5*(j+_))*j;var L=_-j;Z.x=(j*Z.x+L*i.x)/_,Z.y=(j*Z.y+L*i.y)/_,Z.z=(j*Z.z+L*i.z)/_}}return j<W?(a.Cartesian3.clone(Z,t.center),t.radius=j):(a.Cartesian3.clone(U,t.center),t.radius=W),t},o.fromCornerPoints=function(e,n,t){r.defined(t)||(t=new o);var i=a.Cartesian3.midpoint(e,n,t.center);return t.radius=a.Cartesian3.distance(i,n),t},o.fromEllipsoid=function(e,n){return r.defined(n)||(n=new o),a.Cartesian3.clone(a.Cartesian3.ZERO,n.center),n.radius=e.maximumRadius,n};var P=new a.Cartesian3;o.fromBoundingSpheres=function(e,n){if(r.defined(n)||(n=new o),!r.defined(e)||0===e.length)return n.center=a.Cartesian3.clone(a.Cartesian3.ZERO,n.center),n.radius=0,n;var t=e.length;if(1===t)return o.clone(e[0],n);if(2===t)return o.union(e[0],e[1],n);var i,s=[];for(i=0;i<t;i++)s.push(e[i].center);var c=(n=o.fromPoints(s,n)).center,u=n.radius;for(i=0;i<t;i++){var d=e[i];u=Math.max(u,a.Cartesian3.distance(c,d.center,P)+d.radius)}return n.radius=u,n};var V=new a.Cartesian3,I=new a.Cartesian3,T=new a.Cartesian3;o.fromOrientedBoundingBox=function(e,n){r.defined(n)||(n=new o);var t=e.halfAxes,i=s.Matrix3.getColumn(t,0,V),c=s.Matrix3.getColumn(t,1,I),u=s.Matrix3.getColumn(t,2,T);return a.Cartesian3.add(i,c,i),a.Cartesian3.add(i,u,i),n.center=a.Cartesian3.clone(e.center,n.center),n.radius=a.Cartesian3.magnitude(i),n},o.clone=function(e,n){if(r.defined(e))return r.defined(n)?(n.center=a.Cartesian3.clone(e.center,n.center),n.radius=e.radius,n):new o(e.center,e.radius)},o.packedLength=4,o.pack=function(e,a,n){n=r.defaultValue(n,0);var t=e.center;return a[n++]=t.x,a[n++]=t.y,a[n++]=t.z,a[n]=e.radius,a},o.unpack=function(e,a,n){a=r.defaultValue(a,0),r.defined(n)||(n=new o);var t=n.center;return t.x=e[a++],t.y=e[a++],t.z=e[a++],n.radius=e[a],n};var D=new a.Cartesian3,B=new a.Cartesian3;o.union=function(e,n,t){r.defined(t)||(t=new o);var i=e.center,s=e.radius,c=n.center,u=n.radius,d=a.Cartesian3.subtract(c,i,D),C=a.Cartesian3.magnitude(d);if(s>=C+u)return e.clone(t),t;if(u>=C+s)return n.clone(t),t;var l=.5*(s+C+u),f=a.Cartesian3.multiplyByScalar(d,(-s+l)/C,B);return a.Cartesian3.add(f,i,f),a.Cartesian3.clone(f,t.center),t.radius=l,t};var Z=new a.Cartesian3;o.expand=function(e,n,r){r=o.clone(e,r);var t=a.Cartesian3.magnitude(a.Cartesian3.subtract(n,r.center,Z));return t>r.radius&&(r.radius=t),r},o.intersectPlane=function(e,n){var r=e.center,t=e.radius,i=n.normal,s=a.Cartesian3.dot(i,r)+n.distance;return s<-t?u.OUTSIDE:s<t?u.INTERSECTING:u.INSIDE},o.transform=function(e,a,n){return r.defined(n)||(n=new o),n.center=s.Matrix4.multiplyByPoint(a,e.center,n.center),n.radius=s.Matrix4.getMaximumScale(a)*e.radius,n};var N=new a.Cartesian3;o.distanceSquaredTo=function(e,n){var r=a.Cartesian3.subtract(e.center,n,N),t=a.Cartesian3.magnitude(r)-e.radius;return t<=0?0:t*t},o.transformWithoutScale=function(e,a,n){return r.defined(n)||(n=new o),n.center=s.Matrix4.multiplyByPoint(a,e.center,n.center),n.radius=e.radius,n};var j=new a.Cartesian3;o.computePlaneDistances=function(e,n,t,i){r.defined(i)||(i=new d);var s=a.Cartesian3.subtract(e.center,n,j),c=a.Cartesian3.dot(t,s);return i.start=c-e.radius,i.stop=c+e.radius,i};for(var G=new a.Cartesian3,k=new a.Cartesian3,U=new a.Cartesian3,W=new a.Cartesian3,A=new a.Cartesian3,H=new a.Cartographic,_=new Array(8),L=0;L<8;++L)_[L]=new a.Cartesian3;var X=new t.GeographicProjection;o.projectTo2D=function(e,n,t){var i,s=(n=r.defaultValue(n,X)).ellipsoid,c=e.center,u=e.radius;i=a.Cartesian3.equals(c,a.Cartesian3.ZERO)?a.Cartesian3.clone(a.Cartesian3.UNIT_X,G):s.geodeticSurfaceNormal(c,G);var d=a.Cartesian3.cross(a.Cartesian3.UNIT_Z,i,k);a.Cartesian3.normalize(d,d);var C=a.Cartesian3.cross(i,d,U);a.Cartesian3.normalize(C,C),a.Cartesian3.multiplyByScalar(i,u,i),a.Cartesian3.multiplyByScalar(C,u,C),a.Cartesian3.multiplyByScalar(d,u,d);var l=a.Cartesian3.negate(C,A),f=a.Cartesian3.negate(d,W),v=_,y=v[0];a.Cartesian3.add(i,C,y),a.Cartesian3.add(y,d,y),y=v[1],a.Cartesian3.add(i,C,y),a.Cartesian3.add(y,f,y),y=v[2],a.Cartesian3.add(i,l,y),a.Cartesian3.add(y,f,y),y=v[3],a.Cartesian3.add(i,l,y),a.Cartesian3.add(y,d,y),a.Cartesian3.negate(i,i),y=v[4],a.Cartesian3.add(i,C,y),a.Cartesian3.add(y,d,y),y=v[5],a.Cartesian3.add(i,C,y),a.Cartesian3.add(y,f,y),y=v[6],a.Cartesian3.add(i,l,y),a.Cartesian3.add(y,f,y),y=v[7],a.Cartesian3.add(i,l,y),a.Cartesian3.add(y,d,y);for(var x=v.length,m=0;m<x;++m){var g=v[m];a.Cartesian3.add(c,g,g);var h=s.cartesianToCartographic(g,H);n.project(h,g)}var z=(c=(t=o.fromPoints(v,t)).center).x,p=c.y,w=c.z;return c.x=w,c.y=z,c.z=p,t},o.isOccluded=function(e,a){return!a.isBoundingSphereVisible(e)},o.equals=function(e,n){return e===n||r.defined(e)&&r.defined(n)&&a.Cartesian3.equals(e.center,n.center)&&e.radius===n.radius},o.prototype.intersectPlane=function(e){return o.intersectPlane(this,e)},o.prototype.distanceSquaredTo=function(e){return o.distanceSquaredTo(this,e)},o.prototype.computePlaneDistances=function(e,a,n){return o.computePlaneDistances(this,e,a,n)},o.prototype.isOccluded=function(e){return o.isOccluded(this,e)},o.prototype.equals=function(e){return o.equals(this,e)},o.prototype.clone=function(e){return o.clone(this,e)},o.prototype.volume=function(){var e=this.radius;return S*e*e*e},e.BoundingSphere=o,e.Intersect=u,e.Interval=d}));

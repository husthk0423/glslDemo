define(["exports","./when-422ea0ae","./Cartesian2-cce28994","./Matrix4-da4bb68c","./Check-edea0f91","./defaultValue-81eec7ed","./Resource-721e53e7","./RuntimeError-94b0bf5f","./Math-29cbc3fa"],(function(e,n,t,r,a,i,s,o,u){"use strict";var l,d,f,c,p,m,h,y,w,x,C,_,S,E,v,g,M,O,D={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},A={};function T(e){for(var n=e.split("."),t=0,r=n.length;t<r;++t)n[t]=parseInt(n[t],10);return n}function P(){if(!i.defined(f)&&(f=!1,!U())){var e=/ Chrome\/([\.0-9]+)/.exec(d.userAgent);null!==e&&(f=!0,c=T(e[1]))}return f}function R(){if(!i.defined(p)&&(p=!1,!P()&&!U()&&/ Safari\/[\.0-9]+/.test(d.userAgent))){var e=/ Version\/([\.0-9]+)/.exec(d.userAgent);null!==e&&(p=!0,m=T(e[1]))}return p}function I(){if(!i.defined(h)){h=!1;var e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(d.userAgent);null!==e&&(h=!0,(y=T(e[1])).isNightly=!!e[2])}return h}function N(){var e;i.defined(w)||(w=!1,"Microsoft Internet Explorer"===d.appName?null!==(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(d.userAgent))&&(w=!0,x=T(e[1])):"Netscape"===d.appName&&null!==(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(d.userAgent))&&(w=!0,x=T(e[1])));return w}function U(){if(!i.defined(C)){C=!1;var e=/ Edge\/([\.0-9]+)/.exec(d.userAgent);null!==e&&(C=!0,_=T(e[1]))}return C}function F(){if(!i.defined(S)){S=!1;var e=/Firefox\/([\.0-9]+)/.exec(d.userAgent);null!==e&&(S=!0,E=T(e[1]))}return S}function b(){if(!i.defined(O)){var e=document.createElement("canvas");e.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");var n=e.style.imageRendering;(O=i.defined(n)&&""!==n)&&(M=n)}return O}function z(){return z._result}Object.defineProperties(A,{element:{get:function(){if(A.supportsFullscreen())return document[D.fullscreenElement]}},changeEventName:{get:function(){if(A.supportsFullscreen())return D.fullscreenchange}},errorEventName:{get:function(){if(A.supportsFullscreen())return D.fullscreenerror}},enabled:{get:function(){if(A.supportsFullscreen())return document[D.fullscreenEnabled]}},fullscreen:{get:function(){if(A.supportsFullscreen())return null!==A.element}}}),A.supportsFullscreen=function(){if(i.defined(l))return l;l=!1;var e=document.body;if("function"==typeof e.requestFullscreen)return D.requestFullscreen="requestFullscreen",D.exitFullscreen="exitFullscreen",D.fullscreenEnabled="fullscreenEnabled",D.fullscreenElement="fullscreenElement",D.fullscreenchange="fullscreenchange",D.fullscreenerror="fullscreenerror",l=!0;for(var n,t=["webkit","moz","o","ms","khtml"],r=0,a=t.length;r<a;++r){var s=t[r];("function"==typeof e[n=s+"RequestFullscreen"]||"function"==typeof e[n=s+"RequestFullScreen"])&&(D.requestFullscreen=n,l=!0),n=s+"ExitFullscreen","function"==typeof document[n]?D.exitFullscreen=n:(n=s+"CancelFullScreen","function"==typeof document[n]&&(D.exitFullscreen=n)),n=s+"FullscreenEnabled",void 0!==document[n]?D.fullscreenEnabled=n:(n=s+"FullScreenEnabled",void 0!==document[n]&&(D.fullscreenEnabled=n)),n=s+"FullscreenElement",void 0!==document[n]?D.fullscreenElement=n:(n=s+"FullScreenElement",void 0!==document[n]&&(D.fullscreenElement=n)),n=s+"fullscreenchange",void 0!==document["on"+n]&&("ms"===s&&(n="MSFullscreenChange"),D.fullscreenchange=n),n=s+"fullscreenerror",void 0!==document["on"+n]&&("ms"===s&&(n="MSFullscreenError"),D.fullscreenerror=n)}return l},A.requestFullscreen=function(e,n){A.supportsFullscreen()&&e[D.requestFullscreen]({vrDisplay:n})},A.exitFullscreen=function(){A.supportsFullscreen()&&document[D.exitFullscreen]()},A._names=D,d="undefined"!=typeof navigator?navigator:{},z._promise=void 0,z._result=void 0,z.initialize=function(){if(i.defined(z._promise))return z._promise;var e=n.when.defer();if(z._promise=e.promise,U())return z._result=!1,e.resolve(z._result),e.promise;var t=new Image;return t.onload=function(){z._result=t.width>0&&t.height>0,e.resolve(z._result)},t.onerror=function(){z._result=!1,e.resolve(z._result)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.promise},Object.defineProperties(z,{initialized:{get:function(){return i.defined(z._result)}}});var W=[];"undefined"!=typeof ArrayBuffer&&(W.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&W.push(Uint8ClampedArray),"undefined"!=typeof Uint8ClampedArray&&W.push(Uint8ClampedArray),"undefined"!=typeof BigInt64Array&&W.push(BigInt64Array),"undefined"!=typeof BigUint64Array&&W.push(BigUint64Array));var q={isChrome:P,chromeVersion:function(){return P()&&c},isSafari:R,safariVersion:function(){return R()&&m},isWebkit:I,webkitVersion:function(){return I()&&y},isInternetExplorer:N,internetExplorerVersion:function(){return N()&&x},isEdge:U,edgeVersion:function(){return U()&&_},isFirefox:F,firefoxVersion:function(){return F()&&E},isWindows:function(){return i.defined(v)||(v=/Windows/i.test(d.appVersion)),v},hardwareConcurrency:i.defaultValue(d.hardwareConcurrency,3),supportsPointerEvents:function(){return i.defined(g)||(g=!F()&&"undefined"!=typeof PointerEvent&&(!i.defined(d.pointerEnabled)||d.pointerEnabled)),g},supportsImageRenderingPixelated:b,supportsWebP:z,imageRenderingValue:function(){return b()?M:void 0},typedArrayTypes:W};function B(e,n,t,r){this.x=i.defaultValue(e,0),this.y=i.defaultValue(n,0),this.z=i.defaultValue(t,0),this.w=i.defaultValue(r,0)}q.supportsBasis=function(e){return q.supportsWebAssembly()&&e.context.supportsBasis},q.supportsFullscreen=function(){return A.supportsFullscreen()},q.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},q.supportsBigInt64Array=function(){return"undefined"!=typeof BigInt64Array},q.supportsBigUint64Array=function(){return"undefined"!=typeof BigUint64Array},q.supportsBigInt=function(){return"undefined"!=typeof BigInt},q.supportsWebWorkers=function(){return"undefined"!=typeof Worker},q.supportsWebAssembly=function(){return"undefined"!=typeof WebAssembly&&!q.isEdge()};var V=new t.Cartesian3;B.fromAxisAngle=function(e,n,r){var a=n/2,s=Math.sin(a),o=(V=t.Cartesian3.normalize(e,V)).x*s,u=V.y*s,l=V.z*s,d=Math.cos(a);return i.defined(r)?(r.x=o,r.y=u,r.z=l,r.w=d,r):new B(o,u,l,d)};var L=[1,2,0],k=new Array(3);B.fromRotationMatrix=function(e,n){var t,a,s,o,u,l=e[r.Matrix3.COLUMN0ROW0],d=e[r.Matrix3.COLUMN1ROW1],f=e[r.Matrix3.COLUMN2ROW2],c=l+d+f;if(c>0)u=.5*(t=Math.sqrt(c+1)),t=.5/t,a=(e[r.Matrix3.COLUMN1ROW2]-e[r.Matrix3.COLUMN2ROW1])*t,s=(e[r.Matrix3.COLUMN2ROW0]-e[r.Matrix3.COLUMN0ROW2])*t,o=(e[r.Matrix3.COLUMN0ROW1]-e[r.Matrix3.COLUMN1ROW0])*t;else{var p=0;d>l&&(p=1),f>l&&f>d&&(p=2);var m=L[p],h=L[m];t=Math.sqrt(e[r.Matrix3.getElementIndex(p,p)]-e[r.Matrix3.getElementIndex(m,m)]-e[r.Matrix3.getElementIndex(h,h)]+1);var y=k;y[p]=.5*t,t=.5/t,u=(e[r.Matrix3.getElementIndex(h,m)]-e[r.Matrix3.getElementIndex(m,h)])*t,y[m]=(e[r.Matrix3.getElementIndex(m,p)]+e[r.Matrix3.getElementIndex(p,m)])*t,y[h]=(e[r.Matrix3.getElementIndex(h,p)]+e[r.Matrix3.getElementIndex(p,h)])*t,a=-y[0],s=-y[1],o=-y[2]}return i.defined(n)?(n.x=a,n.y=s,n.z=o,n.w=u,n):new B(a,s,o,u)};var Y=new B,j=new B,G=new B,Z=new B;B.fromHeadingPitchRoll=function(e,n){return Z=B.fromAxisAngle(t.Cartesian3.UNIT_X,e.roll,Y),G=B.fromAxisAngle(t.Cartesian3.UNIT_Y,-e.pitch,n),n=B.multiply(G,Z,G),j=B.fromAxisAngle(t.Cartesian3.UNIT_Z,-e.heading,Y),B.multiply(j,n,n)};var J=new t.Cartesian3,X=new t.Cartesian3,H=new B,Q=new B,$=new B;B.packedLength=4,B.pack=function(e,n,t){return t=i.defaultValue(t,0),n[t++]=e.x,n[t++]=e.y,n[t++]=e.z,n[t]=e.w,n},B.unpack=function(e,n,t){return n=i.defaultValue(n,0),i.defined(t)||(t=new B),t.x=e[n],t.y=e[n+1],t.z=e[n+2],t.w=e[n+3],t},B.packedInterpolationLength=3,B.convertPackedArrayForInterpolation=function(e,n,t,r){B.unpack(e,4*t,$),B.conjugate($,$);for(var a=0,s=t-n+1;a<s;a++){var o=3*a;B.unpack(e,4*(n+a),H),B.multiply(H,$,H),H.w<0&&B.negate(H,H),B.computeAxis(H,J);var u=B.computeAngle(H);i.defined(r)||(r=[]),r[o]=J.x*u,r[o+1]=J.y*u,r[o+2]=J.z*u}},B.unpackInterpolationResult=function(e,n,r,a,s){i.defined(s)||(s=new B),t.Cartesian3.fromArray(e,0,X);var o=t.Cartesian3.magnitude(X);return B.unpack(n,4*a,Q),0===o?B.clone(B.IDENTITY,H):B.fromAxisAngle(X,o,H),B.multiply(H,Q,s)},B.clone=function(e,n){if(i.defined(e))return i.defined(n)?(n.x=e.x,n.y=e.y,n.z=e.z,n.w=e.w,n):new B(e.x,e.y,e.z,e.w)},B.conjugate=function(e,n){return n.x=-e.x,n.y=-e.y,n.z=-e.z,n.w=e.w,n},B.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},B.magnitude=function(e){return Math.sqrt(B.magnitudeSquared(e))},B.normalize=function(e,n){var t=1/B.magnitude(e),r=e.x*t,a=e.y*t,i=e.z*t,s=e.w*t;return n.x=r,n.y=a,n.z=i,n.w=s,n},B.inverse=function(e,n){var t=B.magnitudeSquared(e);return n=B.conjugate(e,n),B.multiplyByScalar(n,1/t,n)},B.add=function(e,n,t){return t.x=e.x+n.x,t.y=e.y+n.y,t.z=e.z+n.z,t.w=e.w+n.w,t},B.subtract=function(e,n,t){return t.x=e.x-n.x,t.y=e.y-n.y,t.z=e.z-n.z,t.w=e.w-n.w,t},B.negate=function(e,n){return n.x=-e.x,n.y=-e.y,n.z=-e.z,n.w=-e.w,n},B.dot=function(e,n){return e.x*n.x+e.y*n.y+e.z*n.z+e.w*n.w},B.multiply=function(e,n,t){var r=e.x,a=e.y,i=e.z,s=e.w,o=n.x,u=n.y,l=n.z,d=n.w,f=s*o+r*d+a*l-i*u,c=s*u-r*l+a*d+i*o,p=s*l+r*u-a*o+i*d,m=s*d-r*o-a*u-i*l;return t.x=f,t.y=c,t.z=p,t.w=m,t},B.multiplyByScalar=function(e,n,t){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=e.w*n,t},B.divideByScalar=function(e,n,t){return t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,t.w=e.w/n,t},B.computeAxis=function(e,n){var t=e.w;if(Math.abs(t-1)<u.CesiumMath.EPSILON6)return n.x=n.y=n.z=0,n;var r=1/Math.sqrt(1-t*t);return n.x=e.x*r,n.y=e.y*r,n.z=e.z*r,n},B.computeAngle=function(e){return Math.abs(e.w-1)<u.CesiumMath.EPSILON6?0:2*Math.acos(e.w)};var K=new B;B.lerp=function(e,n,t,r){return K=B.multiplyByScalar(n,t,K),r=B.multiplyByScalar(e,1-t,r),B.add(K,r,r)};var ee=new B,ne=new B,te=new B;B.slerp=function(e,n,t,r){var a=B.dot(e,n),i=n;if(a<0&&(a=-a,i=ee=B.negate(n,ee)),1-a<u.CesiumMath.EPSILON6)return B.lerp(e,i,t,r);var s=Math.acos(a);return ne=B.multiplyByScalar(e,Math.sin((1-t)*s),ne),te=B.multiplyByScalar(i,Math.sin(t*s),te),r=B.add(ne,te,r),B.multiplyByScalar(r,1/Math.sin(s),r)},B.log=function(e,n){var r=u.CesiumMath.acosClamped(e.w),a=0;return 0!==r&&(a=r/Math.sin(r)),t.Cartesian3.multiplyByScalar(e,a,n)},B.exp=function(e,n){var r=t.Cartesian3.magnitude(e),a=0;return 0!==r&&(a=Math.sin(r)/r),n.x=e.x*a,n.y=e.y*a,n.z=e.z*a,n.w=Math.cos(r),n};var re=new t.Cartesian3,ae=new t.Cartesian3,ie=new B,se=new B;B.computeInnerQuadrangle=function(e,n,r,a){var i=B.conjugate(n,ie);B.multiply(i,r,se);var s=B.log(se,re);B.multiply(i,e,se);var o=B.log(se,ae);return t.Cartesian3.add(s,o,s),t.Cartesian3.multiplyByScalar(s,.25,s),t.Cartesian3.negate(s,s),B.exp(s,ie),B.multiply(n,ie,a)},B.squad=function(e,n,t,r,a,i){var s=B.slerp(e,n,a,ie),o=B.slerp(t,r,a,se);return B.slerp(s,o,2*a*(1-a),i)};for(var oe=new B,ue=1.9011074535173003,le=q.supportsTypedArrays()?new Float32Array(8):[],de=q.supportsTypedArrays()?new Float32Array(8):[],fe=q.supportsTypedArrays()?new Float32Array(8):[],ce=q.supportsTypedArrays()?new Float32Array(8):[],pe=0;pe<7;++pe){var me=pe+1,he=2*me+1;le[pe]=1/(me*he),de[pe]=me/he}function ye(e,n,t){for(var r,a,i=0,s=e.length-1;i<=s;)if((a=t(e[r=~~((i+s)/2)],n))<0)i=r+1;else{if(!(a>0))return r;s=r-1}return~(s+1)}function we(e,n,t,r,a){this.xPoleWander=e,this.yPoleWander=n,this.xPoleOffset=t,this.yPoleOffset=r,this.ut1MinusUtc=a}function xe(e,n,t,r,a,i,s,o){this.year=e,this.month=n,this.day=t,this.hour=r,this.minute=a,this.second=i,this.millisecond=s,this.isLeapSecond=o}function Ce(e){return e%4==0&&e%100!=0||e%400==0}function _e(e,n){this.julianDate=e,this.offset=n}le[7]=ue/136,de[7]=8*ue/17,B.fastSlerp=function(e,n,t,r){var a,i=B.dot(e,n);i>=0?a=1:(a=-1,i=-i);for(var s=i-1,o=1-t,u=t*t,l=o*o,d=7;d>=0;--d)fe[d]=(le[d]*u-de[d])*s,ce[d]=(le[d]*l-de[d])*s;var f=a*t*(1+fe[0]*(1+fe[1]*(1+fe[2]*(1+fe[3]*(1+fe[4]*(1+fe[5]*(1+fe[6]*(1+fe[7])))))))),c=o*(1+ce[0]*(1+ce[1]*(1+ce[2]*(1+ce[3]*(1+ce[4]*(1+ce[5]*(1+ce[6]*(1+ce[7])))))))),p=B.multiplyByScalar(e,c,oe);return B.multiplyByScalar(n,f,r),B.add(p,r,r)},B.fastSquad=function(e,n,t,r,a,i){var s=B.fastSlerp(e,n,a,ie),o=B.fastSlerp(t,r,a,se);return B.fastSlerp(s,o,2*a*(1-a),i)},B.equals=function(e,n){return e===n||i.defined(e)&&i.defined(n)&&e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w},B.equalsEpsilon=function(e,n,t){return t=i.defaultValue(t,0),e===n||i.defined(e)&&i.defined(n)&&Math.abs(e.x-n.x)<=t&&Math.abs(e.y-n.y)<=t&&Math.abs(e.z-n.z)<=t&&Math.abs(e.w-n.w)<=t},B.ZERO=Object.freeze(new B(0,0,0,0)),B.IDENTITY=Object.freeze(new B(0,0,0,1)),B.prototype.clone=function(e){return B.clone(this,e)},B.prototype.equals=function(e){return B.equals(this,e)},B.prototype.equalsEpsilon=function(e,n){return B.equalsEpsilon(this,e,n)},B.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var Se=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),Ee=Object.freeze({UTC:0,TAI:1}),ve=new xe,ge=[31,28,31,30,31,30,31,31,30,31,30,31];function Me(e,n){return Be.compare(e.julianDate,n.julianDate)}var Oe=new _e;function De(e){Oe.julianDate=e;var n=Be.leapSeconds,t=ye(n,Oe,Me);t<0&&(t=~t),t>=n.length&&(t=n.length-1);var r=n[t].offset;t>0&&(Be.secondsDifference(n[t].julianDate,e)>r&&(r=n[--t].offset));Be.addSeconds(e,r,e)}function Ae(e,n){Oe.julianDate=e;var t=Be.leapSeconds,r=ye(t,Oe,Me);if(r<0&&(r=~r),0===r)return Be.addSeconds(e,-t[0].offset,n);if(r>=t.length)return Be.addSeconds(e,-t[r-1].offset,n);var a=Be.secondsDifference(t[r].julianDate,e);return 0===a?Be.addSeconds(e,-t[r].offset,n):a<=1?void 0:Be.addSeconds(e,-t[--r].offset,n)}function Te(e,n,t){var r=n/Se.SECONDS_PER_DAY|0;return e+=r,(n-=Se.SECONDS_PER_DAY*r)<0&&(e--,n+=Se.SECONDS_PER_DAY),t.dayNumber=e,t.secondsOfDay=n,t}function Pe(e,n,t,r,a,i,s){var o=(n-14)/12|0,u=e+4800+o,l=(1461*u/4|0)+(367*(n-2-12*o)/12|0)-(3*((u+100)/100|0)/4|0)+t-32075;(r-=12)<0&&(r+=24);var d=i+(r*Se.SECONDS_PER_HOUR+a*Se.SECONDS_PER_MINUTE+s*Se.SECONDS_PER_MILLISECOND);return d>=43200&&(l-=1),[l,d]}var Re=/^(\d{4})$/,Ie=/^(\d{4})-(\d{2})$/,Ne=/^(\d{4})-?(\d{3})$/,Ue=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,Fe=/^(\d{4})-?(\d{2})-?(\d{2})$/,be=/([Z+\-])?(\d{2})?:?(\d{2})?$/,ze=/^(\d{2})(\.\d+)?/.source+be.source,We=/^(\d{2}):?(\d{2})(\.\d+)?/.source+be.source,qe=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+be.source;function Be(e,n,t){this.dayNumber=void 0,this.secondsOfDay=void 0,e=i.defaultValue(e,0),n=i.defaultValue(n,0),t=i.defaultValue(t,Ee.UTC);var r=0|e;Te(r,n+=(e-r)*Se.SECONDS_PER_DAY,this),t===Ee.UTC&&De(this)}Be.fromGregorianDate=function(e,n){var t=Pe(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return i.defined(n)?(Te(t[0],t[1],n),De(n),n):new Be(t[0],t[1],Ee.UTC)},Be.fromDate=function(e,n){var t=Pe(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return i.defined(n)?(Te(t[0],t[1],n),De(n),n):new Be(t[0],t[1],Ee.UTC)},Be.fromIso8601=function(e,n){var t,r,a,s,o=(e=e.replace(",",".")).split("T"),u=1,l=1,d=0,f=0,c=0,p=0,m=o[0],h=o[1];if(null!==(o=m.match(Fe)))t=+o[1],u=+o[2],l=+o[3];else if(null!==(o=m.match(Ie)))t=+o[1],u=+o[2];else if(null!==(o=m.match(Re)))t=+o[1];else{var y;if(null!==(o=m.match(Ne)))t=+o[1],y=+o[2],a=Ce(t);else if(null!==(o=m.match(Ue)))t=+o[1],y=7*+o[2]+(+o[3]||0)-new Date(Date.UTC(t,0,4)).getUTCDay()-3;(r=new Date(Date.UTC(t,0,1))).setUTCDate(y),u=r.getUTCMonth()+1,l=r.getUTCDate()}if(a=Ce(t),i.defined(h)){null!==(o=h.match(qe))?(d=+o[1],f=+o[2],c=+o[3],p=1e3*+(o[4]||0),s=5):null!==(o=h.match(We))?(d=+o[1],f=+o[2],c=60*+(o[3]||0),s=4):null!==(o=h.match(ze))&&(d=+o[1],f=60*+(o[2]||0),s=3);var w=o[s],x=+o[s+1],C=+(o[s+2]||0);switch(w){case"+":d-=x,f-=C;break;case"-":d+=x,f+=C;break;case"Z":break;default:f+=new Date(Date.UTC(t,u-1,l,d,f)).getTimezoneOffset()}}var _=60===c;for(_&&c--;f>=60;)f-=60,d++;for(;d>=24;)d-=24,l++;for(r=a&&2===u?29:ge[u-1];l>r;)l-=r,++u>12&&(u-=12,t++),r=a&&2===u?29:ge[u-1];for(;f<0;)f+=60,d--;for(;d<0;)d+=24,l--;for(;l<1;)--u<1&&(u+=12,t--),l+=r=a&&2===u?29:ge[u-1];var S=Pe(t,u,l,d,f,c,p);return i.defined(n)?(Te(S[0],S[1],n),De(n)):n=new Be(S[0],S[1],Ee.UTC),_&&Be.addSeconds(n,1,n),n},Be.now=function(e){return Be.fromDate(new Date,e)};var Ve=new Be(0,0,Ee.TAI);function Le(e){if(e=i.defaultValue(e,i.defaultValue.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=i.defaultValue(e.addNewLeapSeconds,!0),i.defined(e.data))Ye(this,e.data);else if(i.defined(e.url)){var n=s.Resource.createIfNeeded(e.url),t=this;this._downloadPromise=n.fetchJson().then((function(e){Ye(t,e)})).otherwise((function(){t._dataError="An error occurred while retrieving the EOP data from the URL "+n.url+"."}))}else Ye(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function ke(e,n){return Be.compare(e.julianDate,n)}function Ye(e,n){if(i.defined(n.columnNames))if(i.defined(n.samples)){var t=n.columnNames.indexOf("modifiedJulianDateUtc"),r=n.columnNames.indexOf("xPoleWanderRadians"),a=n.columnNames.indexOf("yPoleWanderRadians"),s=n.columnNames.indexOf("ut1MinusUtcSeconds"),o=n.columnNames.indexOf("xCelestialPoleOffsetRadians"),u=n.columnNames.indexOf("yCelestialPoleOffsetRadians"),l=n.columnNames.indexOf("taiMinusUtcSeconds");if(t<0||r<0||a<0||s<0||o<0||u<0||l<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var d,f=e._samples=n.samples,c=e._dates=[];e._dateColumn=t,e._xPoleWanderRadiansColumn=r,e._yPoleWanderRadiansColumn=a,e._ut1MinusUtcSecondsColumn=s,e._xCelestialPoleOffsetRadiansColumn=o,e._yCelestialPoleOffsetRadiansColumn=u,e._taiMinusUtcSecondsColumn=l,e._columnCount=n.columnNames.length,e._lastIndex=void 0;for(var p=e._addNewLeapSeconds,m=0,h=f.length;m<h;m+=e._columnCount){var y=f[m+t],w=f[m+l],x=new Be(y+Se.MODIFIED_JULIAN_DATE_DIFFERENCE,w,Ee.TAI);if(c.push(x),p){if(w!==d&&i.defined(d)){var C=Be.leapSeconds,_=ye(C,x,ke);if(_<0){var S=new _e(x,w);C.splice(~_,0,S)}}d=w}}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function je(e,n,t,r,a){var i=t*r;a.xPoleWander=n[i+e._xPoleWanderRadiansColumn],a.yPoleWander=n[i+e._yPoleWanderRadiansColumn],a.xPoleOffset=n[i+e._xCelestialPoleOffsetRadiansColumn],a.yPoleOffset=n[i+e._yCelestialPoleOffsetRadiansColumn],a.ut1MinusUtc=n[i+e._ut1MinusUtcSecondsColumn]}function Ge(e,n,t){return n+e*(t-n)}function Ze(e,n,t,r,a,i,s){var o=e._columnCount;if(i>n.length-1)return s.xPoleWander=0,s.yPoleWander=0,s.xPoleOffset=0,s.yPoleOffset=0,s.ut1MinusUtc=0,s;var u=n[a],l=n[i];if(u.equals(l)||r.equals(u))return je(e,t,a,o,s),s;if(r.equals(l))return je(e,t,i,o,s),s;var d=Be.secondsDifference(r,u)/Be.secondsDifference(l,u),f=a*o,c=i*o,p=t[f+e._ut1MinusUtcSecondsColumn],m=t[c+e._ut1MinusUtcSecondsColumn],h=m-p;if(h>.5||h<-.5){var y=t[f+e._taiMinusUtcSecondsColumn],w=t[c+e._taiMinusUtcSecondsColumn];y!==w&&(l.equals(r)?p=m:m-=w-y)}return s.xPoleWander=Ge(d,t[f+e._xPoleWanderRadiansColumn],t[c+e._xPoleWanderRadiansColumn]),s.yPoleWander=Ge(d,t[f+e._yPoleWanderRadiansColumn],t[c+e._yPoleWanderRadiansColumn]),s.xPoleOffset=Ge(d,t[f+e._xCelestialPoleOffsetRadiansColumn],t[c+e._xCelestialPoleOffsetRadiansColumn]),s.yPoleOffset=Ge(d,t[f+e._yCelestialPoleOffsetRadiansColumn],t[c+e._yCelestialPoleOffsetRadiansColumn]),s.ut1MinusUtc=Ge(d,p,m),s}function Je(e,n,t){this.heading=i.defaultValue(e,0),this.pitch=i.defaultValue(n,0),this.roll=i.defaultValue(t,0)}Be.toGregorianDate=function(e,n){var t=!1,r=Ae(e,Ve);i.defined(r)||(Be.addSeconds(e,-1,Ve),r=Ae(Ve,Ve),t=!0);var a=r.dayNumber,s=r.secondsOfDay;s>=43200&&(a+=1);var o=a+68569|0,u=4*o/146097|0,l=4e3*((o=o-((146097*u+3)/4|0)|0)+1)/1461001|0,d=80*(o=o-(1461*l/4|0)+31|0)/2447|0,f=o-(2447*d/80|0)|0,c=d+2-12*(o=d/11|0)|0,p=100*(u-49)+l+o|0,m=s/Se.SECONDS_PER_HOUR|0,h=s-m*Se.SECONDS_PER_HOUR,y=h/Se.SECONDS_PER_MINUTE|0,w=0|(h-=y*Se.SECONDS_PER_MINUTE),x=(h-w)/Se.SECONDS_PER_MILLISECOND;return(m+=12)>23&&(m-=24),t&&(w+=1),i.defined(n)?(n.year=p,n.month=c,n.day=f,n.hour=m,n.minute=y,n.second=w,n.millisecond=x,n.isLeapSecond=t,n):new xe(p,c,f,m,y,w,x,t)},Be.toDate=function(e){var n=Be.toGregorianDate(e,ve),t=n.second;return n.isLeapSecond&&(t-=1),new Date(Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,t,n.millisecond))},Be.toIso8601=function(e,n){var t,r=Be.toGregorianDate(e,ve),a=r.year,s=r.month,o=r.day,u=r.hour,l=r.minute,d=r.second,f=r.millisecond;return 1e4===a&&1===s&&1===o&&0===u&&0===l&&0===d&&0===f&&(a=9999,s=12,o=31,u=24),i.defined(n)||0===f?i.defined(n)&&0!==n?(t=(.01*f).toFixed(n).replace(".","").slice(0,n),a.toString().padStart(4,"0")+"-"+s.toString().padStart(2,"0")+"-"+o.toString().padStart(2,"0")+"T"+u.toString().padStart(2,"0")+":"+l.toString().padStart(2,"0")+":"+d.toString().padStart(2,"0")+"."+t+"Z"):a.toString().padStart(4,"0")+"-"+s.toString().padStart(2,"0")+"-"+o.toString().padStart(2,"0")+"T"+u.toString().padStart(2,"0")+":"+l.toString().padStart(2,"0")+":"+d.toString().padStart(2,"0")+"Z":(t=(.01*f).toString().replace(".",""),a.toString().padStart(4,"0")+"-"+s.toString().padStart(2,"0")+"-"+o.toString().padStart(2,"0")+"T"+u.toString().padStart(2,"0")+":"+l.toString().padStart(2,"0")+":"+d.toString().padStart(2,"0")+"."+t+"Z")},Be.clone=function(e,n){if(i.defined(e))return i.defined(n)?(n.dayNumber=e.dayNumber,n.secondsOfDay=e.secondsOfDay,n):new Be(e.dayNumber,e.secondsOfDay,Ee.TAI)},Be.compare=function(e,n){var t=e.dayNumber-n.dayNumber;return 0!==t?t:e.secondsOfDay-n.secondsOfDay},Be.equals=function(e,n){return e===n||i.defined(e)&&i.defined(n)&&e.dayNumber===n.dayNumber&&e.secondsOfDay===n.secondsOfDay},Be.equalsEpsilon=function(e,n,t){return t=i.defaultValue(t,0),e===n||i.defined(e)&&i.defined(n)&&Math.abs(Be.secondsDifference(e,n))<=t},Be.totalDays=function(e){return e.dayNumber+e.secondsOfDay/Se.SECONDS_PER_DAY},Be.secondsDifference=function(e,n){return(e.dayNumber-n.dayNumber)*Se.SECONDS_PER_DAY+(e.secondsOfDay-n.secondsOfDay)},Be.daysDifference=function(e,n){return e.dayNumber-n.dayNumber+(e.secondsOfDay-n.secondsOfDay)/Se.SECONDS_PER_DAY},Be.computeTaiMinusUtc=function(e){Oe.julianDate=e;var n=Be.leapSeconds,t=ye(n,Oe,Me);return t<0&&(t=~t,--t<0&&(t=0)),n[t].offset},Be.addSeconds=function(e,n,t){return Te(e.dayNumber,e.secondsOfDay+n,t)},Be.addMinutes=function(e,n,t){var r=e.secondsOfDay+n*Se.SECONDS_PER_MINUTE;return Te(e.dayNumber,r,t)},Be.addHours=function(e,n,t){var r=e.secondsOfDay+n*Se.SECONDS_PER_HOUR;return Te(e.dayNumber,r,t)},Be.addDays=function(e,n,t){return Te(e.dayNumber+n,e.secondsOfDay,t)},Be.lessThan=function(e,n){return Be.compare(e,n)<0},Be.lessThanOrEquals=function(e,n){return Be.compare(e,n)<=0},Be.greaterThan=function(e,n){return Be.compare(e,n)>0},Be.greaterThanOrEquals=function(e,n){return Be.compare(e,n)>=0},Be.prototype.clone=function(e){return Be.clone(this,e)},Be.prototype.equals=function(e){return Be.equals(this,e)},Be.prototype.equalsEpsilon=function(e,n){return Be.equalsEpsilon(this,e,n)},Be.prototype.toString=function(){return Be.toIso8601(this)},Be.leapSeconds=[new _e(new Be(2441317,43210,Ee.TAI),10),new _e(new Be(2441499,43211,Ee.TAI),11),new _e(new Be(2441683,43212,Ee.TAI),12),new _e(new Be(2442048,43213,Ee.TAI),13),new _e(new Be(2442413,43214,Ee.TAI),14),new _e(new Be(2442778,43215,Ee.TAI),15),new _e(new Be(2443144,43216,Ee.TAI),16),new _e(new Be(2443509,43217,Ee.TAI),17),new _e(new Be(2443874,43218,Ee.TAI),18),new _e(new Be(2444239,43219,Ee.TAI),19),new _e(new Be(2444786,43220,Ee.TAI),20),new _e(new Be(2445151,43221,Ee.TAI),21),new _e(new Be(2445516,43222,Ee.TAI),22),new _e(new Be(2446247,43223,Ee.TAI),23),new _e(new Be(2447161,43224,Ee.TAI),24),new _e(new Be(2447892,43225,Ee.TAI),25),new _e(new Be(2448257,43226,Ee.TAI),26),new _e(new Be(2448804,43227,Ee.TAI),27),new _e(new Be(2449169,43228,Ee.TAI),28),new _e(new Be(2449534,43229,Ee.TAI),29),new _e(new Be(2450083,43230,Ee.TAI),30),new _e(new Be(2450630,43231,Ee.TAI),31),new _e(new Be(2451179,43232,Ee.TAI),32),new _e(new Be(2453736,43233,Ee.TAI),33),new _e(new Be(2454832,43234,Ee.TAI),34),new _e(new Be(2456109,43235,Ee.TAI),35),new _e(new Be(2457204,43236,Ee.TAI),36),new _e(new Be(2457754,43237,Ee.TAI),37)],Le.NONE=Object.freeze({getPromiseToLoad:function(){return n.when.resolve()},compute:function(e,n){return i.defined(n)?(n.xPoleWander=0,n.yPoleWander=0,n.xPoleOffset=0,n.yPoleOffset=0,n.ut1MinusUtc=0):n=new we(0,0,0,0,0),n}}),Le.prototype.getPromiseToLoad=function(){return n.when(this._downloadPromise)},Le.prototype.compute=function(e,n){if(i.defined(this._samples)){if(i.defined(n)||(n=new we(0,0,0,0,0)),0===this._samples.length)return n.xPoleWander=0,n.yPoleWander=0,n.xPoleOffset=0,n.yPoleOffset=0,n.ut1MinusUtc=0,n;var t=this._dates,r=this._lastIndex,a=0,s=0;if(i.defined(r)){var u=t[r],l=t[r+1],d=Be.lessThanOrEquals(u,e),f=!i.defined(l),c=f||Be.greaterThanOrEquals(l,e);if(d&&c)return a=r,!f&&l.equals(e)&&++a,s=a+1,Ze(this,t,this._samples,e,a,s,n),n}var p=ye(t,e,Be.compare,this._dateColumn);return p>=0?(p<t.length-1&&t[p+1].equals(e)&&++p,a=p,s=p):(a=(s=~p)-1)<0&&(a=0),this._lastIndex=a,Ze(this,t,this._samples,e,a,s,n),n}if(i.defined(this._dataError))throw new o.RuntimeError(this._dataError)},Je.fromQuaternion=function(e,n){i.defined(n)||(n=new Je);var t=2*(e.w*e.y-e.z*e.x),r=1-2*(e.x*e.x+e.y*e.y),a=2*(e.w*e.x+e.y*e.z),s=1-2*(e.y*e.y+e.z*e.z),o=2*(e.w*e.z+e.x*e.y);return n.heading=-Math.atan2(o,s),n.roll=Math.atan2(a,r),n.pitch=-u.CesiumMath.asinClamped(t),n},Je.fromDegrees=function(e,n,t,r){return i.defined(r)||(r=new Je),r.heading=e*u.CesiumMath.RADIANS_PER_DEGREE,r.pitch=n*u.CesiumMath.RADIANS_PER_DEGREE,r.roll=t*u.CesiumMath.RADIANS_PER_DEGREE,r},Je.clone=function(e,n){if(i.defined(e))return i.defined(n)?(n.heading=e.heading,n.pitch=e.pitch,n.roll=e.roll,n):new Je(e.heading,e.pitch,e.roll)},Je.equals=function(e,n){return e===n||i.defined(e)&&i.defined(n)&&e.heading===n.heading&&e.pitch===n.pitch&&e.roll===n.roll},Je.equalsEpsilon=function(e,n,t,r){return e===n||i.defined(e)&&i.defined(n)&&u.CesiumMath.equalsEpsilon(e.heading,n.heading,t,r)&&u.CesiumMath.equalsEpsilon(e.pitch,n.pitch,t,r)&&u.CesiumMath.equalsEpsilon(e.roll,n.roll,t,r)},Je.prototype.clone=function(e){return Je.clone(this,e)},Je.prototype.equals=function(e){return Je.equals(this,e)},Je.prototype.equalsEpsilon=function(e,n,t){return Je.equalsEpsilon(this,e,n,t)},Je.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var Xe,He,Qe,$e=/((?:.*\/)|^)Cesium\.js(?:\?|\#|$)/;function Ke(e){return"undefined"==typeof document?e:(i.defined(Xe)||(Xe=document.createElement("a")),Xe.href=e,Xe.href=Xe.href,Xe.href)}function en(){return i.defined(He)||(e="undefined"!=typeof CESIUM_BASE_URL?CESIUM_BASE_URL:"object"==typeof define&&i.defined(define.amd)&&!define.amd.toUrlUndefined&&i.defined(require.toUrl)?s.getAbsoluteUri("..",rn("Core/buildModuleUrl.js")):function(){for(var e=document.getElementsByTagName("script"),n=0,t=e.length;n<t;++n){var r=e[n].getAttribute("src"),a=$e.exec(r);if(null!==a)return a[1]}}(),(He=new s.Resource({url:Ke(e)})).appendForwardSlash()),He;var e}function nn(e){return Ke(require.toUrl("../"+e))}function tn(e){return en().getDerivedResource({url:e}).url}function rn(e){return i.defined(Qe)||(Qe="object"==typeof define&&i.defined(define.amd)&&!define.amd.toUrlUndefined&&i.defined(require.toUrl)?nn:tn),Qe(e)}function an(e,n,t){this.x=e,this.y=n,this.s=t}function sn(e){e=i.defaultValue(e,i.defaultValue.EMPTY_OBJECT),this._xysFileUrlTemplate=s.Resource.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=i.defaultValue(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=i.defaultValue(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new Be(this._sampleZeroJulianEphemerisDate,0,Ee.TAI),this._stepSizeDays=i.defaultValue(e.stepSizeDays,1),this._samplesPerXysFile=i.defaultValue(e.samplesPerXysFile,1e3),this._totalSamples=i.defaultValue(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var n=this._interpolationOrder,t=this._denominators=new Array(n+1),r=this._xTable=new Array(n+1),a=Math.pow(this._stepSizeDays,n),o=0;o<=n;++o){t[o]=a,r[o]=o*this._stepSizeDays;for(var u=0;u<=n;++u)u!==o&&(t[o]*=o-u);t[o]=1/t[o]}this._work=new Array(n+1),this._coef=new Array(n+1)}rn._cesiumScriptRegex=$e,rn._buildModuleUrlFromBaseUrl=tn,rn._clearBaseResource=function(){He=void 0},rn.setBaseUrl=function(e){He=s.Resource.DEFAULT.getDerivedResource({url:e})},rn.getCesiumBaseUrl=en;var on=new Be(0,0,Ee.TAI);function un(e,n,t){var r=on;return r.dayNumber=n,r.secondsOfDay=t,Be.daysDifference(r,e._sampleZeroDateTT)}function ln(e,t){if(e._chunkDownloadsInProgress[t])return e._chunkDownloadsInProgress[t];var r,a=n.when.defer();e._chunkDownloadsInProgress[t]=a;var o=e._xysFileUrlTemplate;return r=i.defined(o)?o.getDerivedResource({templateValues:{0:t}}):new s.Resource({url:rn("Assets/IAU2006_XYS/IAU2006_XYS_"+t+".json")}),n.when(r.fetchJson(),(function(n){e._chunkDownloadsInProgress[t]=!1;for(var r=e._samples,i=n.samples,s=t*e._samplesPerXysFile*3,o=0,u=i.length;o<u;++o)r[s+o]=i[o];a.resolve()})),a.promise}sn.prototype.preload=function(e,t,r,a){var i=un(this,e,t),s=un(this,r,a),o=i/this._stepSizeDays-this._interpolationOrder/2|0;o<0&&(o=0);var u=s/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;u>=this._totalSamples&&(u=this._totalSamples-1);for(var l=o/this._samplesPerXysFile|0,d=u/this._samplesPerXysFile|0,f=[],c=l;c<=d;++c)f.push(ln(this,c));return n.when.all(f)},sn.prototype.computeXysRadians=function(e,n,t){var r=un(this,e,n);if(!(r<0)){var a=r/this._stepSizeDays|0;if(!(a>=this._totalSamples)){var s=this._interpolationOrder,o=a-(s/2|0);o<0&&(o=0);var u=o+s;u>=this._totalSamples&&(o=(u=this._totalSamples-1)-s)<0&&(o=0);var l=!1,d=this._samples;if(i.defined(d[3*o])||(ln(this,o/this._samplesPerXysFile|0),l=!0),i.defined(d[3*u])||(ln(this,u/this._samplesPerXysFile|0),l=!0),!l){i.defined(t)?(t.x=0,t.y=0,t.s=0):t=new an(0,0,0);var f,c,p=r-o*this._stepSizeDays,m=this._work,h=this._denominators,y=this._coef,w=this._xTable;for(f=0;f<=s;++f)m[f]=p-w[f];for(f=0;f<=s;++f){for(y[f]=1,c=0;c<=s;++c)c!==f&&(y[f]*=m[c]);y[f]*=h[f];var x=3*(o+f);t.x+=y[f]*d[x++],t.y+=y[f]*d[x++],t.s+=y[f]*d[x]}return t}}}};var dn={},fn={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},cn={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},pn={},mn={east:new t.Cartesian3,north:new t.Cartesian3,up:new t.Cartesian3,west:new t.Cartesian3,south:new t.Cartesian3,down:new t.Cartesian3},hn=new t.Cartesian3,yn=new t.Cartesian3,wn=new t.Cartesian3;dn.localFrameToFixedFrameGenerator=function(e,n){if(!fn.hasOwnProperty(e)||!fn[e].hasOwnProperty(n))throw new a.DeveloperError("firstAxis and secondAxis must be east, north, up, west, south or down.");var s,o=fn[e][n],l=e+n;return i.defined(pn[l])?s=pn[l]:(s=function(a,s,l){if(i.defined(l)||(l=new r.Matrix4),t.Cartesian3.equalsEpsilon(a,t.Cartesian3.ZERO,u.CesiumMath.EPSILON14))t.Cartesian3.unpack(cn[e],0,hn),t.Cartesian3.unpack(cn[n],0,yn),t.Cartesian3.unpack(cn[o],0,wn);else if(u.CesiumMath.equalsEpsilon(a.x,0,u.CesiumMath.EPSILON14)&&u.CesiumMath.equalsEpsilon(a.y,0,u.CesiumMath.EPSILON14)){var d=u.CesiumMath.sign(a.z);t.Cartesian3.unpack(cn[e],0,hn),"east"!==e&&"west"!==e&&t.Cartesian3.multiplyByScalar(hn,d,hn),t.Cartesian3.unpack(cn[n],0,yn),"east"!==n&&"west"!==n&&t.Cartesian3.multiplyByScalar(yn,d,yn),t.Cartesian3.unpack(cn[o],0,wn),"east"!==o&&"west"!==o&&t.Cartesian3.multiplyByScalar(wn,d,wn)}else{(s=i.defaultValue(s,t.Ellipsoid.WGS84)).geodeticSurfaceNormal(a,mn.up);var f=mn.up,c=mn.east;c.x=-a.y,c.y=a.x,c.z=0,t.Cartesian3.normalize(c,mn.east),t.Cartesian3.cross(f,c,mn.north),t.Cartesian3.multiplyByScalar(mn.up,-1,mn.down),t.Cartesian3.multiplyByScalar(mn.east,-1,mn.west),t.Cartesian3.multiplyByScalar(mn.north,-1,mn.south),hn=mn[e],yn=mn[n],wn=mn[o]}return l[0]=hn.x,l[1]=hn.y,l[2]=hn.z,l[3]=0,l[4]=yn.x,l[5]=yn.y,l[6]=yn.z,l[7]=0,l[8]=wn.x,l[9]=wn.y,l[10]=wn.z,l[11]=0,l[12]=a.x,l[13]=a.y,l[14]=a.z,l[15]=1,l},pn[l]=s),s},dn.eastNorthUpToFixedFrame=dn.localFrameToFixedFrameGenerator("east","north"),dn.northEastDownToFixedFrame=dn.localFrameToFixedFrameGenerator("north","east"),dn.northUpEastToFixedFrame=dn.localFrameToFixedFrameGenerator("north","up"),dn.northWestUpToFixedFrame=dn.localFrameToFixedFrameGenerator("north","west");var xn=new B,Cn=new t.Cartesian3(1,1,1),_n=new r.Matrix4;dn.headingPitchRollToFixedFrame=function(e,n,a,s,o){s=i.defaultValue(s,dn.eastNorthUpToFixedFrame);var u=B.fromHeadingPitchRoll(n,xn),l=r.Matrix4.fromTranslationQuaternionRotationScale(t.Cartesian3.ZERO,u,Cn,_n);return o=s(e,a,o),r.Matrix4.multiply(o,l,o)};var Sn=new r.Matrix4,En=new r.Matrix3;dn.headingPitchRollQuaternion=function(e,n,t,a,i){var s=dn.headingPitchRollToFixedFrame(e,n,t,a,Sn),o=r.Matrix4.getMatrix3(s,En);return B.fromRotationMatrix(o,i)};var vn=new t.Cartesian3(1,1,1),gn=new t.Cartesian3,Mn=new r.Matrix4,On=new r.Matrix4,Dn=new r.Matrix3,An=new B;dn.fixedFrameToHeadingPitchRoll=function(e,n,a,s){n=i.defaultValue(n,t.Ellipsoid.WGS84),a=i.defaultValue(a,dn.eastNorthUpToFixedFrame),i.defined(s)||(s=new Je);var o=r.Matrix4.getTranslation(e,gn);if(t.Cartesian3.equals(o,t.Cartesian3.ZERO))return s.heading=0,s.pitch=0,s.roll=0,s;var u=r.Matrix4.inverseTransformation(a(o,n,Mn),Mn),l=r.Matrix4.setScale(e,vn,On);l=r.Matrix4.setTranslation(l,t.Cartesian3.ZERO,l),u=r.Matrix4.multiply(u,l,u);var d=B.fromRotationMatrix(r.Matrix4.getMatrix3(u,Dn),An);return d=B.normalize(d,d),Je.fromQuaternion(d,s)};var Tn=u.CesiumMath.TWO_PI/86400,Pn=new Be;dn.computeTemeToPseudoFixedMatrix=function(e,n){var t,a=(Pn=Be.addSeconds(e,-Be.computeTaiMinusUtc(e),Pn)).dayNumber,s=Pn.secondsOfDay,o=a-2451545,l=(24110.54841+(t=s>=43200?(o+.5)/Se.DAYS_PER_JULIAN_CENTURY:(o-.5)/Se.DAYS_PER_JULIAN_CENTURY)*(8640184.812866+t*(.093104+-62e-7*t)))*Tn%u.CesiumMath.TWO_PI+(72921158553e-15+11772758384668e-32*(a-2451545.5))*((s+.5*Se.SECONDS_PER_DAY)%Se.SECONDS_PER_DAY),d=Math.cos(l),f=Math.sin(l);return i.defined(n)?(n[0]=d,n[1]=-f,n[2]=0,n[3]=f,n[4]=d,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n):new r.Matrix3(d,f,0,-f,d,0,0,0,1)},dn.iau2006XysData=new sn,dn.earthOrientationParameters=Le.NONE;var Rn=32.184;dn.preloadIcrfFixed=function(e){var t=e.start.dayNumber,r=e.start.secondsOfDay+Rn,a=e.stop.dayNumber,i=e.stop.secondsOfDay+Rn,s=dn.iau2006XysData.preload(t,r,a,i),o=dn.earthOrientationParameters.getPromiseToLoad();return n.when.all([s,o])},dn.computeIcrfToFixedMatrix=function(e,n){i.defined(n)||(n=new r.Matrix3);var t=dn.computeFixedToIcrfMatrix(e,n);if(i.defined(t))return r.Matrix3.transpose(t,n)};var In=new an(0,0,0),Nn=new we(0,0,0,0,0,0),Un=new r.Matrix3,Fn=new r.Matrix3;dn.computeFixedToIcrfMatrix=function(e,n){i.defined(n)||(n=new r.Matrix3);var t=dn.earthOrientationParameters.compute(e,Nn);if(i.defined(t)){var a=e.dayNumber,s=e.secondsOfDay+Rn,o=dn.iau2006XysData.computeXysRadians(a,s,In);if(i.defined(o)){var l=o.x+t.xPoleOffset,d=o.y+t.yPoleOffset,f=1/(1+Math.sqrt(1-l*l-d*d)),c=Un;c[0]=1-f*l*l,c[3]=-f*l*d,c[6]=l,c[1]=-f*l*d,c[4]=1-f*d*d,c[7]=d,c[2]=-l,c[5]=-d,c[8]=1-f*(l*l+d*d);var p=r.Matrix3.fromRotationZ(-o.s,Fn),m=r.Matrix3.multiply(c,p,Un),h=e.dayNumber-2451545,y=(e.secondsOfDay-Be.computeTaiMinusUtc(e)+t.ut1MinusUtc)/Se.SECONDS_PER_DAY,w=.779057273264+y+.00273781191135448*(h+y);w=w%1*u.CesiumMath.TWO_PI;var x=r.Matrix3.fromRotationZ(w,Fn),C=r.Matrix3.multiply(m,x,Un),_=Math.cos(t.xPoleWander),S=Math.cos(t.yPoleWander),E=Math.sin(t.xPoleWander),v=Math.sin(t.yPoleWander),g=a-2451545+s/Se.SECONDS_PER_DAY,M=-47e-6*(g/=36525)*u.CesiumMath.RADIANS_PER_DEGREE/3600,O=Math.cos(M),D=Math.sin(M),A=Fn;return A[0]=_*O,A[1]=_*D,A[2]=E,A[3]=-S*D+v*E*O,A[4]=S*O+v*E*D,A[5]=-v*_,A[6]=-v*D-S*E*O,A[7]=v*O-S*E*D,A[8]=S*_,r.Matrix3.multiply(C,A,n)}}};var bn=new r.Cartesian4;dn.pointToWindowCoordinates=function(e,n,t,r){return(r=dn.pointToGLWindowCoordinates(e,n,t,r)).y=2*n[5]-r.y,r},dn.pointToGLWindowCoordinates=function(e,n,a,s){i.defined(s)||(s=new t.Cartesian2);var o=bn;return r.Matrix4.multiplyByVector(e,r.Cartesian4.fromElements(a.x,a.y,a.z,1,o),o),r.Cartesian4.multiplyByScalar(o,1/o.w,o),r.Matrix4.multiplyByVector(n,o,o),t.Cartesian2.fromCartesian4(o,s)};var zn=new t.Cartesian3,Wn=new t.Cartesian3,qn=new t.Cartesian3;dn.rotationMatrixFromPositionVelocity=function(e,n,a,s){var o=i.defaultValue(a,t.Ellipsoid.WGS84).geodeticSurfaceNormal(e,zn),l=t.Cartesian3.cross(n,o,Wn);t.Cartesian3.equalsEpsilon(l,t.Cartesian3.ZERO,u.CesiumMath.EPSILON6)&&(l=t.Cartesian3.clone(t.Cartesian3.UNIT_X,l));var d=t.Cartesian3.cross(l,n,qn);return t.Cartesian3.normalize(d,d),t.Cartesian3.cross(n,d,l),t.Cartesian3.negate(l,l),t.Cartesian3.normalize(l,l),i.defined(s)||(s=new r.Matrix3),s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=l.x,s[4]=l.y,s[5]=l.z,s[6]=d.x,s[7]=d.y,s[8]=d.z,s};var Bn=new r.Matrix4(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),Vn=new t.Cartographic,Ln=new t.Cartesian3,kn=new t.Cartesian3,Yn=new r.Matrix3,jn=new r.Matrix4,Gn=new r.Matrix4;dn.basisTo2D=function(e,n,a){var i=r.Matrix4.getTranslation(n,kn),s=e.ellipsoid,o=s.cartesianToCartographic(i,Vn),u=e.project(o,Ln);t.Cartesian3.fromElements(u.z,u.x,u.y,u);var l=dn.eastNorthUpToFixedFrame(i,s,jn),d=r.Matrix4.inverseTransformation(l,Gn),f=r.Matrix4.getMatrix3(n,Yn),c=r.Matrix4.multiplyByMatrix3(d,f,a);return r.Matrix4.multiply(Bn,c,a),r.Matrix4.setTranslation(a,u,a),a},dn.wgs84To2DModelMatrix=function(e,n,a){var i=e.ellipsoid,s=dn.eastNorthUpToFixedFrame(n,i,jn),o=r.Matrix4.inverseTransformation(s,Gn),u=i.cartesianToCartographic(n,Vn),l=e.project(u,Ln);t.Cartesian3.fromElements(l.z,l.x,l.y,l);var d=r.Matrix4.fromTranslation(l,jn);return r.Matrix4.multiply(Bn,o,a),r.Matrix4.multiply(d,a,a),a},e.FeatureDetection=q,e.Quaternion=B,e.Transforms=dn,e.buildModuleUrl=rn}));

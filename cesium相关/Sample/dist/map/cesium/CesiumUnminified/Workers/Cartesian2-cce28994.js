define(["exports","./Check-edea0f91","./defaultValue-81eec7ed","./Math-29cbc3fa"],(function(e,n,t,r){"use strict";function i(e,n,r){this.x=t.defaultValue(e,0),this.y=t.defaultValue(n,0),this.z=t.defaultValue(r,0)}i.fromSpherical=function(e,n){t.defined(n)||(n=new i);var r=e.clock,a=e.cone,u=t.defaultValue(e.magnitude,1),o=u*Math.sin(a);return n.x=o*Math.cos(r),n.y=o*Math.sin(r),n.z=u*Math.cos(a),n},i.fromElements=function(e,n,r,a){return t.defined(a)?(a.x=e,a.y=n,a.z=r,a):new i(e,n,r)},i.clone=function(e,n){if(t.defined(e))return t.defined(n)?(n.x=e.x,n.y=e.y,n.z=e.z,n):new i(e.x,e.y,e.z)},i.fromCartesian4=i.clone,i.packedLength=3,i.pack=function(e,n,r){return r=t.defaultValue(r,0),n[r++]=e.x,n[r++]=e.y,n[r]=e.z,n},i.unpack=function(e,n,r){return n=t.defaultValue(n,0),t.defined(r)||(r=new i),r.x=e[n++],r.y=e[n++],r.z=e[n],r},i.packArray=function(e,r){var a=e.length,u=3*a;if(t.defined(r)){if(!Array.isArray(r)&&r.length!==u)throw new n.DeveloperError("If result is a typed array, it must have exactly array.length * 3 elements");r.length!==u&&(r.length=u)}else r=new Array(u);for(var o=0;o<a;++o)i.pack(e[o],r,3*o);return r},i.unpackArray=function(e,n){var r=e.length;t.defined(n)?n.length=r/3:n=new Array(r/3);for(var a=0;a<r;a+=3){var u=a/3;n[u]=i.unpack(e,a,n[u])}return n},i.fromArray=i.unpack,i.maximumComponent=function(e){return Math.max(e.x,e.y,e.z)},i.minimumComponent=function(e){return Math.min(e.x,e.y,e.z)},i.minimumByComponent=function(e,n,t){return t.x=Math.min(e.x,n.x),t.y=Math.min(e.y,n.y),t.z=Math.min(e.z,n.z),t},i.maximumByComponent=function(e,n,t){return t.x=Math.max(e.x,n.x),t.y=Math.max(e.y,n.y),t.z=Math.max(e.z,n.z),t},i.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z},i.magnitude=function(e){return Math.sqrt(i.magnitudeSquared(e))};var a=new i;i.distance=function(e,n){return i.subtract(e,n,a),i.magnitude(a)},i.distanceSquared=function(e,n){return i.subtract(e,n,a),i.magnitudeSquared(a)},i.normalize=function(e,n){var t=i.magnitude(e);return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n},i.dot=function(e,n){return e.x*n.x+e.y*n.y+e.z*n.z},i.multiplyComponents=function(e,n,t){return t.x=e.x*n.x,t.y=e.y*n.y,t.z=e.z*n.z,t},i.divideComponents=function(e,n,t){return t.x=e.x/n.x,t.y=e.y/n.y,t.z=e.z/n.z,t},i.add=function(e,n,t){return t.x=e.x+n.x,t.y=e.y+n.y,t.z=e.z+n.z,t},i.subtract=function(e,n,t){return t.x=e.x-n.x,t.y=e.y-n.y,t.z=e.z-n.z,t},i.multiplyByScalar=function(e,n,t){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t},i.divideByScalar=function(e,n,t){return t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,t},i.negate=function(e,n){return n.x=-e.x,n.y=-e.y,n.z=-e.z,n},i.abs=function(e,n){return n.x=Math.abs(e.x),n.y=Math.abs(e.y),n.z=Math.abs(e.z),n};var u=new i;i.lerp=function(e,n,t,r){return i.multiplyByScalar(n,t,u),r=i.multiplyByScalar(e,1-t,r),i.add(u,r,r)};var o=new i,d=new i;i.angleBetween=function(e,n){i.normalize(e,o),i.normalize(n,d);var t=i.dot(o,d),r=i.magnitude(i.cross(o,d,o));return Math.atan2(r,t)};var c=new i;i.mostOrthogonalAxis=function(e,n){var t=i.normalize(e,c);return i.abs(t,t),n=t.x<=t.y?t.x<=t.z?i.clone(i.UNIT_X,n):i.clone(i.UNIT_Z,n):t.y<=t.z?i.clone(i.UNIT_Y,n):i.clone(i.UNIT_Z,n)},i.projectVector=function(e,n,t){var r=i.dot(e,n)/i.dot(n,n);return i.multiplyByScalar(n,r,t)},i.equals=function(e,n){return e===n||t.defined(e)&&t.defined(n)&&e.x===n.x&&e.y===n.y&&e.z===n.z},i.equalsArray=function(e,n,t){return e.x===n[t]&&e.y===n[t+1]&&e.z===n[t+2]},i.equalsEpsilon=function(e,n,i,a){return e===n||t.defined(e)&&t.defined(n)&&r.CesiumMath.equalsEpsilon(e.x,n.x,i,a)&&r.CesiumMath.equalsEpsilon(e.y,n.y,i,a)&&r.CesiumMath.equalsEpsilon(e.z,n.z,i,a)},i.cross=function(e,n,t){var r=e.x,i=e.y,a=e.z,u=n.x,o=n.y,d=n.z,c=i*d-a*o,f=a*u-r*d,s=r*o-i*u;return t.x=c,t.y=f,t.z=s,t},i.midpoint=function(e,n,t){return t.x=.5*(e.x+n.x),t.y=.5*(e.y+n.y),t.z=.5*(e.z+n.z),t},i.fromDegrees=function(e,n,t,a,u){return e=r.CesiumMath.toRadians(e),n=r.CesiumMath.toRadians(n),i.fromRadians(e,n,t,a,u)};var f=new i,s=new i,l=new i(40680631590769,40680631590769,40408299984661.445);i.fromRadians=function(e,n,r,a,u){r=t.defaultValue(r,0);var o=t.defined(a)?a.radiiSquared:l,d=Math.cos(n);f.x=d*Math.cos(e),f.y=d*Math.sin(e),f.z=Math.sin(n),f=i.normalize(f,f),i.multiplyComponents(o,f,s);var c=Math.sqrt(i.dot(f,s));return s=i.divideByScalar(s,c,s),f=i.multiplyByScalar(f,r,f),t.defined(u)||(u=new i),i.add(s,f,u)},i.fromDegreesArray=function(e,n,r){var a=e.length;t.defined(r)?r.length=a/2:r=new Array(a/2);for(var u=0;u<a;u+=2){var o=e[u],d=e[u+1],c=u/2;r[c]=i.fromDegrees(o,d,0,n,r[c])}return r},i.fromRadiansArray=function(e,n,r){var a=e.length;t.defined(r)?r.length=a/2:r=new Array(a/2);for(var u=0;u<a;u+=2){var o=e[u],d=e[u+1],c=u/2;r[c]=i.fromRadians(o,d,0,n,r[c])}return r},i.fromDegreesArrayHeights=function(e,n,r){var a=e.length;t.defined(r)?r.length=a/3:r=new Array(a/3);for(var u=0;u<a;u+=3){var o=e[u],d=e[u+1],c=e[u+2],f=u/3;r[f]=i.fromDegrees(o,d,c,n,r[f])}return r},i.fromRadiansArrayHeights=function(e,n,r){var a=e.length;t.defined(r)?r.length=a/3:r=new Array(a/3);for(var u=0;u<a;u+=3){var o=e[u],d=e[u+1],c=e[u+2],f=u/3;r[f]=i.fromRadians(o,d,c,n,r[f])}return r},i.ZERO=Object.freeze(new i(0,0,0)),i.ONE=Object.freeze(new i(1,1,1)),i.UNIT_X=Object.freeze(new i(1,0,0)),i.UNIT_Y=Object.freeze(new i(0,1,0)),i.UNIT_Z=Object.freeze(new i(0,0,1)),i.prototype.clone=function(e){return i.clone(this,e)},i.prototype.equals=function(e){return i.equals(this,e)},i.prototype.equalsEpsilon=function(e,n,t){return i.equalsEpsilon(this,e,n,t)},i.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};var h=new i,y=new i;function m(e,n,a,u,o){var d=e.x,c=e.y,f=e.z,s=n.x,l=n.y,m=n.z,p=d*d*s*s,x=c*c*l*l,g=f*f*m*m,v=p+x+g,z=Math.sqrt(1/v),w=i.multiplyByScalar(e,z,h);if(v<u)return isFinite(z)?i.clone(w,o):void 0;var S=a.x,q=a.y,M=a.z,_=y;_.x=w.x*S*2,_.y=w.y*q*2,_.z=w.z*M*2;var C,R,O,T,A,b,E,N=(1-z)*i.magnitude(e)/(.5*i.magnitude(_)),k=0;do{k=(C=p*(A=(R=1/(1+(N-=k)*S))*R)+x*(b=(O=1/(1+N*q))*O)+g*(E=(T=1/(1+N*M))*T)-1)/(-2*(p*(A*R)*S+x*(b*O)*q+g*(E*T)*M))}while(Math.abs(C)>r.CesiumMath.EPSILON12);return t.defined(o)?(o.x=d*R,o.y=c*O,o.z=f*T,o):new i(d*R,c*O,f*T)}function p(e,n,r){this.longitude=t.defaultValue(e,0),this.latitude=t.defaultValue(n,0),this.height=t.defaultValue(r,0)}p.fromRadians=function(e,n,r,i){return r=t.defaultValue(r,0),t.defined(i)?(i.longitude=e,i.latitude=n,i.height=r,i):new p(e,n,r)},p.fromDegrees=function(e,n,t,i){return e=r.CesiumMath.toRadians(e),n=r.CesiumMath.toRadians(n),p.fromRadians(e,n,t,i)};var x=new i,g=new i,v=new i,z=new i(1/6378137,1/6378137,1/6356752.314245179),w=new i(1/40680631590769,1/40680631590769,1/40408299984661.445),S=r.CesiumMath.EPSILON1;function q(e,n,a,u){n=t.defaultValue(n,0),a=t.defaultValue(a,0),u=t.defaultValue(u,0),e._radii=new i(n,a,u),e._radiiSquared=new i(n*n,a*a,u*u),e._radiiToTheFourth=new i(n*n*n*n,a*a*a*a,u*u*u*u),e._oneOverRadii=new i(0===n?0:1/n,0===a?0:1/a,0===u?0:1/u),e._oneOverRadiiSquared=new i(0===n?0:1/(n*n),0===a?0:1/(a*a),0===u?0:1/(u*u)),e._minimumRadius=Math.min(n,a,u),e._maximumRadius=Math.max(n,a,u),e._centerToleranceSquared=r.CesiumMath.EPSILON1,0!==e._radiiSquared.z&&(e._squaredXOverSquaredZ=e._radiiSquared.x/e._radiiSquared.z)}function M(e,n,t){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,q(this,e,n,t)}p.fromCartesian=function(e,n,a){var u=t.defined(n)?n.oneOverRadii:z,o=t.defined(n)?n.oneOverRadiiSquared:w,d=m(e,u,o,t.defined(n)?n._centerToleranceSquared:S,g);if(t.defined(d)){var c=i.multiplyComponents(d,o,x);c=i.normalize(c,c);var f=i.subtract(e,d,v),s=Math.atan2(c.y,c.x),l=Math.asin(c.z),h=r.CesiumMath.sign(i.dot(f,e))*i.magnitude(f);return t.defined(a)?(a.longitude=s,a.latitude=l,a.height=h,a):new p(s,l,h)}},p.toCartesian=function(e,n,t){return i.fromRadians(e.longitude,e.latitude,e.height,n,t)},p.clone=function(e,n){if(t.defined(e))return t.defined(n)?(n.longitude=e.longitude,n.latitude=e.latitude,n.height=e.height,n):new p(e.longitude,e.latitude,e.height)},p.equals=function(e,n){return e===n||t.defined(e)&&t.defined(n)&&e.longitude===n.longitude&&e.latitude===n.latitude&&e.height===n.height},p.equalsEpsilon=function(e,n,r){return r=t.defaultValue(r,0),e===n||t.defined(e)&&t.defined(n)&&Math.abs(e.longitude-n.longitude)<=r&&Math.abs(e.latitude-n.latitude)<=r&&Math.abs(e.height-n.height)<=r},p.ZERO=Object.freeze(new p(0,0,0)),p.prototype.clone=function(e){return p.clone(this,e)},p.prototype.equals=function(e){return p.equals(this,e)},p.prototype.equalsEpsilon=function(e,n){return p.equalsEpsilon(this,e,n)},p.prototype.toString=function(){return"("+this.longitude+", "+this.latitude+", "+this.height+")"},Object.defineProperties(M.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),M.clone=function(e,n){if(t.defined(e)){var r=e._radii;return t.defined(n)?(i.clone(r,n._radii),i.clone(e._radiiSquared,n._radiiSquared),i.clone(e._radiiToTheFourth,n._radiiToTheFourth),i.clone(e._oneOverRadii,n._oneOverRadii),i.clone(e._oneOverRadiiSquared,n._oneOverRadiiSquared),n._minimumRadius=e._minimumRadius,n._maximumRadius=e._maximumRadius,n._centerToleranceSquared=e._centerToleranceSquared,n):new M(r.x,r.y,r.z)}},M.fromCartesian3=function(e,n){return t.defined(n)||(n=new M),t.defined(e)?(q(n,e.x,e.y,e.z),n):n},M.WGS84=Object.freeze(new M(6378137,6378137,6356752.314245179)),M.UNIT_SPHERE=Object.freeze(new M(1,1,1)),M.MOON=Object.freeze(new M(r.CesiumMath.LUNAR_RADIUS,r.CesiumMath.LUNAR_RADIUS,r.CesiumMath.LUNAR_RADIUS)),M.prototype.clone=function(e){return M.clone(this,e)},M.packedLength=i.packedLength,M.pack=function(e,n,r){return r=t.defaultValue(r,0),i.pack(e._radii,n,r),n},M.unpack=function(e,n,r){n=t.defaultValue(n,0);var a=i.unpack(e,n);return M.fromCartesian3(a,r)},M.prototype.geocentricSurfaceNormal=i.normalize,M.prototype.geodeticSurfaceNormalCartographic=function(e,n){var r=e.longitude,a=e.latitude,u=Math.cos(a),o=u*Math.cos(r),d=u*Math.sin(r),c=Math.sin(a);return t.defined(n)||(n=new i),n.x=o,n.y=d,n.z=c,i.normalize(n,n)},M.prototype.geodeticSurfaceNormal=function(e,n){if(!i.equalsEpsilon(e,i.ZERO,r.CesiumMath.EPSILON14))return t.defined(n)||(n=new i),n=i.multiplyComponents(e,this._oneOverRadiiSquared,n),i.normalize(n,n)};var _=new i,C=new i;M.prototype.cartographicToCartesian=function(e,n){var r=_,a=C;this.geodeticSurfaceNormalCartographic(e,r),i.multiplyComponents(this._radiiSquared,r,a);var u=Math.sqrt(i.dot(r,a));return i.divideByScalar(a,u,a),i.multiplyByScalar(r,e.height,r),t.defined(n)||(n=new i),i.add(a,r,n)},M.prototype.cartographicArrayToCartesianArray=function(e,n){var r=e.length;t.defined(n)?n.length=r:n=new Array(r);for(var i=0;i<r;i++)n[i]=this.cartographicToCartesian(e[i],n[i]);return n};var R=new i,O=new i,T=new i;M.prototype.cartesianToCartographic=function(e,n){var a=this.scaleToGeodeticSurface(e,O);if(t.defined(a)){var u=this.geodeticSurfaceNormal(a,R),o=i.subtract(e,a,T),d=Math.atan2(u.y,u.x),c=Math.asin(u.z),f=r.CesiumMath.sign(i.dot(o,e))*i.magnitude(o);return t.defined(n)?(n.longitude=d,n.latitude=c,n.height=f,n):new p(d,c,f)}},M.prototype.cartesianArrayToCartographicArray=function(e,n){var r=e.length;t.defined(n)?n.length=r:n=new Array(r);for(var i=0;i<r;++i)n[i]=this.cartesianToCartographic(e[i],n[i]);return n},M.prototype.scaleToGeodeticSurface=function(e,n){return m(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,n)},M.prototype.scaleToGeocentricSurface=function(e,n){t.defined(n)||(n=new i);var r=e.x,a=e.y,u=e.z,o=this._oneOverRadiiSquared,d=1/Math.sqrt(r*r*o.x+a*a*o.y+u*u*o.z);return i.multiplyByScalar(e,d,n)},M.prototype.transformPositionToScaledSpace=function(e,n){return t.defined(n)||(n=new i),i.multiplyComponents(e,this._oneOverRadii,n)},M.prototype.transformPositionFromScaledSpace=function(e,n){return t.defined(n)||(n=new i),i.multiplyComponents(e,this._radii,n)},M.prototype.equals=function(e){return this===e||t.defined(e)&&i.equals(this._radii,e._radii)},M.prototype.toString=function(){return this._radii.toString()},M.prototype.getSurfaceNormalIntersectionWithZAxis=function(e,n,r){n=t.defaultValue(n,0);var a=this._squaredXOverSquaredZ;if(t.defined(r)||(r=new i),r.x=0,r.y=0,r.z=e.z*(1-a),!(Math.abs(r.z)>=this._radii.z-n))return r};var A=[.14887433898163,.43339539412925,.67940956829902,.86506336668898,.97390652851717,0],b=[.29552422471475,.26926671930999,.21908636251598,.14945134915058,.066671344308684,0];function E(e,n,t){for(var r=.5*(n+e),i=.5*(n-e),a=0,u=0;u<5;u++){var o=i*A[u];a+=b[u]*(t(r+o)+t(r-o))}return a*=i}function N(e,n){this.x=t.defaultValue(e,0),this.y=t.defaultValue(n,0)}M.prototype.surfaceArea=function(e){for(var n=e.west,t=e.east,i=e.south,a=e.north;t<n;)t+=r.CesiumMath.TWO_PI;var u=this._radiiSquared,o=u.x,d=u.y,c=u.z,f=o*d;return E(i,a,(function(e){var r=Math.cos(e),i=Math.sin(e);return Math.cos(e)*E(n,t,(function(e){var n=Math.cos(e),t=Math.sin(e);return Math.sqrt(f*i*i+c*(d*n*n+o*t*t)*r*r)}))}))},N.fromElements=function(e,n,r){return t.defined(r)?(r.x=e,r.y=n,r):new N(e,n)},N.clone=function(e,n){if(t.defined(e))return t.defined(n)?(n.x=e.x,n.y=e.y,n):new N(e.x,e.y)},N.fromCartesian3=N.clone,N.fromCartesian4=N.clone,N.packedLength=2,N.pack=function(e,n,r){return r=t.defaultValue(r,0),n[r++]=e.x,n[r]=e.y,n},N.unpack=function(e,n,r){return n=t.defaultValue(n,0),t.defined(r)||(r=new N),r.x=e[n++],r.y=e[n],r},N.packArray=function(e,r){var i=e.length,a=2*i;if(t.defined(r)){if(!Array.isArray(r)&&r.length!==a)throw new n.DeveloperError("If result is a typed array, it must have exactly array.length * 2 elements");r.length!==a&&(r.length=a)}else r=new Array(a);for(var u=0;u<i;++u)N.pack(e[u],r,2*u);return r},N.unpackArray=function(e,n){var r=e.length;t.defined(n)?n.length=r/2:n=new Array(r/2);for(var i=0;i<r;i+=2){var a=i/2;n[a]=N.unpack(e,i,n[a])}return n},N.fromArray=N.unpack,N.maximumComponent=function(e){return Math.max(e.x,e.y)},N.minimumComponent=function(e){return Math.min(e.x,e.y)},N.minimumByComponent=function(e,n,t){return t.x=Math.min(e.x,n.x),t.y=Math.min(e.y,n.y),t},N.maximumByComponent=function(e,n,t){return t.x=Math.max(e.x,n.x),t.y=Math.max(e.y,n.y),t},N.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},N.magnitude=function(e){return Math.sqrt(N.magnitudeSquared(e))};var k=new N;N.distance=function(e,n){return N.subtract(e,n,k),N.magnitude(k)},N.distanceSquared=function(e,n){return N.subtract(e,n,k),N.magnitudeSquared(k)},N.normalize=function(e,n){var t=N.magnitude(e);return n.x=e.x/t,n.y=e.y/t,n},N.dot=function(e,n){return e.x*n.x+e.y*n.y},N.cross=function(e,n){return e.x*n.y-e.y*n.x},N.multiplyComponents=function(e,n,t){return t.x=e.x*n.x,t.y=e.y*n.y,t},N.divideComponents=function(e,n,t){return t.x=e.x/n.x,t.y=e.y/n.y,t},N.add=function(e,n,t){return t.x=e.x+n.x,t.y=e.y+n.y,t},N.subtract=function(e,n,t){return t.x=e.x-n.x,t.y=e.y-n.y,t},N.multiplyByScalar=function(e,n,t){return t.x=e.x*n,t.y=e.y*n,t},N.divideByScalar=function(e,n,t){return t.x=e.x/n,t.y=e.y/n,t},N.negate=function(e,n){return n.x=-e.x,n.y=-e.y,n},N.abs=function(e,n){return n.x=Math.abs(e.x),n.y=Math.abs(e.y),n};var V=new N;N.lerp=function(e,n,t,r){return N.multiplyByScalar(n,t,V),r=N.multiplyByScalar(e,1-t,r),N.add(V,r,r)};var I=new N,B=new N;N.angleBetween=function(e,n){return N.normalize(e,I),N.normalize(n,B),r.CesiumMath.acosClamped(N.dot(I,B))};var U=new N;N.mostOrthogonalAxis=function(e,n){var t=N.normalize(e,U);return N.abs(t,t),n=t.x<=t.y?N.clone(N.UNIT_X,n):N.clone(N.UNIT_Y,n)},N.equals=function(e,n){return e===n||t.defined(e)&&t.defined(n)&&e.x===n.x&&e.y===n.y},N.equalsArray=function(e,n,t){return e.x===n[t]&&e.y===n[t+1]},N.equalsEpsilon=function(e,n,i,a){return e===n||t.defined(e)&&t.defined(n)&&r.CesiumMath.equalsEpsilon(e.x,n.x,i,a)&&r.CesiumMath.equalsEpsilon(e.y,n.y,i,a)},N.ZERO=Object.freeze(new N(0,0)),N.ONE=Object.freeze(new N(1,1)),N.UNIT_X=Object.freeze(new N(1,0)),N.UNIT_Y=Object.freeze(new N(0,1)),N.prototype.clone=function(e){return N.clone(this,e)},N.prototype.equals=function(e){return N.equals(this,e)},N.prototype.equalsEpsilon=function(e,n,t){return N.equalsEpsilon(this,e,n,t)},N.prototype.toString=function(){return"("+this.x+", "+this.y+")"},e.Cartesian2=N,e.Cartesian3=i,e.Cartographic=p,e.Ellipsoid=M}));

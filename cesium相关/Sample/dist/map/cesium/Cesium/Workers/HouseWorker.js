define(["./when-c2e8ef35","./Check-c4f3a3fc","./Math-d30358ed","./Cartesian2-f9492f23","./BoundingSphere-dcb1d5fc","./Transforms-8b7e0d39","./RuntimeError-6122571f","./Rectangle-3285eeb3","./WebGLConstants-4ae0db90","./ComponentDatatype-5d3f6452","./GeometryAttribute-a5c051b9","./GeometryAttributes-57608efc","./AttributeCompression-72a6590f","./GeometryPipeline-01c9df66","./EncodedCartesian3-4f87492e","./IndexDatatype-e3260434","./IntersectionTests-525ff5aa","./Plane-dbdf17bf","./PrimitivePipeline-918bdc06","./WebMercatorProjection-6d7fb40a","./createTaskProcessorWorker","./GeometryOffsetAttribute-e6e9672c","./VertexFormat-ad523db1","./GeometryInstance-b1e4a9ef","./arrayRemoveDuplicates-a580a060","./BoundingRectangle-f5c8097c","./EllipsoidTangentPlane-98a8a37e","./ArcType-29cf2197","./EllipsoidRhumbLine-01c8204c","./PolygonPipeline-db004fe0","./PolygonGeometryLibrary-d78156f9","./EllipsoidGeodesic-c0017f17","./PolygonGeometry-3b595c9f","./PolygonOutlineGeometry-8930b722","./Color-73b261ab","./GetPrimitiveData","./PixelFormat-84ff236c","./GetRidingLanternGeometry","./HouseDrawer","./snappyJs"],(function(e,t,r,n,o,l,i,a,f,s,c,u,y,d,h,g,p,m,b,P,G,v,C,A,w,D,R,S,F,L,x,E,I,T,B,k,q,J,M,N){"use strict";let O,V=512,W="",_={};function j(e,t){for(var r=[],o=0;o<e.length;o++){var l=z(e[o],e[o+1],t),i=n.Cartesian3.fromDegrees(l[0],l[1],l[2]);r.push(i),o++}return r}function z(e,t,r){var n=H(r.west+r.width/V*e),o=H(r.north-r.height/V*t);return[n=Number(n.toFixed(6)),o=Number(o.toFixed(6))]}function H(e){return 180*e/Math.PI}function U(e,t){if(Array.isArray(t[0])){let r=t.length;for(let n=0;n<r;n++){U(e,t[n])}}else e.push(t)}function K(e,t){if("F"!=e[0])if(Array.isArray(e[0])){let r=e.length;for(let n=0;n<r;n++){K(e[n],t)}}else t&&function(e){let t=[e[0],e[1]];for(let r=2;r<e.length;r++){let n=t[0]+e[r],o=t[1]+e[r+1];e[r]=n,e[r+1]=o,t=[n,o],r++}}(e);else e[0]=[.05*-V,.05*-V,1.05*V,.05*-V,1.05*V,1.05*V,.05*-V,1.05*V]}return G((function(e,t){if(1==e.init)return O=new Function("drawer","level",e.styleStr),V=e.tileSize,W=e.return_type,_=e,!0;var r,n=e.url,o=new l.Resource({url:n});return o.request.throttle=!1,o.request.throttleByServer=!0,o.request.type=1,!(r="stream_snappy"==W?o.fetchArrayBuffer():o.fetchJson())||r.then((function(r){if("stream_snappy"==W){r=N(r);let e=function(e){let t=[],r=0,n=0;for(;r<e.length;){let o=e[r++];if(o<128)t[n++]=o;else if(o>191&&o<224){let l=e[r++];t[n++]=(31&o)<<6|63&l}else if(o>239&&o<365){let l=((7&o)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536;t[n++]=55296+(l>>10),t[n++]=56320+(1023&l)}else{let l=e[r++],i=e[r++];t[n++]=(15&o)<<12|(63&l)<<6|63&i}}let o=[],l=0,i=0,a=0,f=5e4,s=t.length/f-1;for(l=0;l<s;l++)i=l*f,a=(l+1)*f,o.push(String.fromCharCode.apply({},t.slice(i,a)));return i=l*f,a=t.length,o.push(String.fromCharCode.apply({},t.slice(i,a))),o=o.join(""),o}(new Uint8Array(r));r=JSON.parse(e)}let n=function(e,t){if(e&&e.layer){(function(e,t){for(let r in e){let n=e[r].features;n||(n=e[r].datas);for(let e=0;e<n.length;e++)K(n[e][2],t)}})(e=e.layer,t.needDecode);let r={},n=new M([e],t.level,r,t.controlVector,t.highLightVector,t.filterLayerId);return O.call({},n,t.level),function(e){for(let t in e){let r=e[t];for(let e=0;e<r.length;e++){let t=r[e],n=[];U(n,t.data),delete t.data,t.geometrys=n}}}(r),function(e,t){for(let r in e){let n=e[r];for(let e=0;e<n.length;e++){let r=n[e];r.polygons=[];for(let e=0;e<r.geometrys.length;e++){let n=j(r.geometrys[e],t);r.polygons.push(n)}delete r.geometrys}}}(r,t.rectangle),r}return{}}(r,e);return k(n,e.level,_,t)}))}))}));

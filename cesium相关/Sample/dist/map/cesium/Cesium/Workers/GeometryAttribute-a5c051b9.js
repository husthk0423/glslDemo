define(["exports","./when-c2e8ef35","./Check-c4f3a3fc","./Cartesian2-f9492f23","./Transforms-8b7e0d39","./Rectangle-3285eeb3","./WebGLConstants-4ae0db90"],(function(e,t,n,r,a,i,u){"use strict";var o=Object.freeze({NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3});function s(e,n,r,a){this[0]=t.defaultValue(e,0),this[1]=t.defaultValue(r,0),this[2]=t.defaultValue(n,0),this[3]=t.defaultValue(a,0)}s.packedLength=4,s.pack=function(e,n,r){return r=t.defaultValue(r,0),n[r++]=e[0],n[r++]=e[1],n[r++]=e[2],n[r++]=e[3],n},s.unpack=function(e,n,r){return n=t.defaultValue(n,0),t.defined(r)||(r=new s),r[0]=e[n++],r[1]=e[n++],r[2]=e[n++],r[3]=e[n++],r},s.clone=function(e,n){if(t.defined(e))return t.defined(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n):new s(e[0],e[2],e[1],e[3])},s.fromArray=function(e,n,r){return n=t.defaultValue(n,0),t.defined(r)||(r=new s),r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r},s.fromColumnMajorArray=function(e,t){return s.clone(e,t)},s.fromRowMajorArray=function(e,n){return t.defined(n)?(n[0]=e[0],n[1]=e[2],n[2]=e[1],n[3]=e[3],n):new s(e[0],e[1],e[2],e[3])},s.fromScale=function(e,n){return t.defined(n)?(n[0]=e.x,n[1]=0,n[2]=0,n[3]=e.y,n):new s(e.x,0,0,e.y)},s.fromUniformScale=function(e,n){return t.defined(n)?(n[0]=e,n[1]=0,n[2]=0,n[3]=e,n):new s(e,0,0,e)},s.fromRotation=function(e,n){var r=Math.cos(e),a=Math.sin(e);return t.defined(n)?(n[0]=r,n[1]=a,n[2]=-a,n[3]=r,n):new s(r,-a,a,r)},s.toArray=function(e,n){return t.defined(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n):[e[0],e[1],e[2],e[3]]},s.getElementIndex=function(e,t){return 2*e+t},s.getColumn=function(e,t,n){var r=2*t,a=e[r],i=e[r+1];return n.x=a,n.y=i,n},s.setColumn=function(e,t,n,r){var a=2*t;return(r=s.clone(e,r))[a]=n.x,r[a+1]=n.y,r},s.getRow=function(e,t,n){var r=e[t],a=e[t+2];return n.x=r,n.y=a,n},s.setRow=function(e,t,n,r){return(r=s.clone(e,r))[t]=n.x,r[t+2]=n.y,r};var f=new r.Cartesian2;s.getScale=function(e,t){return t.x=r.Cartesian2.magnitude(r.Cartesian2.fromElements(e[0],e[1],f)),t.y=r.Cartesian2.magnitude(r.Cartesian2.fromElements(e[2],e[3],f)),t};var c=new r.Cartesian2;s.getMaximumScale=function(e){return s.getScale(e,c),r.Cartesian2.maximumComponent(c)},s.multiply=function(e,t,n){var r=e[0]*t[0]+e[2]*t[1],a=e[0]*t[2]+e[2]*t[3],i=e[1]*t[0]+e[3]*t[1],u=e[1]*t[2]+e[3]*t[3];return n[0]=r,n[1]=i,n[2]=a,n[3]=u,n},s.add=function(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n},s.subtract=function(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n},s.multiplyByVector=function(e,t,n){var r=e[0]*t.x+e[2]*t.y,a=e[1]*t.x+e[3]*t.y;return n.x=r,n.y=a,n},s.multiplyByScalar=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n},s.multiplyByScale=function(e,t,n){return n[0]=e[0]*t.x,n[1]=e[1]*t.x,n[2]=e[2]*t.y,n[3]=e[3]*t.y,n},s.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},s.transpose=function(e,t){var n=e[0],r=e[2],a=e[1],i=e[3];return t[0]=n,t[1]=r,t[2]=a,t[3]=i,t},s.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t},s.equals=function(e,n){return e===n||t.defined(e)&&t.defined(n)&&e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]},s.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]},s.equalsEpsilon=function(e,n,r){return e===n||t.defined(e)&&t.defined(n)&&Math.abs(e[0]-n[0])<=r&&Math.abs(e[1]-n[1])<=r&&Math.abs(e[2]-n[2])<=r&&Math.abs(e[3]-n[3])<=r},s.IDENTITY=Object.freeze(new s(1,0,0,1)),s.ZERO=Object.freeze(new s(0,0,0,0)),s.COLUMN0ROW0=0,s.COLUMN0ROW1=1,s.COLUMN1ROW0=2,s.COLUMN1ROW1=3,Object.defineProperties(s.prototype,{length:{get:function(){return s.packedLength}}}),s.prototype.clone=function(e){return s.clone(this,e)},s.prototype.equals=function(e){return s.equals(this,e)},s.prototype.equalsEpsilon=function(e,t){return s.equalsEpsilon(this,e,t)},s.prototype.toString=function(){return"("+this[0]+", "+this[2]+")\n("+this[1]+", "+this[3]+")"};var l={POINTS:u.WebGLConstants.POINTS,LINES:u.WebGLConstants.LINES,LINE_LOOP:u.WebGLConstants.LINE_LOOP,LINE_STRIP:u.WebGLConstants.LINE_STRIP,TRIANGLES:u.WebGLConstants.TRIANGLES,TRIANGLE_STRIP:u.WebGLConstants.TRIANGLE_STRIP,TRIANGLE_FAN:u.WebGLConstants.TRIANGLE_FAN,validate:function(e){return e===l.POINTS||e===l.LINES||e===l.LINE_LOOP||e===l.LINE_STRIP||e===l.TRIANGLES||e===l.TRIANGLE_STRIP||e===l.TRIANGLE_FAN}},d=Object.freeze(l);function y(e){e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT),this.attributes=e.attributes,this.indices=e.indices,this.primitiveType=t.defaultValue(e.primitiveType,d.TRIANGLES),this.boundingSphere=e.boundingSphere,this.geometryType=t.defaultValue(e.geometryType,o.NONE),this.boundingSphereCV=e.boundingSphereCV,this.offsetAttribute=e.offsetAttribute}y.computeNumberOfVertices=function(e){var n=-1;for(var r in e.attributes)if(e.attributes.hasOwnProperty(r)&&t.defined(e.attributes[r])&&t.defined(e.attributes[r].values)){var a=e.attributes[r];n=a.values.length/a.componentsPerAttribute}return n};var m=new r.Cartographic,p=new r.Cartesian3,h=new a.Matrix4,N=[new r.Cartographic,new r.Cartographic,new r.Cartographic],I=[new r.Cartesian2,new r.Cartesian2,new r.Cartesian2],C=[new r.Cartesian2,new r.Cartesian2,new r.Cartesian2],b=new r.Cartesian3,T=new a.Quaternion,E=new a.Matrix4,x=new s;y._textureCoordinateRotationPoints=function(e,t,n,u){var o,f=i.Rectangle.center(u,m),c=r.Cartographic.toCartesian(f,n,p),l=a.Transforms.eastNorthUpToFixedFrame(c,n,h),d=a.Matrix4.inverse(l,h),y=I,L=N;L[0].longitude=u.west,L[0].latitude=u.south,L[1].longitude=u.west,L[1].latitude=u.north,L[2].longitude=u.east,L[2].latitude=u.south;var w=b;for(o=0;o<3;o++)r.Cartographic.toCartesian(L[o],n,w),w=a.Matrix4.multiplyByPointAsVector(d,w,w),y[o].x=w.x,y[o].y=w.y;var g=a.Quaternion.fromAxisAngle(r.Cartesian3.UNIT_Z,-t,T),S=a.Matrix3.fromQuaternion(g,E),A=e.length,O=Number.POSITIVE_INFINITY,v=Number.POSITIVE_INFINITY,M=Number.NEGATIVE_INFINITY,R=Number.NEGATIVE_INFINITY;for(o=0;o<A;o++)w=a.Matrix4.multiplyByPointAsVector(d,e[o],w),w=a.Matrix3.multiplyByVector(S,w,w),O=Math.min(O,w.x),v=Math.min(v,w.y),M=Math.max(M,w.x),R=Math.max(R,w.y);var P=s.fromRotation(t,x),V=C;V[0].x=O,V[0].y=v,V[1].x=O,V[1].y=R,V[2].x=M,V[2].y=v;var G=y[0],_=y[2].x-G.x,W=y[1].y-G.y;for(o=0;o<3;o++){var B=V[o];s.multiplyByVector(P,B,B),B.x=(B.x-G.x)/_,B.y=(B.y-G.y)/W}var F=V[0],k=V[1],Y=V[2],j=new Array(6);return r.Cartesian2.pack(F,j),r.Cartesian2.pack(k,j,2),r.Cartesian2.pack(Y,j,4),j},e.Geometry=y,e.GeometryAttribute=function(e){e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT),this.componentDatatype=e.componentDatatype,this.componentsPerAttribute=e.componentsPerAttribute,this.normalize=t.defaultValue(e.normalize,!1),this.values=e.values},e.GeometryType=o,e.Matrix2=s,e.PrimitiveType=d}));

define(["exports","./when-c2e8ef35","./Check-c4f3a3fc","./Math-d30358ed","./Cartesian2-f9492f23","./RuntimeError-6122571f"],(function(e,t,n,r,a,i){"use strict";function o(e,n,r,a,i,o,s,u,l){this[0]=t.defaultValue(e,0),this[1]=t.defaultValue(a,0),this[2]=t.defaultValue(s,0),this[3]=t.defaultValue(n,0),this[4]=t.defaultValue(i,0),this[5]=t.defaultValue(u,0),this[6]=t.defaultValue(r,0),this[7]=t.defaultValue(o,0),this[8]=t.defaultValue(l,0)}o.packedLength=9,o.pack=function(e,n,r){return r=t.defaultValue(r,0),n[r++]=e[0],n[r++]=e[1],n[r++]=e[2],n[r++]=e[3],n[r++]=e[4],n[r++]=e[5],n[r++]=e[6],n[r++]=e[7],n[r++]=e[8],n},o.unpack=function(e,n,r){return n=t.defaultValue(n,0),t.defined(r)||(r=new o),r[0]=e[n++],r[1]=e[n++],r[2]=e[n++],r[3]=e[n++],r[4]=e[n++],r[5]=e[n++],r[6]=e[n++],r[7]=e[n++],r[8]=e[n++],r},o.clone=function(e,n){if(t.defined(e))return t.defined(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n):new o(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])},o.fromArray=function(e,n,r){return n=t.defaultValue(n,0),t.defined(r)||(r=new o),r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],r[8]=e[n+8],r},o.fromColumnMajorArray=function(e,t){return o.clone(e,t)},o.fromRowMajorArray=function(e,n){return t.defined(n)?(n[0]=e[0],n[1]=e[3],n[2]=e[6],n[3]=e[1],n[4]=e[4],n[5]=e[7],n[6]=e[2],n[7]=e[5],n[8]=e[8],n):new o(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},o.fromQuaternion=function(e,n){var r=e.x*e.x,a=e.x*e.y,i=e.x*e.z,s=e.x*e.w,u=e.y*e.y,l=e.y*e.z,f=e.y*e.w,c=e.z*e.z,d=e.z*e.w,h=e.w*e.w,p=r-u-c+h,m=2*(a-d),y=2*(i+f),v=2*(a+d),w=-r+u-c+h,g=2*(l-s),C=2*(i-f),x=2*(l+s),E=-r-u+c+h;return t.defined(n)?(n[0]=p,n[1]=v,n[2]=C,n[3]=m,n[4]=w,n[5]=x,n[6]=y,n[7]=g,n[8]=E,n):new o(p,m,y,v,w,g,C,x,E)},o.fromHeadingPitchRoll=function(e,n){var r=Math.cos(-e.pitch),a=Math.cos(-e.heading),i=Math.cos(e.roll),s=Math.sin(-e.pitch),u=Math.sin(-e.heading),l=Math.sin(e.roll),f=r*a,c=-i*u+l*s*a,d=l*u+i*s*a,h=r*u,p=i*a+l*s*u,m=-l*a+i*s*u,y=-s,v=l*r,w=i*r;return t.defined(n)?(n[0]=f,n[1]=h,n[2]=y,n[3]=c,n[4]=p,n[5]=v,n[6]=d,n[7]=m,n[8]=w,n):new o(f,c,d,h,p,m,y,v,w)},o.fromScale=function(e,n){return t.defined(n)?(n[0]=e.x,n[1]=0,n[2]=0,n[3]=0,n[4]=e.y,n[5]=0,n[6]=0,n[7]=0,n[8]=e.z,n):new o(e.x,0,0,0,e.y,0,0,0,e.z)},o.fromUniformScale=function(e,n){return t.defined(n)?(n[0]=e,n[1]=0,n[2]=0,n[3]=0,n[4]=e,n[5]=0,n[6]=0,n[7]=0,n[8]=e,n):new o(e,0,0,0,e,0,0,0,e)},o.fromCrossProduct=function(e,n){return t.defined(n)?(n[0]=0,n[1]=e.z,n[2]=-e.y,n[3]=-e.z,n[4]=0,n[5]=e.x,n[6]=e.y,n[7]=-e.x,n[8]=0,n):new o(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)},o.fromRotationX=function(e,n){var r=Math.cos(e),a=Math.sin(e);return t.defined(n)?(n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=r,n[5]=a,n[6]=0,n[7]=-a,n[8]=r,n):new o(1,0,0,0,r,-a,0,a,r)},o.fromRotationY=function(e,n){var r=Math.cos(e),a=Math.sin(e);return t.defined(n)?(n[0]=r,n[1]=0,n[2]=-a,n[3]=0,n[4]=1,n[5]=0,n[6]=a,n[7]=0,n[8]=r,n):new o(r,0,a,0,1,0,-a,0,r)},o.fromRotationZ=function(e,n){var r=Math.cos(e),a=Math.sin(e);return t.defined(n)?(n[0]=r,n[1]=a,n[2]=0,n[3]=-a,n[4]=r,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n):new o(r,-a,0,a,r,0,0,0,1)},o.toArray=function(e,n){return t.defined(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},o.getElementIndex=function(e,t){return 3*e+t},o.getColumn=function(e,t,n){var r=3*t,a=e[r],i=e[r+1],o=e[r+2];return n.x=a,n.y=i,n.z=o,n},o.setColumn=function(e,t,n,r){var a=3*t;return(r=o.clone(e,r))[a]=n.x,r[a+1]=n.y,r[a+2]=n.z,r},o.getRow=function(e,t,n){var r=e[t],a=e[t+3],i=e[t+6];return n.x=r,n.y=a,n.z=i,n},o.setRow=function(e,t,n,r){return(r=o.clone(e,r))[t]=n.x,r[t+3]=n.y,r[t+6]=n.z,r};var s=new a.Cartesian3;o.getScale=function(e,t){return t.x=a.Cartesian3.magnitude(a.Cartesian3.fromElements(e[0],e[1],e[2],s)),t.y=a.Cartesian3.magnitude(a.Cartesian3.fromElements(e[3],e[4],e[5],s)),t.z=a.Cartesian3.magnitude(a.Cartesian3.fromElements(e[6],e[7],e[8],s)),t};var u=new a.Cartesian3;o.getMaximumScale=function(e){return o.getScale(e,u),a.Cartesian3.maximumComponent(u)},o.multiply=function(e,t,n){var r=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],a=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],i=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],o=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],s=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],u=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],l=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],f=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],c=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return n[0]=r,n[1]=a,n[2]=i,n[3]=o,n[4]=s,n[5]=u,n[6]=l,n[7]=f,n[8]=c,n},o.add=function(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n},o.subtract=function(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n},o.multiplyByVector=function(e,t,n){var r=t.x,a=t.y,i=t.z,o=e[0]*r+e[3]*a+e[6]*i,s=e[1]*r+e[4]*a+e[7]*i,u=e[2]*r+e[5]*a+e[8]*i;return n.x=o,n.y=s,n.z=u,n},o.multiplyByScalar=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n},o.multiplyByScale=function(e,t,n){return n[0]=e[0]*t.x,n[1]=e[1]*t.x,n[2]=e[2]*t.x,n[3]=e[3]*t.y,n[4]=e[4]*t.y,n[5]=e[5]*t.y,n[6]=e[6]*t.z,n[7]=e[7]*t.z,n[8]=e[8]*t.z,n},o.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t},o.transpose=function(e,t){var n=e[0],r=e[3],a=e[6],i=e[1],o=e[4],s=e[7],u=e[2],l=e[5],f=e[8];return t[0]=n,t[1]=r,t[2]=a,t[3]=i,t[4]=o,t[5]=s,t[6]=u,t[7]=l,t[8]=f,t};var l=new a.Cartesian3(1,1,1);o.getRotation=function(e,t){var n=a.Cartesian3.divideComponents(l,o.getScale(e,u),u);return t=o.multiplyByScale(e,n,t)};var f=[1,0,0],c=[2,2,1];function d(e){for(var t=0,n=0;n<3;++n){var r=e[o.getElementIndex(c[n],f[n])];t+=2*r*r}return Math.sqrt(t)}function h(e,t){for(var n=r.CesiumMath.EPSILON15,a=0,i=1,s=0;s<3;++s){var u=Math.abs(e[o.getElementIndex(c[s],f[s])]);u>a&&(i=s,a=u)}var l=1,d=0,h=f[i],p=c[i];if(Math.abs(e[o.getElementIndex(p,h)])>n){var m,y=(e[o.getElementIndex(p,p)]-e[o.getElementIndex(h,h)])/2/e[o.getElementIndex(p,h)];d=(m=y<0?-1/(-y+Math.sqrt(1+y*y)):1/(y+Math.sqrt(1+y*y)))*(l=1/Math.sqrt(1+m*m))}return(t=o.clone(o.IDENTITY,t))[o.getElementIndex(h,h)]=t[o.getElementIndex(p,p)]=l,t[o.getElementIndex(p,h)]=d,t[o.getElementIndex(h,p)]=-d,t}var p=new o,m=new o;function y(e,n,r,a){this.x=t.defaultValue(e,0),this.y=t.defaultValue(n,0),this.z=t.defaultValue(r,0),this.w=t.defaultValue(a,0)}o.computeEigenDecomposition=function(e,n){var a=r.CesiumMath.EPSILON20,i=0,s=0;t.defined(n)||(n={});for(var u=n.unitary=o.clone(o.IDENTITY,n.unitary),l=n.diagonal=o.clone(e,n.diagonal),f=a*function(e){for(var t=0,n=0;n<9;++n){var r=e[n];t+=r*r}return Math.sqrt(t)}(l);s<10&&d(l)>f;)h(l,p),o.transpose(p,m),o.multiply(l,p,l),o.multiply(m,l,l),o.multiply(u,p,u),++i>2&&(++s,i=0);return n},o.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t},o.determinant=function(e){var t=e[0],n=e[3],r=e[6],a=e[1],i=e[4],o=e[7],s=e[2],u=e[5],l=e[8];return t*(i*l-u*o)+a*(u*r-n*l)+s*(n*o-i*r)},o.inverse=function(e,t){var n=e[0],r=e[1],a=e[2],i=e[3],s=e[4],u=e[5],l=e[6],f=e[7],c=e[8],d=o.determinant(e);t[0]=s*c-f*u,t[1]=f*a-r*c,t[2]=r*u-s*a,t[3]=l*u-i*c,t[4]=n*c-l*a,t[5]=i*a-n*u,t[6]=i*f-l*s,t[7]=l*r-n*f,t[8]=n*s-i*r;var h=1/d;return o.multiplyByScalar(t,h,t)},o.equals=function(e,n){return e===n||t.defined(e)&&t.defined(n)&&e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]&&e[4]===n[4]&&e[5]===n[5]&&e[6]===n[6]&&e[7]===n[7]&&e[8]===n[8]},o.equalsEpsilon=function(e,n,r){return e===n||t.defined(e)&&t.defined(n)&&Math.abs(e[0]-n[0])<=r&&Math.abs(e[1]-n[1])<=r&&Math.abs(e[2]-n[2])<=r&&Math.abs(e[3]-n[3])<=r&&Math.abs(e[4]-n[4])<=r&&Math.abs(e[5]-n[5])<=r&&Math.abs(e[6]-n[6])<=r&&Math.abs(e[7]-n[7])<=r&&Math.abs(e[8]-n[8])<=r},o.IDENTITY=Object.freeze(new o(1,0,0,0,1,0,0,0,1)),o.ZERO=Object.freeze(new o(0,0,0,0,0,0,0,0,0)),o.COLUMN0ROW0=0,o.COLUMN0ROW1=1,o.COLUMN0ROW2=2,o.COLUMN1ROW0=3,o.COLUMN1ROW1=4,o.COLUMN1ROW2=5,o.COLUMN2ROW0=6,o.COLUMN2ROW1=7,o.COLUMN2ROW2=8,Object.defineProperties(o.prototype,{length:{get:function(){return o.packedLength}}}),o.prototype.clone=function(e){return o.clone(this,e)},o.prototype.equals=function(e){return o.equals(this,e)},o.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]&&e[4]===t[n+4]&&e[5]===t[n+5]&&e[6]===t[n+6]&&e[7]===t[n+7]&&e[8]===t[n+8]},o.prototype.equalsEpsilon=function(e,t){return o.equalsEpsilon(this,e,t)},o.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n("+this[1]+", "+this[4]+", "+this[7]+")\n("+this[2]+", "+this[5]+", "+this[8]+")"},y.fromElements=function(e,n,r,a,i){return t.defined(i)?(i.x=e,i.y=n,i.z=r,i.w=a,i):new y(e,n,r,a)},y.fromColor=function(e,n){return t.defined(n)?(n.x=e.red,n.y=e.green,n.z=e.blue,n.w=e.alpha,n):new y(e.red,e.green,e.blue,e.alpha)},y.clone=function(e,n){if(t.defined(e))return t.defined(n)?(n.x=e.x,n.y=e.y,n.z=e.z,n.w=e.w,n):new y(e.x,e.y,e.z,e.w)},y.packedLength=4,y.pack=function(e,n,r){return r=t.defaultValue(r,0),n[r++]=e.x,n[r++]=e.y,n[r++]=e.z,n[r]=e.w,n},y.unpack=function(e,n,r){return n=t.defaultValue(n,0),t.defined(r)||(r=new y),r.x=e[n++],r.y=e[n++],r.z=e[n++],r.w=e[n],r},y.packArray=function(e,r){var a=e.length,i=4*a;if(t.defined(r)){if(!Array.isArray(r)&&r.length!==i)throw new n.DeveloperError("If result is a typed array, it must have exactly array.length * 4 elements");r.length!==i&&(r.length=i)}else r=new Array(i);for(var o=0;o<a;++o)y.pack(e[o],r,4*o);return r},y.unpackArray=function(e,n){var r=e.length;t.defined(n)?n.length=r/4:n=new Array(r/4);for(var a=0;a<r;a+=4){var i=a/4;n[i]=y.unpack(e,a,n[i])}return n},y.fromArray=y.unpack,y.maximumComponent=function(e){return Math.max(e.x,e.y,e.z,e.w)},y.minimumComponent=function(e){return Math.min(e.x,e.y,e.z,e.w)},y.minimumByComponent=function(e,t,n){return n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n.z=Math.min(e.z,t.z),n.w=Math.min(e.w,t.w),n},y.maximumByComponent=function(e,t,n){return n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n.z=Math.max(e.z,t.z),n.w=Math.max(e.w,t.w),n},y.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},y.magnitude=function(e){return Math.sqrt(y.magnitudeSquared(e))};var v=new y;y.distance=function(e,t){return y.subtract(e,t,v),y.magnitude(v)},y.distanceSquared=function(e,t){return y.subtract(e,t,v),y.magnitudeSquared(v)},y.normalize=function(e,t){var n=y.magnitude(e);return t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,t.w=e.w/n,t},y.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},y.multiplyComponents=function(e,t,n){return n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z,n.w=e.w*t.w,n},y.divideComponents=function(e,t,n){return n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z,n.w=e.w/t.w,n},y.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n},y.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n},y.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n},y.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n},y.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},y.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t.w=Math.abs(e.w),t};var w=new y;y.lerp=function(e,t,n,r){return y.multiplyByScalar(t,n,w),r=y.multiplyByScalar(e,1-n,r),y.add(w,r,r)};var g=new y;y.mostOrthogonalAxis=function(e,t){var n=y.normalize(e,g);return y.abs(n,n),t=n.x<=n.y?n.x<=n.z?n.x<=n.w?y.clone(y.UNIT_X,t):y.clone(y.UNIT_W,t):n.z<=n.w?y.clone(y.UNIT_Z,t):y.clone(y.UNIT_W,t):n.y<=n.z?n.y<=n.w?y.clone(y.UNIT_Y,t):y.clone(y.UNIT_W,t):n.z<=n.w?y.clone(y.UNIT_Z,t):y.clone(y.UNIT_W,t)},y.equals=function(e,n){return e===n||t.defined(e)&&t.defined(n)&&e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w},y.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]&&e.z===t[n+2]&&e.w===t[n+3]},y.equalsEpsilon=function(e,n,a,i){return e===n||t.defined(e)&&t.defined(n)&&r.CesiumMath.equalsEpsilon(e.x,n.x,a,i)&&r.CesiumMath.equalsEpsilon(e.y,n.y,a,i)&&r.CesiumMath.equalsEpsilon(e.z,n.z,a,i)&&r.CesiumMath.equalsEpsilon(e.w,n.w,a,i)},y.ZERO=Object.freeze(new y(0,0,0,0)),y.UNIT_X=Object.freeze(new y(1,0,0,0)),y.UNIT_Y=Object.freeze(new y(0,1,0,0)),y.UNIT_Z=Object.freeze(new y(0,0,1,0)),y.UNIT_W=Object.freeze(new y(0,0,0,1)),y.prototype.clone=function(e){return y.clone(this,e)},y.prototype.equals=function(e){return y.equals(this,e)},y.prototype.equalsEpsilon=function(e,t,n){return y.equalsEpsilon(this,e,t,n)},y.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var C=new Float32Array(1),x=256;function E(e,n,r,a,i,o,s,u,l,f,c,d,h,p,m,y){this[0]=t.defaultValue(e,0),this[1]=t.defaultValue(i,0),this[2]=t.defaultValue(l,0),this[3]=t.defaultValue(h,0),this[4]=t.defaultValue(n,0),this[5]=t.defaultValue(o,0),this[6]=t.defaultValue(f,0),this[7]=t.defaultValue(p,0),this[8]=t.defaultValue(r,0),this[9]=t.defaultValue(s,0),this[10]=t.defaultValue(c,0),this[11]=t.defaultValue(m,0),this[12]=t.defaultValue(a,0),this[13]=t.defaultValue(u,0),this[14]=t.defaultValue(d,0),this[15]=t.defaultValue(y,0)}y.packFloat=function(e,n){if(t.defined(n)||(n=new y),C[0]=e,0===(e=C[0]))return y.clone(y.ZERO,n);var a,i=e<0?1:0;isFinite(e)?(e=Math.abs(e),a=Math.floor(r.CesiumMath.logBase(e,10))+1,e/=Math.pow(10,a)):(e=.1,a=38);var o=e*x;return n.x=Math.floor(o),o=(o-n.x)*x,n.y=Math.floor(o),o=(o-n.y)*x,n.z=Math.floor(o),n.w=2*(a+38)+i,n},y.unpackFloat=function(e){var t=e.w/2,n=Math.floor(t),r=2*(t-n);if(r=-(r=2*r-1),(n-=38)>=38)return r<0?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY;var a=r*e.x*.00390625;return a+=r*e.y*152587890625e-16,(a+=r*e.z*5.960464477539063e-8)*Math.pow(10,n)},E.packedLength=16,E.pack=function(e,n,r){return r=t.defaultValue(r,0),n[r++]=e[0],n[r++]=e[1],n[r++]=e[2],n[r++]=e[3],n[r++]=e[4],n[r++]=e[5],n[r++]=e[6],n[r++]=e[7],n[r++]=e[8],n[r++]=e[9],n[r++]=e[10],n[r++]=e[11],n[r++]=e[12],n[r++]=e[13],n[r++]=e[14],n[r]=e[15],n},E.unpack=function(e,n,r){return n=t.defaultValue(n,0),t.defined(r)||(r=new E),r[0]=e[n++],r[1]=e[n++],r[2]=e[n++],r[3]=e[n++],r[4]=e[n++],r[5]=e[n++],r[6]=e[n++],r[7]=e[n++],r[8]=e[n++],r[9]=e[n++],r[10]=e[n++],r[11]=e[n++],r[12]=e[n++],r[13]=e[n++],r[14]=e[n++],r[15]=e[n],r},E.clone=function(e,n){if(t.defined(e))return t.defined(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n):new E(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},E.fromArray=E.unpack,E.fromColumnMajorArray=function(e,t){return E.clone(e,t)},E.fromRowMajorArray=function(e,n){return t.defined(n)?(n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15],n):new E(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},E.fromRotationTranslation=function(e,n,r){return n=t.defaultValue(n,a.Cartesian3.ZERO),t.defined(r)?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=0,r[4]=e[3],r[5]=e[4],r[6]=e[5],r[7]=0,r[8]=e[6],r[9]=e[7],r[10]=e[8],r[11]=0,r[12]=n.x,r[13]=n.y,r[14]=n.z,r[15]=1,r):new E(e[0],e[3],e[6],n.x,e[1],e[4],e[7],n.y,e[2],e[5],e[8],n.z,0,0,0,1)},E.fromTranslationQuaternionRotationScale=function(e,n,r,a){t.defined(a)||(a=new E);var i=r.x,o=r.y,s=r.z,u=n.x*n.x,l=n.x*n.y,f=n.x*n.z,c=n.x*n.w,d=n.y*n.y,h=n.y*n.z,p=n.y*n.w,m=n.z*n.z,y=n.z*n.w,v=n.w*n.w,w=u-d-m+v,g=2*(l-y),C=2*(f+p),x=2*(l+y),_=-u+d-m+v,O=2*(h-c),M=2*(f-p),b=2*(h+c),S=-u-d+m+v;return a[0]=w*i,a[1]=x*i,a[2]=M*i,a[3]=0,a[4]=g*o,a[5]=_*o,a[6]=b*o,a[7]=0,a[8]=C*s,a[9]=O*s,a[10]=S*s,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,a},E.fromTranslationRotationScale=function(e,t){return E.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)},E.fromTranslation=function(e,t){return E.fromRotationTranslation(o.IDENTITY,e,t)},E.fromScale=function(e,n){return t.defined(n)?(n[0]=e.x,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=e.y,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=e.z,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n):new E(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},E.fromUniformScale=function(e,n){return t.defined(n)?(n[0]=e,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=e,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=e,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n):new E(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)};var _=new a.Cartesian3,O=new a.Cartesian3,M=new a.Cartesian3;E.fromCamera=function(e,n){var r=e.position,i=e.direction,o=e.up;a.Cartesian3.normalize(i,_),a.Cartesian3.normalize(a.Cartesian3.cross(_,o,O),O),a.Cartesian3.normalize(a.Cartesian3.cross(O,_,M),M);var s=O.x,u=O.y,l=O.z,f=_.x,c=_.y,d=_.z,h=M.x,p=M.y,m=M.z,y=r.x,v=r.y,w=r.z,g=s*-y+u*-v+l*-w,C=h*-y+p*-v+m*-w,x=f*y+c*v+d*w;return t.defined(n)?(n[0]=s,n[1]=h,n[2]=-f,n[3]=0,n[4]=u,n[5]=p,n[6]=-c,n[7]=0,n[8]=l,n[9]=m,n[10]=-d,n[11]=0,n[12]=g,n[13]=C,n[14]=x,n[15]=1,n):new E(s,u,l,g,h,p,m,C,-f,-c,-d,x,0,0,0,1)},E.computePerspectiveFieldOfView=function(e,t,n,r,a){var i=1/Math.tan(.5*e),o=i/t,s=(r+n)/(n-r),u=2*r*n/(n-r);return a[0]=o,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=s,a[11]=-1,a[12]=0,a[13]=0,a[14]=u,a[15]=0,a},E.computeOrthographicOffCenter=function(e,t,n,r,a,i,o){var s=1/(t-e),u=1/(r-n),l=1/(i-a),f=-(t+e)*s,c=-(r+n)*u,d=-(i+a)*l;return s*=2,u*=2,l*=-2,o[0]=s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=u,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=l,o[11]=0,o[12]=f,o[13]=c,o[14]=d,o[15]=1,o},E.computePerspectiveOffCenter=function(e,t,n,r,a,i,o){var s=2*a/(t-e),u=2*a/(r-n),l=(t+e)/(t-e),f=(r+n)/(r-n),c=-(i+a)/(i-a),d=-2*i*a/(i-a);return o[0]=s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=u,o[6]=0,o[7]=0,o[8]=l,o[9]=f,o[10]=c,o[11]=-1,o[12]=0,o[13]=0,o[14]=d,o[15]=0,o},E.computeInfinitePerspectiveOffCenter=function(e,t,n,r,a,i){var o=2*a/(t-e),s=2*a/(r-n),u=(t+e)/(t-e),l=(r+n)/(r-n),f=-2*a;return i[0]=o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=s,i[6]=0,i[7]=0,i[8]=u,i[9]=l,i[10]=-1,i[11]=-1,i[12]=0,i[13]=0,i[14]=f,i[15]=0,i},E.computeViewportTransformation=function(e,n,r,a){e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT);var i=t.defaultValue(e.x,0),o=t.defaultValue(e.y,0),s=t.defaultValue(e.width,0),u=t.defaultValue(e.height,0);n=t.defaultValue(n,0);var l=.5*s,f=.5*u,c=.5*((r=t.defaultValue(r,1))-n),d=l,h=f,p=c,m=i+l,y=o+f,v=n+c;return a[0]=d,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=h,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=p,a[11]=0,a[12]=m,a[13]=y,a[14]=v,a[15]=1,a},E.computeView=function(e,t,n,r,i){return i[0]=r.x,i[1]=n.x,i[2]=-t.x,i[3]=0,i[4]=r.y,i[5]=n.y,i[6]=-t.y,i[7]=0,i[8]=r.z,i[9]=n.z,i[10]=-t.z,i[11]=0,i[12]=-a.Cartesian3.dot(r,e),i[13]=-a.Cartesian3.dot(n,e),i[14]=a.Cartesian3.dot(t,e),i[15]=1,i},E.toArray=function(e,n){return t.defined(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},E.getElementIndex=function(e,t){return 4*e+t},E.getColumn=function(e,t,n){var r=4*t,a=e[r],i=e[r+1],o=e[r+2],s=e[r+3];return n.x=a,n.y=i,n.z=o,n.w=s,n},E.setColumn=function(e,t,n,r){var a=4*t;return(r=E.clone(e,r))[a]=n.x,r[a+1]=n.y,r[a+2]=n.z,r[a+3]=n.w,r},E.setTranslation=function(e,t,n){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=e[15],n};var b=new a.Cartesian3;E.setScale=function(e,t,n){var r=E.getScale(e,b),i=a.Cartesian3.divideComponents(t,r,b);return E.multiplyByScale(e,i,n)},E.getRow=function(e,t,n){var r=e[t],a=e[t+4],i=e[t+8],o=e[t+12];return n.x=r,n.y=a,n.z=i,n.w=o,n},E.setRow=function(e,t,n,r){return(r=E.clone(e,r))[t]=n.x,r[t+4]=n.y,r[t+8]=n.z,r[t+12]=n.w,r};var S=new a.Cartesian3;E.getScale=function(e,t){return t.x=a.Cartesian3.magnitude(a.Cartesian3.fromElements(e[0],e[1],e[2],S)),t.y=a.Cartesian3.magnitude(a.Cartesian3.fromElements(e[4],e[5],e[6],S)),t.z=a.Cartesian3.magnitude(a.Cartesian3.fromElements(e[8],e[9],e[10],S)),t};var A=new a.Cartesian3;E.getMaximumScale=function(e){return E.getScale(e,A),a.Cartesian3.maximumComponent(A)},E.multiply=function(e,t,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],l=e[6],f=e[7],c=e[8],d=e[9],h=e[10],p=e[11],m=e[12],y=e[13],v=e[14],w=e[15],g=t[0],C=t[1],x=t[2],E=t[3],_=t[4],O=t[5],M=t[6],b=t[7],S=t[8],A=t[9],R=t[10],T=t[11],I=t[12],q=t[13],U=t[14],z=t[15],D=r*g+s*C+c*x+m*E,P=a*g+u*C+d*x+y*E,N=i*g+l*C+h*x+v*E,F=o*g+f*C+p*x+w*E,V=r*_+s*O+c*M+m*b,L=a*_+u*O+d*M+y*b,B=i*_+l*O+h*M+v*b,W=o*_+f*O+p*M+w*b,k=r*S+s*A+c*R+m*T,j=a*S+u*A+d*R+y*T,Y=i*S+l*A+h*R+v*T,X=o*S+f*A+p*R+w*T,J=r*I+s*q+c*U+m*z,H=a*I+u*q+d*U+y*z,Z=i*I+l*q+h*U+v*z,G=o*I+f*q+p*U+w*z;return n[0]=D,n[1]=P,n[2]=N,n[3]=F,n[4]=V,n[5]=L,n[6]=B,n[7]=W,n[8]=k,n[9]=j,n[10]=Y,n[11]=X,n[12]=J,n[13]=H,n[14]=Z,n[15]=G,n},E.add=function(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n[9]=e[9]+t[9],n[10]=e[10]+t[10],n[11]=e[11]+t[11],n[12]=e[12]+t[12],n[13]=e[13]+t[13],n[14]=e[14]+t[14],n[15]=e[15]+t[15],n},E.subtract=function(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n[9]=e[9]-t[9],n[10]=e[10]-t[10],n[11]=e[11]-t[11],n[12]=e[12]-t[12],n[13]=e[13]-t[13],n[14]=e[14]-t[14],n[15]=e[15]-t[15],n},E.multiplyTransformation=function(e,t,n){var r=e[0],a=e[1],i=e[2],o=e[4],s=e[5],u=e[6],l=e[8],f=e[9],c=e[10],d=e[12],h=e[13],p=e[14],m=t[0],y=t[1],v=t[2],w=t[4],g=t[5],C=t[6],x=t[8],E=t[9],_=t[10],O=t[12],M=t[13],b=t[14],S=r*m+o*y+l*v,A=a*m+s*y+f*v,R=i*m+u*y+c*v,T=r*w+o*g+l*C,I=a*w+s*g+f*C,q=i*w+u*g+c*C,U=r*x+o*E+l*_,z=a*x+s*E+f*_,D=i*x+u*E+c*_,P=r*O+o*M+l*b+d,N=a*O+s*M+f*b+h,F=i*O+u*M+c*b+p;return n[0]=S,n[1]=A,n[2]=R,n[3]=0,n[4]=T,n[5]=I,n[6]=q,n[7]=0,n[8]=U,n[9]=z,n[10]=D,n[11]=0,n[12]=P,n[13]=N,n[14]=F,n[15]=1,n},E.multiplyByMatrix3=function(e,t,n){var r=e[0],a=e[1],i=e[2],o=e[4],s=e[5],u=e[6],l=e[8],f=e[9],c=e[10],d=t[0],h=t[1],p=t[2],m=t[3],y=t[4],v=t[5],w=t[6],g=t[7],C=t[8],x=r*d+o*h+l*p,E=a*d+s*h+f*p,_=i*d+u*h+c*p,O=r*m+o*y+l*v,M=a*m+s*y+f*v,b=i*m+u*y+c*v,S=r*w+o*g+l*C,A=a*w+s*g+f*C,R=i*w+u*g+c*C;return n[0]=x,n[1]=E,n[2]=_,n[3]=0,n[4]=O,n[5]=M,n[6]=b,n[7]=0,n[8]=S,n[9]=A,n[10]=R,n[11]=0,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n},E.multiplyByTranslation=function(e,t,n){var r=t.x,a=t.y,i=t.z,o=r*e[0]+a*e[4]+i*e[8]+e[12],s=r*e[1]+a*e[5]+i*e[9]+e[13],u=r*e[2]+a*e[6]+i*e[10]+e[14];return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=o,n[13]=s,n[14]=u,n[15]=e[15],n};var R=new a.Cartesian3;E.multiplyByUniformScale=function(e,t,n){return R.x=t,R.y=t,R.z=t,E.multiplyByScale(e,R,n)},E.multiplyByScale=function(e,t,n){var r=t.x,a=t.y,i=t.z;return 1===r&&1===a&&1===i?E.clone(e,n):(n[0]=r*e[0],n[1]=r*e[1],n[2]=r*e[2],n[3]=0,n[4]=a*e[4],n[5]=a*e[5],n[6]=a*e[6],n[7]=0,n[8]=i*e[8],n[9]=i*e[9],n[10]=i*e[10],n[11]=0,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=1,n)},E.multiplyByVector=function(e,t,n){var r=t.x,a=t.y,i=t.z,o=t.w,s=e[0]*r+e[4]*a+e[8]*i+e[12]*o,u=e[1]*r+e[5]*a+e[9]*i+e[13]*o,l=e[2]*r+e[6]*a+e[10]*i+e[14]*o,f=e[3]*r+e[7]*a+e[11]*i+e[15]*o;return n.x=s,n.y=u,n.z=l,n.w=f,n},E.multiplyByPointAsVector=function(e,t,n){var r=t.x,a=t.y,i=t.z,o=e[0]*r+e[4]*a+e[8]*i,s=e[1]*r+e[5]*a+e[9]*i,u=e[2]*r+e[6]*a+e[10]*i;return n.x=o,n.y=s,n.z=u,n},E.multiplyByPoint=function(e,t,n){var r=t.x,a=t.y,i=t.z,o=e[0]*r+e[4]*a+e[8]*i+e[12],s=e[1]*r+e[5]*a+e[9]*i+e[13],u=e[2]*r+e[6]*a+e[10]*i+e[14];return n.x=o,n.y=s,n.z=u,n},E.multiplyByScalar=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11]*t,n[12]=e[12]*t,n[13]=e[13]*t,n[14]=e[14]*t,n[15]=e[15]*t,n},E.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},E.transpose=function(e,t){var n=e[1],r=e[2],a=e[3],i=e[6],o=e[7],s=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[10]=e[10],t[11]=e[14],t[12]=a,t[13]=o,t[14]=s,t[15]=e[15],t},E.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t},E.equals=function(e,n){return e===n||t.defined(e)&&t.defined(n)&&e[12]===n[12]&&e[13]===n[13]&&e[14]===n[14]&&e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[4]===n[4]&&e[5]===n[5]&&e[6]===n[6]&&e[8]===n[8]&&e[9]===n[9]&&e[10]===n[10]&&e[3]===n[3]&&e[7]===n[7]&&e[11]===n[11]&&e[15]===n[15]},E.equalsEpsilon=function(e,n,r){return e===n||t.defined(e)&&t.defined(n)&&Math.abs(e[0]-n[0])<=r&&Math.abs(e[1]-n[1])<=r&&Math.abs(e[2]-n[2])<=r&&Math.abs(e[3]-n[3])<=r&&Math.abs(e[4]-n[4])<=r&&Math.abs(e[5]-n[5])<=r&&Math.abs(e[6]-n[6])<=r&&Math.abs(e[7]-n[7])<=r&&Math.abs(e[8]-n[8])<=r&&Math.abs(e[9]-n[9])<=r&&Math.abs(e[10]-n[10])<=r&&Math.abs(e[11]-n[11])<=r&&Math.abs(e[12]-n[12])<=r&&Math.abs(e[13]-n[13])<=r&&Math.abs(e[14]-n[14])<=r&&Math.abs(e[15]-n[15])<=r},E.getTranslation=function(e,t){return t.x=e[12],t.y=e[13],t.z=e[14],t},E.getMatrix3=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t};var T,I=new o,q=new o,U=new y,z=new y(0,0,0,1);E.inverse=function(e,t){var n=e[0],a=e[4],s=e[8],u=e[12],l=e[1],f=e[5],c=e[9],d=e[13],h=e[2],p=e[6],m=e[10],v=e[14],w=e[3],g=e[7],C=e[11],x=e[15],_=m*x,O=v*C,M=p*x,b=v*g,S=p*C,A=m*g,R=h*x,T=v*w,D=h*C,P=m*w,N=h*g,F=p*w,V=_*f+b*c+S*d-(O*f+M*c+A*d),L=O*l+R*c+P*d-(_*l+T*c+D*d),B=M*l+T*f+N*d-(b*l+R*f+F*d),W=A*l+D*f+F*c-(S*l+P*f+N*c),k=O*a+M*s+A*u-(_*a+b*s+S*u),j=_*n+T*s+D*u-(O*n+R*s+P*u),Y=b*n+R*a+F*u-(M*n+T*a+N*u),X=S*n+P*a+N*s-(A*n+D*a+F*s),J=(_=s*d)*g+(b=u*f)*C+(S=a*c)*x-((O=u*c)*g+(M=a*d)*C+(A=s*f)*x),H=O*w+(R=n*d)*C+(P=s*l)*x-(_*w+(T=u*l)*C+(D=n*c)*x),Z=M*w+T*g+(N=n*f)*x-(b*w+R*g+(F=a*l)*x),G=A*w+D*g+F*C-(S*w+P*g+N*C),Q=M*m+A*v+O*p-(S*v+_*p+b*m),K=D*v+_*h+T*m-(R*m+P*v+O*h),$=R*p+F*v+b*h-(N*v+M*h+T*p),ee=N*m+S*h+P*p-(D*p+F*m+A*h),te=n*V+a*L+s*B+u*W;if(Math.abs(te)<r.CesiumMath.EPSILON21){if(o.equalsEpsilon(E.getMatrix3(e,I),q,r.CesiumMath.EPSILON7)&&y.equals(E.getRow(e,3,U),z))return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=1,t;throw new i.RuntimeError("matrix is not invertible because its determinate is zero.")}return te=1/te,t[0]=V*te,t[1]=L*te,t[2]=B*te,t[3]=W*te,t[4]=k*te,t[5]=j*te,t[6]=Y*te,t[7]=X*te,t[8]=J*te,t[9]=H*te,t[10]=Z*te,t[11]=G*te,t[12]=Q*te,t[13]=K*te,t[14]=$*te,t[15]=ee*te,t},E.inverseTransformation=function(e,t){var n=e[0],r=e[1],a=e[2],i=e[4],o=e[5],s=e[6],u=e[8],l=e[9],f=e[10],c=e[12],d=e[13],h=e[14],p=-n*c-r*d-a*h,m=-i*c-o*d-s*h,y=-u*c-l*d-f*h;return t[0]=n,t[1]=i,t[2]=u,t[3]=0,t[4]=r,t[5]=o,t[6]=l,t[7]=0,t[8]=a,t[9]=s,t[10]=f,t[11]=0,t[12]=p,t[13]=m,t[14]=y,t[15]=1,t},E.IDENTITY=Object.freeze(new E(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),E.ZERO=Object.freeze(new E(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),E.COLUMN0ROW0=0,E.COLUMN0ROW1=1,E.COLUMN0ROW2=2,E.COLUMN0ROW3=3,E.COLUMN1ROW0=4,E.COLUMN1ROW1=5,E.COLUMN1ROW2=6,E.COLUMN1ROW3=7,E.COLUMN2ROW0=8,E.COLUMN2ROW1=9,E.COLUMN2ROW2=10,E.COLUMN2ROW3=11,E.COLUMN3ROW0=12,E.COLUMN3ROW1=13,E.COLUMN3ROW2=14,E.COLUMN3ROW3=15,Object.defineProperties(E.prototype,{length:{get:function(){return E.packedLength}}}),E.prototype.clone=function(e){return E.clone(this,e)},E.prototype.equals=function(e){return E.equals(this,e)},E.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]&&e[4]===t[n+4]&&e[5]===t[n+5]&&e[6]===t[n+6]&&e[7]===t[n+7]&&e[8]===t[n+8]&&e[9]===t[n+9]&&e[10]===t[n+10]&&e[11]===t[n+11]&&e[12]===t[n+12]&&e[13]===t[n+13]&&e[14]===t[n+14]&&e[15]===t[n+15]},E.prototype.equalsEpsilon=function(e,t){return E.equalsEpsilon(this,e,t)},E.prototype.toString=function(){return"("+this[0]+", "+this[4]+", "+this[8]+", "+this[12]+")\n("+this[1]+", "+this[5]+", "+this[9]+", "+this[13]+")\n("+this[2]+", "+this[6]+", "+this[10]+", "+this[14]+")\n("+this[3]+", "+this[7]+", "+this[11]+", "+this[15]+")"};var D,P,N,F,V,L,B,W,k,j,Y,X,J,H,Z,G,Q,K={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},$={};function ee(e){for(var t=e.split("."),n=0,r=t.length;n<r;++n)t[n]=parseInt(t[n],10);return t}function te(){if(!t.defined(P)&&(P=!1,!ie())){var e=/ Chrome\/([\.0-9]+)/.exec(D.userAgent);null!==e&&(P=!0,N=ee(e[1]))}return P}function ne(){if(!t.defined(F)&&(F=!1,!te()&&!ie()&&/ Safari\/[\.0-9]+/.test(D.userAgent))){var e=/ Version\/([\.0-9]+)/.exec(D.userAgent);null!==e&&(F=!0,V=ee(e[1]))}return F}function re(){if(!t.defined(L)){L=!1;var e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(D.userAgent);null!==e&&(L=!0,(B=ee(e[1])).isNightly=!!e[2])}return L}function ae(){var e;t.defined(W)||(W=!1,"Microsoft Internet Explorer"===D.appName?null!==(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(D.userAgent))&&(W=!0,k=ee(e[1])):"Netscape"===D.appName&&null!==(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(D.userAgent))&&(W=!0,k=ee(e[1])));return W}function ie(){if(!t.defined(j)){j=!1;var e=/ Edge\/([\.0-9]+)/.exec(D.userAgent);null!==e&&(j=!0,Y=ee(e[1]))}return j}function oe(){if(!t.defined(X)){X=!1;var e=/Firefox\/([\.0-9]+)/.exec(D.userAgent);null!==e&&(X=!0,J=ee(e[1]))}return X}function se(){if(!t.defined(Q)){var e=document.createElement("canvas");e.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");var n=e.style.imageRendering;(Q=t.defined(n)&&""!==n)&&(G=n)}return Q}function ue(){return ue._result}Object.defineProperties($,{element:{get:function(){if($.supportsFullscreen())return document[K.fullscreenElement]}},changeEventName:{get:function(){if($.supportsFullscreen())return K.fullscreenchange}},errorEventName:{get:function(){if($.supportsFullscreen())return K.fullscreenerror}},enabled:{get:function(){if($.supportsFullscreen())return document[K.fullscreenEnabled]}},fullscreen:{get:function(){if($.supportsFullscreen())return null!==$.element}}}),$.supportsFullscreen=function(){if(t.defined(T))return T;T=!1;var e=document.body;if("function"==typeof e.requestFullscreen)return K.requestFullscreen="requestFullscreen",K.exitFullscreen="exitFullscreen",K.fullscreenEnabled="fullscreenEnabled",K.fullscreenElement="fullscreenElement",K.fullscreenchange="fullscreenchange",K.fullscreenerror="fullscreenerror",T=!0;for(var n,r=["webkit","moz","o","ms","khtml"],a=0,i=r.length;a<i;++a){var o=r[a];("function"==typeof e[n=o+"RequestFullscreen"]||"function"==typeof e[n=o+"RequestFullScreen"])&&(K.requestFullscreen=n,T=!0),n=o+"ExitFullscreen","function"==typeof document[n]?K.exitFullscreen=n:(n=o+"CancelFullScreen","function"==typeof document[n]&&(K.exitFullscreen=n)),n=o+"FullscreenEnabled",void 0!==document[n]?K.fullscreenEnabled=n:(n=o+"FullScreenEnabled",void 0!==document[n]&&(K.fullscreenEnabled=n)),n=o+"FullscreenElement",void 0!==document[n]?K.fullscreenElement=n:(n=o+"FullScreenElement",void 0!==document[n]&&(K.fullscreenElement=n)),n=o+"fullscreenchange",void 0!==document["on"+n]&&("ms"===o&&(n="MSFullscreenChange"),K.fullscreenchange=n),n=o+"fullscreenerror",void 0!==document["on"+n]&&("ms"===o&&(n="MSFullscreenError"),K.fullscreenerror=n)}return T},$.requestFullscreen=function(e,t){$.supportsFullscreen()&&e[K.requestFullscreen]({vrDisplay:t})},$.exitFullscreen=function(){$.supportsFullscreen()&&document[K.exitFullscreen]()},$._names=K,D="undefined"!=typeof navigator?navigator:{},ue._promise=void 0,ue._result=void 0,ue.initialize=function(){if(t.defined(ue._promise))return ue._promise;var e=t.when.defer();if(ue._promise=e.promise,ie())return ue._result=!1,e.resolve(ue._result),e.promise;var n=new Image;return n.onload=function(){ue._result=n.width>0&&n.height>0,e.resolve(ue._result)},n.onerror=function(){ue._result=!1,e.resolve(ue._result)},n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.promise},Object.defineProperties(ue,{initialized:{get:function(){return t.defined(ue._result)}}});var le=[];"undefined"!=typeof ArrayBuffer&&(le.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&le.push(Uint8ClampedArray),"undefined"!=typeof CanvasPixelArray&&le.push(CanvasPixelArray));var fe={isChrome:te,chromeVersion:function(){return te()&&N},isSafari:ne,safariVersion:function(){return ne()&&V},isWebkit:re,webkitVersion:function(){return re()&&B},isInternetExplorer:ae,internetExplorerVersion:function(){return ae()&&k},isEdge:ie,edgeVersion:function(){return ie()&&Y},isFirefox:oe,firefoxVersion:function(){return oe()&&J},isWindows:function(){return t.defined(H)||(H=/Windows/i.test(D.appVersion)),H},hardwareConcurrency:t.defaultValue(D.hardwareConcurrency,3),supportsPointerEvents:function(){return t.defined(Z)||(Z=!oe()&&"undefined"!=typeof PointerEvent&&(!t.defined(D.pointerEnabled)||D.pointerEnabled)),Z},supportsImageRenderingPixelated:se,supportsWebP:ue,imageRenderingValue:function(){return se()?G:void 0},typedArrayTypes:le};function ce(e,n,r,a){this.x=t.defaultValue(e,0),this.y=t.defaultValue(n,0),this.z=t.defaultValue(r,0),this.w=t.defaultValue(a,0)}fe.supportsFullscreen=function(){return $.supportsFullscreen()},fe.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},fe.supportsWebWorkers=function(){return"undefined"!=typeof Worker},fe.supportsWebAssembly=function(){return"undefined"!=typeof WebAssembly&&!fe.isEdge()};var de=new a.Cartesian3;ce.fromAxisAngle=function(e,n,r){var i=n/2,o=Math.sin(i),s=(de=a.Cartesian3.normalize(e,de)).x*o,u=de.y*o,l=de.z*o,f=Math.cos(i);return t.defined(r)?(r.x=s,r.y=u,r.z=l,r.w=f,r):new ce(s,u,l,f)};var he=[1,2,0],pe=new Array(3);ce.fromRotationMatrix=function(e,n){var r,a,i,s,u,l=e[o.COLUMN0ROW0],f=e[o.COLUMN1ROW1],c=e[o.COLUMN2ROW2],d=l+f+c;if(d>0)u=.5*(r=Math.sqrt(d+1)),r=.5/r,a=(e[o.COLUMN1ROW2]-e[o.COLUMN2ROW1])*r,i=(e[o.COLUMN2ROW0]-e[o.COLUMN0ROW2])*r,s=(e[o.COLUMN0ROW1]-e[o.COLUMN1ROW0])*r;else{var h=0;f>l&&(h=1),c>l&&c>f&&(h=2);var p=he[h],m=he[p];r=Math.sqrt(e[o.getElementIndex(h,h)]-e[o.getElementIndex(p,p)]-e[o.getElementIndex(m,m)]+1);var y=pe;y[h]=.5*r,r=.5/r,u=(e[o.getElementIndex(m,p)]-e[o.getElementIndex(p,m)])*r,y[p]=(e[o.getElementIndex(p,h)]+e[o.getElementIndex(h,p)])*r,y[m]=(e[o.getElementIndex(m,h)]+e[o.getElementIndex(h,m)])*r,a=-y[0],i=-y[1],s=-y[2]}return t.defined(n)?(n.x=a,n.y=i,n.z=s,n.w=u,n):new ce(a,i,s,u)};var me=new ce,ye=new ce,ve=new ce,we=new ce;ce.fromHeadingPitchRoll=function(e,t){return we=ce.fromAxisAngle(a.Cartesian3.UNIT_X,e.roll,me),ve=ce.fromAxisAngle(a.Cartesian3.UNIT_Y,-e.pitch,t),t=ce.multiply(ve,we,ve),ye=ce.fromAxisAngle(a.Cartesian3.UNIT_Z,-e.heading,me),ce.multiply(ye,t,t)};var ge=new a.Cartesian3,Ce=new a.Cartesian3,xe=new ce,Ee=new ce,_e=new ce;ce.packedLength=4,ce.pack=function(e,n,r){return r=t.defaultValue(r,0),n[r++]=e.x,n[r++]=e.y,n[r++]=e.z,n[r]=e.w,n},ce.unpack=function(e,n,r){return n=t.defaultValue(n,0),t.defined(r)||(r=new ce),r.x=e[n],r.y=e[n+1],r.z=e[n+2],r.w=e[n+3],r},ce.packedInterpolationLength=3,ce.convertPackedArrayForInterpolation=function(e,t,n,r){ce.unpack(e,4*n,_e),ce.conjugate(_e,_e);for(var a=0,i=n-t+1;a<i;a++){var o=3*a;ce.unpack(e,4*(t+a),xe),ce.multiply(xe,_e,xe),xe.w<0&&ce.negate(xe,xe),ce.computeAxis(xe,ge);var s=ce.computeAngle(xe);r[o]=ge.x*s,r[o+1]=ge.y*s,r[o+2]=ge.z*s}},ce.unpackInterpolationResult=function(e,n,r,i,o){t.defined(o)||(o=new ce),a.Cartesian3.fromArray(e,0,Ce);var s=a.Cartesian3.magnitude(Ce);return ce.unpack(n,4*i,Ee),0===s?ce.clone(ce.IDENTITY,xe):ce.fromAxisAngle(Ce,s,xe),ce.multiply(xe,Ee,o)},ce.clone=function(e,n){if(t.defined(e))return t.defined(n)?(n.x=e.x,n.y=e.y,n.z=e.z,n.w=e.w,n):new ce(e.x,e.y,e.z,e.w)},ce.conjugate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},ce.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},ce.magnitude=function(e){return Math.sqrt(ce.magnitudeSquared(e))},ce.normalize=function(e,t){var n=1/ce.magnitude(e),r=e.x*n,a=e.y*n,i=e.z*n,o=e.w*n;return t.x=r,t.y=a,t.z=i,t.w=o,t},ce.inverse=function(e,t){var n=ce.magnitudeSquared(e);return t=ce.conjugate(e,t),ce.multiplyByScalar(t,1/n,t)},ce.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n},ce.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n},ce.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},ce.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},ce.multiply=function(e,t,n){var r=e.x,a=e.y,i=e.z,o=e.w,s=t.x,u=t.y,l=t.z,f=t.w,c=o*s+r*f+a*l-i*u,d=o*u-r*l+a*f+i*s,h=o*l+r*u-a*s+i*f,p=o*f-r*s-a*u-i*l;return n.x=c,n.y=d,n.z=h,n.w=p,n},ce.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n},ce.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n},ce.computeAxis=function(e,t){var n=e.w;if(Math.abs(n-1)<r.CesiumMath.EPSILON6)return t.x=t.y=t.z=0,t;var a=1/Math.sqrt(1-n*n);return t.x=e.x*a,t.y=e.y*a,t.z=e.z*a,t},ce.computeAngle=function(e){return Math.abs(e.w-1)<r.CesiumMath.EPSILON6?0:2*Math.acos(e.w)};var Oe=new ce;ce.lerp=function(e,t,n,r){return Oe=ce.multiplyByScalar(t,n,Oe),r=ce.multiplyByScalar(e,1-n,r),ce.add(Oe,r,r)};var Me=new ce,be=new ce,Se=new ce;ce.slerp=function(e,t,n,a){var i=ce.dot(e,t),o=t;if(i<0&&(i=-i,o=Me=ce.negate(t,Me)),1-i<r.CesiumMath.EPSILON6)return ce.lerp(e,o,n,a);var s=Math.acos(i);return be=ce.multiplyByScalar(e,Math.sin((1-n)*s),be),Se=ce.multiplyByScalar(o,Math.sin(n*s),Se),a=ce.add(be,Se,a),ce.multiplyByScalar(a,1/Math.sin(s),a)},ce.log=function(e,t){var n=r.CesiumMath.acosClamped(e.w),i=0;return 0!==n&&(i=n/Math.sin(n)),a.Cartesian3.multiplyByScalar(e,i,t)},ce.exp=function(e,t){var n=a.Cartesian3.magnitude(e),r=0;return 0!==n&&(r=Math.sin(n)/n),t.x=e.x*r,t.y=e.y*r,t.z=e.z*r,t.w=Math.cos(n),t};var Ae=new a.Cartesian3,Re=new a.Cartesian3,Te=new ce,Ie=new ce;ce.computeInnerQuadrangle=function(e,t,n,r){var i=ce.conjugate(t,Te);ce.multiply(i,n,Ie);var o=ce.log(Ie,Ae);ce.multiply(i,e,Ie);var s=ce.log(Ie,Re);return a.Cartesian3.add(o,s,o),a.Cartesian3.multiplyByScalar(o,.25,o),a.Cartesian3.negate(o,o),ce.exp(o,Te),ce.multiply(t,Te,r)},ce.squad=function(e,t,n,r,a,i){var o=ce.slerp(e,t,a,Te),s=ce.slerp(n,r,a,Ie);return ce.slerp(o,s,2*a*(1-a),i)};for(var qe=new ce,Ue=1.9011074535173003,ze=fe.supportsTypedArrays()?new Float32Array(8):[],De=fe.supportsTypedArrays()?new Float32Array(8):[],Pe=fe.supportsTypedArrays()?new Float32Array(8):[],Ne=fe.supportsTypedArrays()?new Float32Array(8):[],Fe=0;Fe<7;++Fe){var Ve=Fe+1,Le=2*Ve+1;ze[Fe]=1/(Ve*Le),De[Fe]=Ve/Le}function Be(e,t,n){for(var r,a,i=0,o=e.length-1;i<=o;)if((a=n(e[r=~~((i+o)/2)],t))<0)i=r+1;else{if(!(a>0))return r;o=r-1}return~(o+1)}function We(e,t,n,r,a){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=n,this.yPoleOffset=r,this.ut1MinusUtc=a}
/**
    @license
    sprintf.js from the php.js project - https://github.com/kvz/phpjs
    Directly from https://github.com/kvz/phpjs/blob/master/functions/strings/sprintf.js

    php.js is copyright 2012 Kevin van Zonneveld.

    Portions copyright Brett Zamir (http://brett-zamir.me), Kevin van Zonneveld
    (http://kevin.vanzonneveld.net), Onno Marsman, Theriault, Michael White
    (http://getsprink.com), Waldo Malqui Silva, Paulo Freitas, Jack, Jonas
    Raoni Soares Silva (http://www.jsfromhell.com), Philip Peterson, Legaev
    Andrey, Ates Goral (http://magnetiq.com), Alex, Ratheous, Martijn Wieringa,
    Rafa? Kukawski (http://blog.kukawski.pl), lmeyrick
    (https://sourceforge.net/projects/bcmath-js/), Nate, Philippe Baumann,
    Enrique Gonzalez, Webtoolkit.info (http://www.webtoolkit.info/), Carlos R.
    L. Rodrigues (http://www.jsfromhell.com), Ash Searle
    (http://hexmen.com/blog/), Jani Hartikainen, travc, Ole Vrijenhoek,
    Erkekjetter, Michael Grier, Rafa? Kukawski (http://kukawski.pl), Johnny
    Mast (http://www.phpvrouwen.nl), T.Wild, d3x,
    http://stackoverflow.com/questions/57803/how-to-convert-decimal-to-hex-in-javascript,
    Rafa? Kukawski (http://blog.kukawski.pl/), stag019, pilus, WebDevHobo
    (http://webdevhobo.blogspot.com/), marrtins, GeekFG
    (http://geekfg.blogspot.com), Andrea Giammarchi
    (http://webreflection.blogspot.com), Arpad Ray (mailto:arpad@php.net),
    gorthaur, Paul Smith, Tim de Koning (http://www.kingsquare.nl), Joris, Oleg
    Eremeev, Steve Hilder, majak, gettimeofday, KELAN, Josh Fraser
    (http://onlineaspect.com/2007/06/08/auto-detect-a-time-zone-with-javascript/),
    Marc Palau, Martin
    (http://www.erlenwiese.de/), Breaking Par Consulting Inc
    (http://www.breakingpar.com/bkp/home.nsf/0/87256B280015193F87256CFB006C45F7),
    Chris, Mirek Slugen, saulius, Alfonso Jimenez
    (http://www.alfonsojimenez.com), Diplom@t (http://difane.com/), felix,
    Mailfaker (http://www.weedem.fr/), Tyler Akins (http://rumkin.com), Caio
    Ariede (http://caioariede.com), Robin, Kankrelune
    (http://www.webfaktory.info/), Karol Kowalski, Imgen Tata
    (http://www.myipdf.com/), mdsjack (http://www.mdsjack.bo.it), Dreamer,
    Felix Geisendoerfer (http://www.debuggable.com/felix), Lars Fischer, AJ,
    David, Aman Gupta, Michael White, Public Domain
    (http://www.json.org/json2.js), Steven Levithan
    (http://blog.stevenlevithan.com), Sakimori, Pellentesque Malesuada,
    Thunder.m, Dj (http://phpjs.org/functions/htmlentities:425#comment_134018),
    Steve Clay, David James, Francois, class_exists, nobbler, T. Wild, Itsacon
    (http://www.itsacon.net/), date, Ole Vrijenhoek (http://www.nervous.nl/),
    Fox, Raphael (Ao RUDLER), Marco, noname, Mateusz "loonquawl" Zalega, Frank
    Forte, Arno, ger, mktime, john (http://www.jd-tech.net), Nick Kolosov
    (http://sammy.ru), marc andreu, Scott Cariss, Douglas Crockford
    (http://javascript.crockford.com), madipta, Slawomir Kaniecki,
    ReverseSyntax, Nathan, Alex Wilson, kenneth, Bayron Guevara, Adam Wallner
    (http://web2.bitbaro.hu/), paulo kuong, jmweb, Lincoln Ramsay, djmix,
    Pyerre, Jon Hohle, Thiago Mata (http://thiagomata.blog.com), lmeyrick
    (https://sourceforge.net/projects/bcmath-js/this.), Linuxworld, duncan,
    Gilbert, Sanjoy Roy, Shingo, sankai, Oskar Larsson H?gfeldt
    (http://oskar-lh.name/), Denny Wardhana, 0m3r, Everlasto, Subhasis Deb,
    josh, jd, Pier Paolo Ramon (http://www.mastersoup.com/), P, merabi, Soren
    Hansen, Eugene Bulkin (http://doubleaw.com/), Der Simon
    (http://innerdom.sourceforge.net/), echo is bad, Ozh, XoraX
    (http://www.xorax.info), EdorFaus, JB, J A R, Marc Jansen, Francesco, LH,
    Stoyan Kyosev (http://www.svest.org/), nord_ua, omid
    (http://phpjs.org/functions/380:380#comment_137122), Brad Touesnard, MeEtc
    (http://yass.meetcweb.com), Peter-Paul Koch
    (http://www.quirksmode.org/js/beat.html), Olivier Louvignes
    (http://mg-crea.com/), T0bsn, Tim Wiel, Bryan Elliott, Jalal Berrami,
    Martin, JT, David Randall, Thomas Beaucourt (http://www.webapp.fr), taith,
    vlado houba, Pierre-Luc Paour, Kristof Coomans (SCK-CEN Belgian Nucleair
    Research Centre), Martin Pool, Kirk Strobeck, Rick Waldron, Brant Messenger
    (http://www.brantmessenger.com/), Devan Penner-Woelk, Saulo Vallory, Wagner
    B. Soares, Artur Tchernychev, Valentina De Rosa, Jason Wong
    (http://carrot.org/), Christoph, Daniel Esteban, strftime, Mick@el, rezna,
    Simon Willison (http://simonwillison.net), Anton Ongson, Gabriel Paderni,
    Marco van Oort, penutbutterjelly, Philipp Lenssen, Bjorn Roesbeke
    (http://www.bjornroesbeke.be/), Bug?, Eric Nagel, Tomasz Wesolowski,
    Evertjan Garretsen, Bobby Drake, Blues (http://tech.bluesmoon.info/), Luke
    Godfrey, Pul, uestla, Alan C, Ulrich, Rafal Kukawski, Yves Sucaet,
    sowberry, Norman "zEh" Fuchs, hitwork, Zahlii, johnrembo, Nick Callen,
    Steven Levithan (stevenlevithan.com), ejsanders, Scott Baker, Brian Tafoya
    (http://www.premasolutions.com/), Philippe Jausions
    (http://pear.php.net/user/jausions), Aidan Lister
    (http://aidanlister.com/), Rob, e-mike, HKM, ChaosNo1, metjay, strcasecmp,
    strcmp, Taras Bogach, jpfle, Alexander Ermolaev
    (http://snippets.dzone.com/user/AlexanderErmolaev), DxGx, kilops, Orlando,
    dptr1988, Le Torbi, James (http://www.james-bell.co.uk/), Pedro Tainha
    (http://www.pedrotainha.com), James, Arnout Kazemier
    (http://www.3rd-Eden.com), Chris McMacken, gabriel paderni, Yannoo,
    FGFEmperor, baris ozdil, Tod Gentille, Greg Frazier, jakes, 3D-GRAF, Allan
    Jensen (http://www.winternet.no), Howard Yeend, Benjamin Lupton, davook,
    daniel airton wermann (http://wermann.com.br), Atli T¨®r, Maximusya, Ryan
    W Tenney (http://ryan.10e.us), Alexander M Beedie, fearphage
    (http://http/my.opera.com/fearphage/), Nathan Sepulveda, Victor, Matteo,
    Billy, stensi, Cord, Manish, T.J. Leahy, Riddler
    (http://www.frontierwebdev.com/), Rafa? Kukawski, FremyCompany, Matt
    Bradley, Tim de Koning, Luis Salazar (http://www.freaky-media.com/), Diogo
    Resende, Rival, Andrej Pavlovic, Garagoth, Le Torbi
    (http://www.letorbi.de/), Dino, Josep Sanz (http://www.ws3.es/), rem,
    Russell Walker (http://www.nbill.co.uk/), Jamie Beck
    (http://www.terabit.ca/), setcookie, Michael, YUI Library:
    http://developer.yahoo.com/yui/docs/YAHOO.util.DateLocale.html, Blues at
    http://hacks.bluesmoon.info/strftime/strftime.js, Ben
    (http://benblume.co.uk/), DtTvB
    (http://dt.in.th/2008-09-16.string-length-in-bytes.html), Andreas, William,
    meo, incidence, Cagri Ekin, Amirouche, Amir Habibi
    (http://www.residence-mixte.com/), Luke Smith (http://lucassmith.name),
    Kheang Hok Chin (http://www.distantia.ca/), Jay Klehr, Lorenzo Pisani,
    Tony, Yen-Wei Liu, Greenseed, mk.keck, Leslie Hoare, dude, booeyOH, Ben
    Bryan

    Licensed under the MIT (MIT-LICENSE.txt) license.

    Permission is hereby granted, free of charge, to any person obtaining a
    copy of this software and associated documentation files (the
    "Software"), to deal in the Software without restriction, including
    without limitation the rights to use, copy, modify, merge, publish,
    distribute, sublicense, and/or sell copies of the Software, and to
    permit persons to whom the Software is furnished to do so, subject to
    the following conditions:

    The above copyright notice and this permission notice shall be included
    in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
    OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
    MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
    IN NO EVENT SHALL KEVIN VAN ZONNEVELD BE LIABLE FOR ANY CLAIM, DAMAGES
    OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
    ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
    OTHER DEALINGS IN THE SOFTWARE.
    */function ke(){var e=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,t=arguments,n=0,r=t[n++],a=function(e,t,n,r){n||(n=" ");var a=e.length>=t?"":Array(1+t-e.length>>>0).join(n);return r?e+a:a+e},i=function(e,t,n,r,i,o){var s=r-e.length;return s>0&&(e=n||!i?a(e,r,o,n):e.slice(0,t.length)+a("",s,"0",!0)+e.slice(t.length)),e},o=function(e,t,n,r,o,s,u){var l=e>>>0;return e=(n=n&&l&&{2:"0b",8:"0",16:"0x"}[t]||"")+a(l.toString(t),s||0,"0",!1),i(e,n,r,o,u)},s=function(e,t,n,r,a,o){return null!=r&&(e=e.slice(0,r)),i(e,"",t,n,a,o)},u=function(e,r,u,l,f,c,d){var h,p,m,y,v;if("%%"==e)return"%";for(var w=!1,g="",C=!1,x=!1,E=" ",_=u.length,O=0;u&&O<_;O++)switch(u.charAt(O)){case" ":g=" ";break;case"+":g="+";break;case"-":w=!0;break;case"'":E=u.charAt(O+1);break;case"0":C=!0;break;case"#":x=!0}if((l=l?"*"==l?+t[n++]:"*"==l.charAt(0)?+t[l.slice(1,-1)]:+l:0)<0&&(l=-l,w=!0),!isFinite(l))throw new Error("sprintf: (minimum-)width must be finite");switch(c=c?"*"==c?+t[n++]:"*"==c.charAt(0)?+t[c.slice(1,-1)]:+c:"fFeE".indexOf(d)>-1?6:"d"==d?0:void 0,v=r?t[r.slice(0,-1)]:t[n++],d){case"s":return s(String(v),w,l,c,C,E);case"c":return s(String.fromCharCode(+v),w,l,c,C);case"b":return o(v,2,x,w,l,c,C);case"o":return o(v,8,x,w,l,c,C);case"x":return o(v,16,x,w,l,c,C);case"X":return o(v,16,x,w,l,c,C).toUpperCase();case"u":return o(v,10,x,w,l,c,C);case"i":case"d":return h=+v||0,v=(p=(h=Math.round(h-h%1))<0?"-":g)+a(String(Math.abs(h)),c,"0",!1),i(v,p,w,l,C);case"e":case"E":case"f":case"F":case"g":case"G":return p=(h=+v)<0?"-":g,m=["toExponential","toFixed","toPrecision"]["efg".indexOf(d.toLowerCase())],y=["toString","toUpperCase"]["eEfFgG".indexOf(d)%2],v=p+Math.abs(h)[m](c),i(v,p,w,l,C)[y]();default:return e}};return r.replace(e,u)}function je(e,t,n,r,a,i,o,s){this.year=e,this.month=t,this.day=n,this.hour=r,this.minute=a,this.second=i,this.millisecond=o,this.isLeapSecond=s}function Ye(e){return e%4==0&&e%100!=0||e%400==0}function Xe(e,t){this.julianDate=e,this.offset=t}ze[7]=Ue/136,De[7]=8*Ue/17,ce.fastSlerp=function(e,t,n,r){var a,i=ce.dot(e,t);i>=0?a=1:(a=-1,i=-i);for(var o=i-1,s=1-n,u=n*n,l=s*s,f=7;f>=0;--f)Pe[f]=(ze[f]*u-De[f])*o,Ne[f]=(ze[f]*l-De[f])*o;var c=a*n*(1+Pe[0]*(1+Pe[1]*(1+Pe[2]*(1+Pe[3]*(1+Pe[4]*(1+Pe[5]*(1+Pe[6]*(1+Pe[7])))))))),d=s*(1+Ne[0]*(1+Ne[1]*(1+Ne[2]*(1+Ne[3]*(1+Ne[4]*(1+Ne[5]*(1+Ne[6]*(1+Ne[7])))))))),h=ce.multiplyByScalar(e,d,qe);return ce.multiplyByScalar(t,c,r),ce.add(h,r,r)},ce.fastSquad=function(e,t,n,r,a,i){var o=ce.fastSlerp(e,t,a,Te),s=ce.fastSlerp(n,r,a,Ie);return ce.fastSlerp(o,s,2*a*(1-a),i)},ce.equals=function(e,n){return e===n||t.defined(e)&&t.defined(n)&&e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w},ce.equalsEpsilon=function(e,n,r){return e===n||t.defined(e)&&t.defined(n)&&Math.abs(e.x-n.x)<=r&&Math.abs(e.y-n.y)<=r&&Math.abs(e.z-n.z)<=r&&Math.abs(e.w-n.w)<=r},ce.ZERO=Object.freeze(new ce(0,0,0,0)),ce.IDENTITY=Object.freeze(new ce(0,0,0,1)),ce.prototype.clone=function(e){return ce.clone(this,e)},ce.prototype.equals=function(e){return ce.equals(this,e)},ce.prototype.equalsEpsilon=function(e,t){return ce.equalsEpsilon(this,e,t)},ce.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var Je=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),He=Object.freeze({UTC:0,TAI:1}),Ze=new je,Ge=[31,28,31,30,31,30,31,31,30,31,30,31];function Qe(e,t){return dt.compare(e.julianDate,t.julianDate)}var Ke=new Xe;function $e(e){Ke.julianDate=e;var t=dt.leapSeconds,n=Be(t,Ke,Qe);n<0&&(n=~n),n>=t.length&&(n=t.length-1);var r=t[n].offset;n>0&&(dt.secondsDifference(t[n].julianDate,e)>r&&(r=t[--n].offset));dt.addSeconds(e,r,e)}function et(e,t){Ke.julianDate=e;var n=dt.leapSeconds,r=Be(n,Ke,Qe);if(r<0&&(r=~r),0===r)return dt.addSeconds(e,-n[0].offset,t);if(r>=n.length)return dt.addSeconds(e,-n[r-1].offset,t);var a=dt.secondsDifference(n[r].julianDate,e);return 0===a?dt.addSeconds(e,-n[r].offset,t):a<=1?void 0:dt.addSeconds(e,-n[--r].offset,t)}function tt(e,t,n){var r=t/Je.SECONDS_PER_DAY|0;return e+=r,(t-=Je.SECONDS_PER_DAY*r)<0&&(e--,t+=Je.SECONDS_PER_DAY),n.dayNumber=e,n.secondsOfDay=t,n}function nt(e,t,n,r,a,i,o){var s=(t-14)/12|0,u=e+4800+s,l=(1461*u/4|0)+(367*(t-2-12*s)/12|0)-(3*((u+100)/100|0)/4|0)+n-32075;(r-=12)<0&&(r+=24);var f=i+(r*Je.SECONDS_PER_HOUR+a*Je.SECONDS_PER_MINUTE+o*Je.SECONDS_PER_MILLISECOND);return f>=43200&&(l-=1),[l,f]}var rt=/^(\d{4})$/,at=/^(\d{4})-(\d{2})$/,it=/^(\d{4})-?(\d{3})$/,ot=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,st=/^(\d{4})-?(\d{2})-?(\d{2})$/,ut=/([Z+\-])?(\d{2})?:?(\d{2})?$/,lt=/^(\d{2})(\.\d+)?/.source+ut.source,ft=/^(\d{2}):?(\d{2})(\.\d+)?/.source+ut.source,ct=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+ut.source;function dt(e,n,r){this.dayNumber=void 0,this.secondsOfDay=void 0,e=t.defaultValue(e,0),n=t.defaultValue(n,0),r=t.defaultValue(r,He.UTC);var a=0|e;tt(a,n+=(e-a)*Je.SECONDS_PER_DAY,this),r===He.UTC&&$e(this)}dt.fromGregorianDate=function(e,n){var r=nt(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return t.defined(n)?(tt(r[0],r[1],n),$e(n),n):new dt(r[0],r[1],He.UTC)},dt.fromDate=function(e,n){var r=nt(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return t.defined(n)?(tt(r[0],r[1],n),$e(n),n):new dt(r[0],r[1],He.UTC)},dt.fromIso8601=function(e,n){var r,a,i,o,s=(e=e.replace(",",".")).split("T"),u=1,l=1,f=0,c=0,d=0,h=0,p=s[0],m=s[1];if(null!==(s=p.match(st)))r=+s[1],u=+s[2],l=+s[3];else if(null!==(s=p.match(at)))r=+s[1],u=+s[2];else if(null!==(s=p.match(rt)))r=+s[1];else{var y;if(null!==(s=p.match(it)))r=+s[1],y=+s[2],i=Ye(r);else if(null!==(s=p.match(ot)))r=+s[1],y=7*+s[2]+(+s[3]||0)-new Date(Date.UTC(r,0,4)).getUTCDay()-3;(a=new Date(Date.UTC(r,0,1))).setUTCDate(y),u=a.getUTCMonth()+1,l=a.getUTCDate()}if(i=Ye(r),t.defined(m)){null!==(s=m.match(ct))?(f=+s[1],c=+s[2],d=+s[3],h=1e3*+(s[4]||0),o=5):null!==(s=m.match(ft))?(f=+s[1],c=+s[2],d=60*+(s[3]||0),o=4):null!==(s=m.match(lt))&&(f=+s[1],c=60*+(s[2]||0),o=3);var v=s[o],w=+s[o+1],g=+(s[o+2]||0);switch(v){case"+":f-=w,c-=g;break;case"-":f+=w,c+=g;break;case"Z":break;default:c+=new Date(Date.UTC(r,u-1,l,f,c)).getTimezoneOffset()}}var C=60===d;for(C&&d--;c>=60;)c-=60,f++;for(;f>=24;)f-=24,l++;for(a=i&&2===u?29:Ge[u-1];l>a;)l-=a,++u>12&&(u-=12,r++),a=i&&2===u?29:Ge[u-1];for(;c<0;)c+=60,f--;for(;f<0;)f+=24,l--;for(;l<1;)--u<1&&(u+=12,r--),l+=a=i&&2===u?29:Ge[u-1];var x=nt(r,u,l,f,c,d,h);return t.defined(n)?(tt(x[0],x[1],n),$e(n)):n=new dt(x[0],x[1],He.UTC),C&&dt.addSeconds(n,1,n),n},dt.now=function(e){return dt.fromDate(new Date,e)};var ht=new dt(0,0,He.TAI);
/**
     * @license
     *
     * Grauw URI utilities
     *
     * See: http://hg.grauw.nl/grauw-lib/file/tip/src/uri.js
     *
     * @author Laurens Holst (http://www.grauw.nl/)
     *
     *   Copyright 2012 Laurens Holst
     *
     *   Licensed under the Apache License, Version 2.0 (the "License");
     *   you may not use this file except in compliance with the License.
     *   You may obtain a copy of the License at
     *
     *       http://www.apache.org/licenses/LICENSE-2.0
     *
     *   Unless required by applicable law or agreed to in writing, software
     *   distributed under the License is distributed on an "AS IS" BASIS,
     *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     *   See the License for the specific language governing permissions and
     *   limitations under the License.
     *
     */
function pt(e){if(e instanceof pt)this.scheme=e.scheme,this.authority=e.authority,this.path=e.path,this.query=e.query,this.fragment=e.fragment;else if(e){var t=mt.exec(e);this.scheme=t[1],this.authority=t[2],this.path=t[3],this.query=t[4],this.fragment=t[5]}}dt.toGregorianDate=function(e,n){var r=!1,a=et(e,ht);t.defined(a)||(dt.addSeconds(e,-1,ht),a=et(ht,ht),r=!0);var i=a.dayNumber,o=a.secondsOfDay;o>=43200&&(i+=1);var s=i+68569|0,u=4*s/146097|0,l=4e3*((s=s-((146097*u+3)/4|0)|0)+1)/1461001|0,f=80*(s=s-(1461*l/4|0)+31|0)/2447|0,c=s-(2447*f/80|0)|0,d=f+2-12*(s=f/11|0)|0,h=100*(u-49)+l+s|0,p=o/Je.SECONDS_PER_HOUR|0,m=o-p*Je.SECONDS_PER_HOUR,y=m/Je.SECONDS_PER_MINUTE|0,v=0|(m-=y*Je.SECONDS_PER_MINUTE),w=(m-v)/Je.SECONDS_PER_MILLISECOND;return(p+=12)>23&&(p-=24),r&&(v+=1),t.defined(n)?(n.year=h,n.month=d,n.day=c,n.hour=p,n.minute=y,n.second=v,n.millisecond=w,n.isLeapSecond=r,n):new je(h,d,c,p,y,v,w,r)},dt.toDate=function(e){var t=dt.toGregorianDate(e,Ze),n=t.second;return t.isLeapSecond&&(n-=1),new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,n,t.millisecond))},dt.toIso8601=function(e,n){var r=dt.toGregorianDate(e,Ze),a=r.year,i=r.month,o=r.day,s=r.hour,u=r.minute,l=r.second,f=r.millisecond;return 1e4===a&&1===i&&1===o&&0===s&&0===u&&0===l&&0===f&&(a=9999,i=12,o=31,s=24),t.defined(n)||0===f?t.defined(n)&&0!==n?ke("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",a,i,o,s,u,l,(.01*f).toFixed(n).replace(".","").slice(0,n)):ke("%04d-%02d-%02dT%02d:%02d:%02dZ",a,i,o,s,u,l):ke("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",a,i,o,s,u,l,(.01*f).toString().replace(".",""))},dt.clone=function(e,n){if(t.defined(e))return t.defined(n)?(n.dayNumber=e.dayNumber,n.secondsOfDay=e.secondsOfDay,n):new dt(e.dayNumber,e.secondsOfDay,He.TAI)},dt.compare=function(e,t){var n=e.dayNumber-t.dayNumber;return 0!==n?n:e.secondsOfDay-t.secondsOfDay},dt.equals=function(e,n){return e===n||t.defined(e)&&t.defined(n)&&e.dayNumber===n.dayNumber&&e.secondsOfDay===n.secondsOfDay},dt.equalsEpsilon=function(e,n,r){return e===n||t.defined(e)&&t.defined(n)&&Math.abs(dt.secondsDifference(e,n))<=r},dt.totalDays=function(e){return e.dayNumber+e.secondsOfDay/Je.SECONDS_PER_DAY},dt.secondsDifference=function(e,t){return(e.dayNumber-t.dayNumber)*Je.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)},dt.daysDifference=function(e,t){return e.dayNumber-t.dayNumber+(e.secondsOfDay-t.secondsOfDay)/Je.SECONDS_PER_DAY},dt.computeTaiMinusUtc=function(e){Ke.julianDate=e;var t=dt.leapSeconds,n=Be(t,Ke,Qe);return n<0&&(n=~n,--n<0&&(n=0)),t[n].offset},dt.addSeconds=function(e,t,n){return tt(e.dayNumber,e.secondsOfDay+t,n)},dt.addMinutes=function(e,t,n){var r=e.secondsOfDay+t*Je.SECONDS_PER_MINUTE;return tt(e.dayNumber,r,n)},dt.addHours=function(e,t,n){var r=e.secondsOfDay+t*Je.SECONDS_PER_HOUR;return tt(e.dayNumber,r,n)},dt.addDays=function(e,t,n){return tt(e.dayNumber+t,e.secondsOfDay,n)},dt.lessThan=function(e,t){return dt.compare(e,t)<0},dt.lessThanOrEquals=function(e,t){return dt.compare(e,t)<=0},dt.greaterThan=function(e,t){return dt.compare(e,t)>0},dt.greaterThanOrEquals=function(e,t){return dt.compare(e,t)>=0},dt.prototype.clone=function(e){return dt.clone(this,e)},dt.prototype.equals=function(e){return dt.equals(this,e)},dt.prototype.equalsEpsilon=function(e,t){return dt.equalsEpsilon(this,e,t)},dt.prototype.toString=function(){return dt.toIso8601(this)},dt.leapSeconds=[new Xe(new dt(2441317,43210,He.TAI),10),new Xe(new dt(2441499,43211,He.TAI),11),new Xe(new dt(2441683,43212,He.TAI),12),new Xe(new dt(2442048,43213,He.TAI),13),new Xe(new dt(2442413,43214,He.TAI),14),new Xe(new dt(2442778,43215,He.TAI),15),new Xe(new dt(2443144,43216,He.TAI),16),new Xe(new dt(2443509,43217,He.TAI),17),new Xe(new dt(2443874,43218,He.TAI),18),new Xe(new dt(2444239,43219,He.TAI),19),new Xe(new dt(2444786,43220,He.TAI),20),new Xe(new dt(2445151,43221,He.TAI),21),new Xe(new dt(2445516,43222,He.TAI),22),new Xe(new dt(2446247,43223,He.TAI),23),new Xe(new dt(2447161,43224,He.TAI),24),new Xe(new dt(2447892,43225,He.TAI),25),new Xe(new dt(2448257,43226,He.TAI),26),new Xe(new dt(2448804,43227,He.TAI),27),new Xe(new dt(2449169,43228,He.TAI),28),new Xe(new dt(2449534,43229,He.TAI),29),new Xe(new dt(2450083,43230,He.TAI),30),new Xe(new dt(2450630,43231,He.TAI),31),new Xe(new dt(2451179,43232,He.TAI),32),new Xe(new dt(2453736,43233,He.TAI),33),new Xe(new dt(2454832,43234,He.TAI),34),new Xe(new dt(2456109,43235,He.TAI),35),new Xe(new dt(2457204,43236,He.TAI),36),new Xe(new dt(2457754,43237,He.TAI),37)],pt.prototype.scheme=null,pt.prototype.authority=null,pt.prototype.path="",pt.prototype.query=null,pt.prototype.fragment=null;var mt=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$");pt.prototype.getScheme=function(){return this.scheme},pt.prototype.getAuthority=function(){return this.authority},pt.prototype.getPath=function(){return this.path},pt.prototype.getQuery=function(){return this.query},pt.prototype.getFragment=function(){return this.fragment},pt.prototype.isAbsolute=function(){return!!this.scheme&&!this.fragment},pt.prototype.isSameDocumentAs=function(e){return e.scheme==this.scheme&&e.authority==this.authority&&e.path==this.path&&e.query==this.query},pt.prototype.equals=function(e){return this.isSameDocumentAs(e)&&e.fragment==this.fragment},pt.prototype.normalize=function(){this.removeDotSegments(),this.scheme&&(this.scheme=this.scheme.toLowerCase()),this.authority&&(this.authority=this.authority.replace(wt,Ct).replace(yt,gt)),this.path&&(this.path=this.path.replace(yt,gt)),this.query&&(this.query=this.query.replace(yt,gt)),this.fragment&&(this.fragment=this.fragment.replace(yt,gt))};var yt=/%[0-9a-z]{2}/gi,vt=/[a-zA-Z0-9\-\._~]/,wt=/(.*@)?([^@:]*)(:.*)?/;function gt(e){var t=unescape(e);return vt.test(t)?t:e.toUpperCase()}function Ct(e,t,n,r){return(t||"")+n.toLowerCase()+(r||"")}function xt(e,n){if(null===e||"object"!=typeof e)return e;n=t.defaultValue(n,!1);var r=new e.constructor;for(var a in e)if(e.hasOwnProperty(a)){var i=e[a];n&&(i=xt(i,n)),r[a]=i}return r}function Et(e,n,r){r=t.defaultValue(r,!1);var a,i,o,s={},u=t.defined(e),l=t.defined(n);if(u)for(a in e)e.hasOwnProperty(a)&&(i=e[a],l&&r&&"object"==typeof i&&n.hasOwnProperty(a)?(o=n[a],s[a]="object"==typeof o?Et(i,o,r):i):s[a]=i);if(l)for(a in n)n.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(o=n[a],s[a]=o);return s}function _t(e,t){var n;return"undefined"!=typeof document&&(n=document),_t._implementation(e,t,n)}pt.prototype.resolve=function(e){var t=new pt;return this.scheme?(t.scheme=this.scheme,t.authority=this.authority,t.path=this.path,t.query=this.query):(t.scheme=e.scheme,this.authority?(t.authority=this.authority,t.path=this.path,t.query=this.query):(t.authority=e.authority,""==this.path?(t.path=e.path,t.query=this.query||e.query):("/"==this.path.charAt(0)?(t.path=this.path,t.removeDotSegments()):(e.authority&&""==e.path?t.path="/"+this.path:t.path=e.path.substring(0,e.path.lastIndexOf("/")+1)+this.path,t.removeDotSegments()),t.query=this.query))),t.fragment=this.fragment,t},pt.prototype.removeDotSegments=function(){var e,t=this.path.split("/"),n=[],r=""==t[0];r&&t.shift();for(""==t[0]&&t.shift();t.length;)".."==(e=t.shift())?n.pop():"."!=e&&n.push(e);"."!=e&&".."!=e||n.push(""),r&&n.unshift(""),this.path=n.join("/")},pt.prototype.toString=function(){var e="";return this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+this.authority),e+=this.path,this.query&&(e+="?"+this.query),this.fragment&&(e+="#"+this.fragment),e},_t._implementation=function(e,n,r){if(!t.defined(n)){if(void 0===r)return e;n=t.defaultValue(r.baseURI,r.location.href)}var a=new pt(n);return new pt(e).resolve(a).toString()};var Ot,Mt=/^blob:/i;function bt(e){return Mt.test(e)}function St(e){t.defined(Ot)||(Ot=document.createElement("a")),Ot.href=window.location.href;var n=Ot.host,r=Ot.protocol;return Ot.href=e,Ot.href=Ot.href,r!==Ot.protocol||n!==Ot.host}var At=/^data:/i;function Rt(e){return At.test(e)}var Tt=Object.freeze({UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5}),It=Object.freeze({TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3});function qt(e){e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT);var n=t.defaultValue(e.throttleByServer,!1),r=t.defaultValue(e.throttle,!1);this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=t.defaultValue(e.priority,0),this.throttle=r,this.throttleByServer=n,this.type=t.defaultValue(e.type,It.OTHER),this.serverKey=void 0,this.state=Tt.UNISSUED,this.deferred=void 0,this.cancelled=!1}function Ut(e,t,n){this.statusCode=e,this.response=t,this.responseHeaders=n,"string"==typeof this.responseHeaders&&(this.responseHeaders=function(e){var t={};if(!e)return t;for(var n=e.split("\r\n"),r=0;r<n.length;++r){var a=n[r],i=a.indexOf(": ");if(i>0){var o=a.substring(0,i),s=a.substring(i+2);t[o]=s}}return t}(this.responseHeaders))}function zt(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}function Dt(e,t){return t-e}function Pt(e){this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function Nt(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}qt.prototype.cancel=function(){this.cancelled=!0},qt.prototype.clone=function(e){return t.defined(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=this.RequestState.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new qt(this)},Ut.prototype.toString=function(){var e="Request has failed.";return t.defined(this.statusCode)&&(e+=" Status Code: "+this.statusCode),e},Object.defineProperties(zt.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),zt.prototype.addEventListener=function(e,t){this._listeners.push(e),this._scopes.push(t);var n=this;return function(){n.removeEventListener(e,t)}},zt.prototype.removeEventListener=function(e,t){for(var n=this._listeners,r=this._scopes,a=-1,i=0;i<n.length;i++)if(n[i]===e&&r[i]===t){a=i;break}return-1!==a&&(this._insideRaiseEvent?(this._toRemove.push(a),n[a]=void 0,r[a]=void 0):(n.splice(a,1),r.splice(a,1)),!0)},zt.prototype.raiseEvent=function(){var e;this._insideRaiseEvent=!0;var n=this._listeners,r=this._scopes,a=n.length;for(e=0;e<a;e++){var i=n[e];t.defined(i)&&n[e].apply(r[e],arguments)}var o=this._toRemove;if((a=o.length)>0){for(o.sort(Dt),e=0;e<a;e++){var s=o[e];n.splice(s,1),r.splice(s,1)}o.length=0}this._insideRaiseEvent=!1},Object.defineProperties(Pt.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){this._maximumLength=e,this._length>e&&e>0&&(this._length=e,this._array.length=e)}},comparator:{get:function(){return this._comparator}}}),Pt.prototype.reserve=function(e){e=t.defaultValue(e,this._length),this._array.length=e},Pt.prototype.heapify=function(e){e=t.defaultValue(e,0);for(var n=this._length,r=this._comparator,a=this._array,i=-1,o=!0;o;){var s=2*(e+1),u=s-1;i=u<n&&r(a[u],a[e])<0?u:e,s<n&&r(a[s],a[i])<0&&(i=s),i!==e?(Nt(a,i,e),e=i):o=!1}},Pt.prototype.resort=function(){for(var e=this._length,t=Math.ceil(e/2);t>=0;--t)this.heapify(t)},Pt.prototype.insert=function(e){var n,r=this._array,a=this._comparator,i=this._maximumLength,o=this._length++;for(o<r.length?r[o]=e:r.push(e);0!==o;){var s=Math.floor((o-1)/2);if(!(a(r[o],r[s])<0))break;Nt(r,o,s),o=s}return t.defined(i)&&this._length>i&&(n=r[i],this._length=i),n},Pt.prototype.pop=function(e){if(e=t.defaultValue(e,0),0!==this._length){var n=this._array,r=n[e];return Nt(n,e,--this._length),this.heapify(e),r}};var Ft={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},Vt=20,Lt=new Pt({comparator:function(e,t){return e.priority-t.priority}});Lt.maximumLength=Vt,Lt.reserve(Vt);var Bt=[],Wt={},kt="undefined"!=typeof document?new pt(document.location.href):new pt,jt=new zt;function Yt(){}function Xt(e){t.defined(e.priorityFunction)&&(e.priority=e.priorityFunction())}function Jt(e){var n=t.defaultValue(Yt.requestsByServer[e],Yt.maximumRequestsPerServer);return Wt[e]<n}function Ht(e){return e.state===Tt.UNISSUED&&(e.state=Tt.ISSUED,e.deferred=t.when.defer()),e.deferred.promise}function Zt(e){var t=Ht(e);return e.state=Tt.ACTIVE,Bt.push(e),++Ft.numberOfActiveRequests,++Ft.numberOfActiveRequestsEver,++Wt[e.serverKey],e.requestFunction().then(function(e){return function(t){e.state!==Tt.CANCELLED&&(--Ft.numberOfActiveRequests,--Wt[e.serverKey],jt.raiseEvent(),e.state=Tt.RECEIVED,e.deferred.resolve(t))}}(e)).otherwise(function(e){return function(t){e.state!==Tt.CANCELLED&&(++Ft.numberOfFailedRequests,--Ft.numberOfActiveRequests,--Wt[e.serverKey],jt.raiseEvent(t),e.state=Tt.FAILED,e.deferred.reject(t))}}(e)),t}function Gt(e){var n=e.state===Tt.ACTIVE;e.state=Tt.CANCELLED,++Ft.numberOfCancelledRequests,e.deferred.reject(),n&&(--Ft.numberOfActiveRequests,--Wt[e.serverKey],++Ft.numberOfCancelledActiveRequests),t.defined(e.cancelFunction)&&e.cancelFunction()}Yt.maximumRequests=50,Yt.maximumRequestsPerServer=6,Yt.requestsByServer={"api.cesium.com:443":18,"assets.cesium.com:443":18},Yt.throttleRequests=!0,Yt.debugShowStatistics=!1,Yt.requestCompletedEvent=jt,Object.defineProperties(Yt,{statistics:{get:function(){return Ft}},priorityHeapLength:{get:function(){return Vt},set:function(e){if(e<Vt)for(;Lt.length>e;){Gt(Lt.pop())}Vt=e,Lt.maximumLength=e,Lt.reserve(e)}}}),Yt.update=function(){var e,t,n=0,r=Bt.length;for(e=0;e<r;++e)(t=Bt[e]).cancelled&&Gt(t),t.state===Tt.ACTIVE?n>0&&(Bt[e-n]=t):++n;Bt.length-=n;var a=Lt.internalArray,i=Lt.length;for(e=0;e<i;++e)Xt(a[e]);Lt.resort();for(var o=Math.max(Yt.maximumRequests-Bt.length,0),s=0;s<o&&Lt.length>0;)(t=Lt.pop()).cancelled?Gt(t):!t.throttleByServer||Jt(t.serverKey)?(Zt(t),++s):Gt(t);!function(){if(!Yt.debugShowStatistics)return;0===Ft.numberOfActiveRequests&&Ft.lastNumberOfActiveRequests>0&&(Ft.numberOfAttemptedRequests>0&&(console.log("Number of attempted requests: "+Ft.numberOfAttemptedRequests),Ft.numberOfAttemptedRequests=0),Ft.numberOfCancelledRequests>0&&(console.log("Number of cancelled requests: "+Ft.numberOfCancelledRequests),Ft.numberOfCancelledRequests=0),Ft.numberOfCancelledActiveRequests>0&&(console.log("Number of cancelled active requests: "+Ft.numberOfCancelledActiveRequests),Ft.numberOfCancelledActiveRequests=0),Ft.numberOfFailedRequests>0&&(console.log("Number of failed requests: "+Ft.numberOfFailedRequests),Ft.numberOfFailedRequests=0));Ft.lastNumberOfActiveRequests=Ft.numberOfActiveRequests}()},Yt.getServerKey=function(e){var n=new pt(e).resolve(kt);n.normalize();var r=n.authority;/:/.test(r)||(r=r+":"+("https"===n.scheme?"443":"80"));var a=Wt[r];return t.defined(a)||(Wt[r]=0),r},Yt.request=function(e){if(Rt(e.url)||bt(e.url))return jt.raiseEvent(),e.state=Tt.RECEIVED,e.requestFunction();if(++Ft.numberOfAttemptedRequests,t.defined(e.serverKey)||(e.serverKey=Yt.getServerKey(e.url)),!Yt.throttleRequests||!e.throttleByServer||Jt(e.serverKey)){if(!Yt.throttleRequests||!e.throttle)return Zt(e);if(!(Bt.length>=Yt.maximumRequests)){Xt(e);var n=Lt.insert(e);if(t.defined(n)){if(n===e)return;Gt(n)}return Ht(e)}}},Yt.clearForSpecs=function(){for(;Lt.length>0;){Gt(Lt.pop())}for(var e=Bt.length,t=0;t<e;++t)Gt(Bt[t]);Bt.length=0,Wt={},Ft.numberOfAttemptedRequests=0,Ft.numberOfActiveRequests=0,Ft.numberOfCancelledRequests=0,Ft.numberOfCancelledActiveRequests=0,Ft.numberOfFailedRequests=0,Ft.numberOfActiveRequestsEver=0,Ft.lastNumberOfActiveRequests=0},Yt.numberOfActiveRequestsByServer=function(e){return Wt[e]},Yt.requestHeap=Lt;var Qt={},Kt={};Qt.add=function(e,n){var r=e.toLowerCase()+":"+n;t.defined(Kt[r])||(Kt[r]=!0)},Qt.remove=function(e,n){var r=e.toLowerCase()+":"+n;t.defined(Kt[r])&&delete Kt[r]},Qt.contains=function(e){var n=function(e){var n=new pt(e);n.normalize();var r=n.getAuthority();if(t.defined(r)){if(-1!==r.indexOf("@")){var a=r.split("@");r=a[1]}if(-1===r.indexOf(":")){var i=n.getScheme();if(t.defined(i)||(i=(i=window.location.protocol).substring(0,i.length-1)),"http"===i)r+=":80";else{if("https"!==i)return;r+=":443"}}return r}}(e);return!(!t.defined(n)||!t.defined(Kt[n]))},Qt.clear=function(){Kt={}};var $t,en=function(){try{var e=new XMLHttpRequest;return e.open("GET","#",!0),e.responseType="blob","blob"===e.responseType}catch(e){return!1}}();function tn(e,n,r,a){var i,o=e.query;if(!t.defined(o)||0===o.length)return{};if(-1===o.indexOf("=")){var s={};s[o]=void 0,i=s}else i=function(e){var n={};if(""===e)return n;for(var r=e.replace(/\+/g,"%20").split(/[&;]/),a=0,i=r.length;a<i;++a){var o=r[a].split("="),s=decodeURIComponent(o[0]),u=o[1];u=t.defined(u)?decodeURIComponent(u):"";var l=n[s];"string"==typeof l?n[s]=[l,u]:Array.isArray(l)?l.push(u):n[s]=u}return n}(o);n._queryParameters=r?on(i,n._queryParameters,a):i,e.query=void 0}function nn(e,n){var r=n._queryParameters,a=Object.keys(r);1!==a.length||t.defined(r[a[0]])?e.query=function(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],a=encodeURIComponent(n)+"=";if(Array.isArray(r))for(var i=0,o=r.length;i<o;++i)t+=a+encodeURIComponent(r[i])+"&";else t+=a+encodeURIComponent(r)+"&"}return t.slice(0,-1)}(r):e.query=a[0]}function rn(e,n){return t.defined(e)?t.defined(e.clone)?e.clone():xt(e):n}function an(e){if(e.state===Tt.ISSUED||e.state===Tt.ACTIVE)throw new i.RuntimeError("The Resource is already being fetched.");e.state=Tt.UNISSUED,e.deferred=void 0}function on(e,n,r){if(!r)return Et(e,n);var a=xt(e,!0);for(var i in n)if(n.hasOwnProperty(i)){var o=a[i],s=n[i];t.defined(o)?(Array.isArray(o)||(o=a[i]=[o]),a[i]=o.concat(s)):a[i]=Array.isArray(s)?s.slice():s}return a}function sn(e){"string"==typeof(e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT))&&(e={url:e}),this._url=void 0,this._templateValues=rn(e.templateValues,{}),this._queryParameters=rn(e.queryParameters,{}),this.headers=rn(e.headers,{}),this.request=t.defaultValue(e.request,new qt),this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=t.defaultValue(e.retryAttempts,0),this._retryCount=0;var n=new pt(e.url);tn(n,this,!0,!0),n.fragment=void 0,this._url=n.toString()}function un(e){var n=e.resource,r=e.flipY,a=e.preferImageBitmap,i=n.request;i.url=n.url,i.requestFunction=function(){var e=!1;n.isDataUri||n.isBlobUri||(e=n.isCrossOriginUrl);var o=t.when.defer();return sn._Implementations.createImage(i,e,o,r,a),o.promise};var o=Yt.request(i);if(t.defined(o))return o.otherwise((function(e){return i.state!==Tt.FAILED?t.when.reject(e):n.retryOnError(e).then((function(o){return o?(i.state=Tt.UNISSUED,i.deferred=void 0,un({resource:n,flipY:r,preferImageBitmap:a})):t.when.reject(e)}))}))}function ln(e,n,r){var a={};a[n]=r,e.setQueryParameters(a);var i=e.request;i.url=e.url,i.requestFunction=function(){var n=t.when.defer();return window[r]=function(e){n.resolve(e);try{delete window[r]}catch(e){window[r]=void 0}},sn._Implementations.loadAndExecuteScript(e.url,r,n),n.promise};var o=Yt.request(i);if(t.defined(o))return o.otherwise((function(a){return i.state!==Tt.FAILED?t.when.reject(a):e.retryOnError(a).then((function(o){return o?(i.state=Tt.UNISSUED,i.deferred=void 0,ln(e,n,r)):t.when.reject(a)}))}))}sn.createIfNeeded=function(e){return e instanceof sn?e.getDerivedResource({request:e.request}):"string"!=typeof e?e:new sn({url:e})},sn.supportsImageBitmapOptions=function(){if(t.defined($t))return $t;if("function"!=typeof createImageBitmap)return $t=t.when.resolve(!1);return $t=sn.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWP4////fwAJ+wP9CNHoHgAAAABJRU5ErkJggg=="}).then((function(e){return createImageBitmap(e,{imageOrientation:"flipY",premultiplyAlpha:"none"})})).then((function(e){return!0})).otherwise((function(){return!1}))},Object.defineProperties(sn,{isBlobSupported:{get:function(){return en}}}),Object.defineProperties(sn.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(e){var t=new pt(e);tn(t,this,!1),t.fragment=void 0,this._url=t.toString()}},extension:{get:function(){return function(e){var t=new pt(e);t.normalize();var n=t.path,r=n.lastIndexOf("/");return-1!==r&&(n=n.substr(r+1)),r=n.lastIndexOf("."),-1===r?"":n.substr(r+1)}(this._url)}},isDataUri:{get:function(){return Rt(this._url)}},isBlobUri:{get:function(){return bt(this._url)}},isCrossOriginUrl:{get:function(){return St(this._url)}},hasHeaders:{get:function(){return Object.keys(this.headers).length>0}}}),sn.prototype.getUrlComponent=function(e,n){if(this.isDataUri)return this._url;var r=new pt(this._url);e&&nn(r,this);var a=r.toString().replace(/%7B/g,"{").replace(/%7D/g,"}"),i=this._templateValues;return a=a.replace(/{(.*?)}/g,(function(e,n){var r=i[n];return t.defined(r)?encodeURIComponent(r):e})),n&&t.defined(this.proxy)&&(a=this.proxy.getURL(a)),a},sn.prototype.setQueryParameters=function(e,t){this._queryParameters=t?on(this._queryParameters,e,!1):on(e,this._queryParameters,!1)},sn.prototype.appendQueryParameters=function(e){this._queryParameters=on(e,this._queryParameters,!0)},sn.prototype.setTemplateValues=function(e,t){this._templateValues=t?Et(this._templateValues,e):Et(e,this._templateValues)},sn.prototype.getDerivedResource=function(e){var n=this.clone();if(n._retryCount=0,t.defined(e.url)){var r=new pt(e.url);tn(r,n,!0,t.defaultValue(e.preserveQueryParameters,!1)),r.fragment=void 0,n._url=r.resolve(new pt(_t(this._url))).toString()}return t.defined(e.queryParameters)&&(n._queryParameters=Et(e.queryParameters,n._queryParameters)),t.defined(e.templateValues)&&(n._templateValues=Et(e.templateValues,n.templateValues)),t.defined(e.headers)&&(n.headers=Et(e.headers,n.headers)),t.defined(e.proxy)&&(n.proxy=e.proxy),t.defined(e.request)&&(n.request=e.request),t.defined(e.retryCallback)&&(n.retryCallback=e.retryCallback),t.defined(e.retryAttempts)&&(n.retryAttempts=e.retryAttempts),n},sn.prototype.retryOnError=function(e){var n=this.retryCallback;if("function"!=typeof n||this._retryCount>=this.retryAttempts)return t.when(!1);var r=this;return t.when(n(this,e)).then((function(e){return++r._retryCount,e}))},sn.prototype.clone=function(e){return t.defined(e)||(e=new sn({url:this._url})),e._url=this._url,e._queryParameters=xt(this._queryParameters),e._templateValues=xt(this._templateValues),e.headers=xt(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e},sn.prototype.getBaseUri=function(e){return function(e,n){var r="",a=e.lastIndexOf("/");return-1!==a&&(r=e.substring(0,a+1)),n?(e=new pt(e),t.defined(e.query)&&(r+="?"+e.query),t.defined(e.fragment)&&(r+="#"+e.fragment),r):r}(this.getUrlComponent(e),e)},sn.prototype.appendForwardSlash=function(){var e;this._url=(0!==(e=this._url).length&&"/"===e[e.length-1]||(e+="/"),e)},sn.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},sn.fetchArrayBuffer=function(e){return new sn(e).fetchArrayBuffer()},sn.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},sn.fetchBlob=function(e){return new sn(e).fetchBlob()},sn.prototype.fetchImage=function(e){e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT);var n=t.defaultValue(e.preferImageBitmap,!1),r=t.defaultValue(e.preferBlob,!1),a=t.defaultValue(e.flipY,!1);if(an(this.request),!en||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!r)return un({resource:this,flipY:a,preferImageBitmap:n});var i,o,s,u=this.fetchBlob();return t.defined(u)?sn.supportsImageBitmapOptions().then((function(e){return i=e&&n,u})).then((function(e){if(t.defined(e)){if(s=e,i)return sn.createImageBitmapFromBlob(e,{flipY:a,premultiplyAlpha:!1});var n=window.URL.createObjectURL(e);return un({resource:o=new sn({url:n}),flipY:a,preferImageBitmap:!1})}})).then((function(e){if(t.defined(e))return e.blob=s,i||window.URL.revokeObjectURL(o.url),e})).otherwise((function(e){return t.defined(o)&&window.URL.revokeObjectURL(o.url),e.blob=s,t.when.reject(e)})):void 0},sn.fetchImage=function(e){return new sn(e).fetchImage({flipY:e.flipY,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})},sn.prototype.fetchText=function(){return this.fetch({responseType:"text"})},sn.fetchText=function(e){return new sn(e).fetchText()},sn.prototype.fetchJson=function(){var e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(t.defined(e))return e.then((function(e){if(t.defined(e))return JSON.parse(e)}))},sn.fetchJson=function(e){return new sn(e).fetchJson()},sn.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},sn.fetchXML=function(e){return new sn(e).fetchXML()},sn.prototype.fetchJsonp=function(e){var n;e=t.defaultValue(e,"callback"),an(this.request);do{n="loadJsonp"+Math.random().toString().substring(2,8)}while(t.defined(window[n]));return ln(this,e,n)},sn.fetchJsonp=function(e){return new sn(e).fetchJsonp(e.callbackParameterName)},sn.prototype._makeRequest=function(e){var n=this;an(n.request);var r=n.request;r.url=n.url,r.requestFunction=function(){var a=e.responseType,i=Et(e.headers,n.headers),o=e.overrideMimeType,s=e.method,u=e.data,l=t.when.defer(),f=sn._Implementations.loadWithXhr(n.url,a,s,u,i,l,o);return t.defined(f)&&t.defined(f.abort)&&(r.cancelFunction=function(){f.abort()}),l.promise};var a=Yt.request(r);if(t.defined(a))return a.then((function(e){return e})).otherwise((function(a){return r.state!==Tt.FAILED?t.when.reject(a):n.retryOnError(a).then((function(i){return i?(r.state=Tt.UNISSUED,r.deferred=void 0,n.fetch(e)):t.when.reject(a)}))}))};var fn=/^data:(.*?)(;base64)?,(.*)$/;function cn(e,t){var n=decodeURIComponent(t);return e?atob(n):n}function dn(e,t){for(var n=cn(e,t),r=new ArrayBuffer(n.length),a=new Uint8Array(r),i=0;i<n.length;i++)a[i]=n.charCodeAt(i);return r}function hn(e,t){switch(t){case"text":return e.toString("utf8");case"json":return JSON.parse(e.toString("utf8"));default:return new Uint8Array(e).buffer}}sn.prototype.fetch=function(e){return(e=rn(e,{})).method="GET",this._makeRequest(e)},sn.fetch=function(e){return new sn(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},sn.prototype.delete=function(e){return(e=rn(e,{})).method="DELETE",this._makeRequest(e)},sn.delete=function(e){return new sn(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})},sn.prototype.head=function(e){return(e=rn(e,{})).method="HEAD",this._makeRequest(e)},sn.head=function(e){return new sn(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},sn.prototype.options=function(e){return(e=rn(e,{})).method="OPTIONS",this._makeRequest(e)},sn.options=function(e){return new sn(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},sn.prototype.post=function(e,t){return n.Check.defined("data",e),(t=rn(t,{})).method="POST",t.data=e,this._makeRequest(t)},sn.post=function(e){return new sn(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},sn.prototype.put=function(e,t){return n.Check.defined("data",e),(t=rn(t,{})).method="PUT",t.data=e,this._makeRequest(t)},sn.put=function(e){return new sn(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},sn.prototype.patch=function(e,t){return n.Check.defined("data",e),(t=rn(t,{})).method="PATCH",t.data=e,this._makeRequest(t)},sn.patch=function(e){return new sn(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},sn._Implementations={},sn._Implementations.createImage=function(e,n,r,a,o){var s=e.url;sn.supportsImageBitmapOptions().then((function(u){if(u&&o){var l=t.when.defer(),f=sn._Implementations.loadWithXhr(s,"blob","GET",void 0,void 0,l,void 0,void 0,void 0);return t.defined(f)&&t.defined(f.abort)&&(e.cancelFunction=function(){f.abort()}),l.promise.then((function(e){if(t.defined(e))return sn.createImageBitmapFromBlob(e,{flipY:a,premultiplyAlpha:!1});r.reject(new i.RuntimeError("Successfully retrieved "+s+" but it contained no content."))})).then(r.resolve)}!function(e,t,n){var r=new Image;r.onload=function(){n.resolve(r)},r.onerror=function(e){n.reject(e)},t&&(Qt.contains(e)?r.crossOrigin="use-credentials":r.crossOrigin=""),r.src=e}(s,n,r)})).otherwise(r.reject)},sn.createImageBitmapFromBlob=function(e,t){return n.Check.defined("options",t),n.Check.typeOf.bool("options.flipY",t.flipY),n.Check.typeOf.bool("options.premultiplyAlpha",t.premultiplyAlpha),createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"none",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none"})};var pn="undefined"==typeof XMLHttpRequest;function mn(e){if(e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=t.defaultValue(e.addNewLeapSeconds,!0),t.defined(e.data))vn(this,e.data);else if(t.defined(e.url)){var n=sn.createIfNeeded(e.url),r=this;this._downloadPromise=t.when(n.fetchJson(),(function(e){vn(r,e)}),(function(){r._dataError="An error occurred while retrieving the EOP data from the URL "+n.url+"."}))}else vn(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function yn(e,t){return dt.compare(e.julianDate,t)}function vn(e,n){if(t.defined(n.columnNames))if(t.defined(n.samples)){var r=n.columnNames.indexOf("modifiedJulianDateUtc"),a=n.columnNames.indexOf("xPoleWanderRadians"),i=n.columnNames.indexOf("yPoleWanderRadians"),o=n.columnNames.indexOf("ut1MinusUtcSeconds"),s=n.columnNames.indexOf("xCelestialPoleOffsetRadians"),u=n.columnNames.indexOf("yCelestialPoleOffsetRadians"),l=n.columnNames.indexOf("taiMinusUtcSeconds");if(r<0||a<0||i<0||o<0||s<0||u<0||l<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var f,c=e._samples=n.samples,d=e._dates=[];e._dateColumn=r,e._xPoleWanderRadiansColumn=a,e._yPoleWanderRadiansColumn=i,e._ut1MinusUtcSecondsColumn=o,e._xCelestialPoleOffsetRadiansColumn=s,e._yCelestialPoleOffsetRadiansColumn=u,e._taiMinusUtcSecondsColumn=l,e._columnCount=n.columnNames.length,e._lastIndex=void 0;for(var h=e._addNewLeapSeconds,p=0,m=c.length;p<m;p+=e._columnCount){var y=c[p+r],v=c[p+l],w=new dt(y+Je.MODIFIED_JULIAN_DATE_DIFFERENCE,v,He.TAI);if(d.push(w),h){if(v!==f&&t.defined(f)){var g=dt.leapSeconds,C=Be(g,w,yn);if(C<0){var x=new Xe(w,v);g.splice(~C,0,x)}}f=v}}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function wn(e,t,n,r,a){var i=n*r;a.xPoleWander=t[i+e._xPoleWanderRadiansColumn],a.yPoleWander=t[i+e._yPoleWanderRadiansColumn],a.xPoleOffset=t[i+e._xCelestialPoleOffsetRadiansColumn],a.yPoleOffset=t[i+e._yCelestialPoleOffsetRadiansColumn],a.ut1MinusUtc=t[i+e._ut1MinusUtcSecondsColumn]}function gn(e,t,n){return t+e*(n-t)}function Cn(e,t,n,r,a,i,o){var s=e._columnCount;if(i>t.length-1)return o.xPoleWander=0,o.yPoleWander=0,o.xPoleOffset=0,o.yPoleOffset=0,o.ut1MinusUtc=0,o;var u=t[a],l=t[i];if(u.equals(l)||r.equals(u))return wn(e,n,a,s,o),o;if(r.equals(l))return wn(e,n,i,s,o),o;var f=dt.secondsDifference(r,u)/dt.secondsDifference(l,u),c=a*s,d=i*s,h=n[c+e._ut1MinusUtcSecondsColumn],p=n[d+e._ut1MinusUtcSecondsColumn],m=p-h;if(m>.5||m<-.5){var y=n[c+e._taiMinusUtcSecondsColumn],v=n[d+e._taiMinusUtcSecondsColumn];y!==v&&(l.equals(r)?h=p:p-=v-y)}return o.xPoleWander=gn(f,n[c+e._xPoleWanderRadiansColumn],n[d+e._xPoleWanderRadiansColumn]),o.yPoleWander=gn(f,n[c+e._yPoleWanderRadiansColumn],n[d+e._yPoleWanderRadiansColumn]),o.xPoleOffset=gn(f,n[c+e._xCelestialPoleOffsetRadiansColumn],n[d+e._xCelestialPoleOffsetRadiansColumn]),o.yPoleOffset=gn(f,n[c+e._yCelestialPoleOffsetRadiansColumn],n[d+e._yCelestialPoleOffsetRadiansColumn]),o.ut1MinusUtc=gn(f,h,p),o}function xn(e,n,r){this.heading=t.defaultValue(e,0),this.pitch=t.defaultValue(n,0),this.roll=t.defaultValue(r,0)}sn._Implementations.loadWithXhr=function(e,n,r,a,o,s,u){var l=fn.exec(e);if(null===l){if(!pn){var f=new XMLHttpRequest;if(Qt.contains(e)&&(f.withCredentials=!0),f.open(r,e,!0),t.defined(u)&&t.defined(f.overrideMimeType)&&f.overrideMimeType(u),t.defined(o))for(var c in o)o.hasOwnProperty(c)&&f.setRequestHeader(c,o[c]);t.defined(n)&&(f.responseType=n);var d=!1;return"string"==typeof e&&(d=0===e.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),f.onload=function(){if(!(f.status<200||f.status>=300)||d&&0===f.status){var e=f.response,a=f.responseType;if("HEAD"===r||"OPTIONS"===r){var o=f.getAllResponseHeaders().trim().split(/[\r\n]+/),u={};return o.forEach((function(e){var t=e.split(": "),n=t.shift();u[n]=t.join(": ")})),void s.resolve(u)}if(204===f.status)s.resolve();else if(!t.defined(e)||t.defined(n)&&a!==n)if("json"===n&&"string"==typeof e)try{s.resolve(JSON.parse(e))}catch(e){s.reject(e)}else(""===a||"document"===a)&&t.defined(f.responseXML)&&f.responseXML.hasChildNodes()?s.resolve(f.responseXML):""!==a&&"text"!==a||!t.defined(f.responseText)?s.reject(new i.RuntimeError("Invalid XMLHttpRequest response type.")):s.resolve(f.responseText);else s.resolve(e)}else s.reject(new Ut(f.status,f.response,f.getAllResponseHeaders()))},f.onerror=function(e){s.reject(new Ut)},f.send(a),f}!function(e,t,n,r,a,o,s){var u=require("url").parse(e),l="https:"===u.protocol?require("https"):require("http"),f=require("zlib"),c={protocol:u.protocol,hostname:u.hostname,port:u.port,path:u.path,query:u.query,method:n,headers:a};l.request(c).on("response",(function(e){if(e.statusCode<200||e.statusCode>=300)o.reject(new Ut(e.statusCode,e,e.headers));else{var n=[];e.on("data",(function(e){n.push(e)})),e.on("end",(function(){var r=Buffer.concat(n);"gzip"===e.headers["content-encoding"]?f.gunzip(r,(function(e,n){e?o.reject(new i.RuntimeError("Error decompressing response.")):o.resolve(hn(n,t))})):o.resolve(hn(r,t))}))}})).on("error",(function(e){o.reject(new Ut)})).end()}(e,n,r,0,o,s)}else s.resolve(function(e,n){n=t.defaultValue(n,"");var r=e[1],a=!!e[2],i=e[3];switch(n){case"":case"text":return cn(a,i);case"arraybuffer":return dn(a,i);case"blob":var o=dn(a,i);return new Blob([o],{type:r});case"document":return(new DOMParser).parseFromString(cn(a,i),r);case"json":return JSON.parse(cn(a,i))}}(l,n))},sn._Implementations.loadAndExecuteScript=function(e,n,r){return function(e){var n=t.when.defer(),r=document.createElement("script");r.async=!0,r.src=e;var a=document.getElementsByTagName("head")[0];return r.onload=function(){r.onload=void 0,a.removeChild(r),n.resolve()},r.onerror=function(e){n.reject(e)},a.appendChild(r),n.promise}(e).otherwise(r.reject)},sn._DefaultImplementations={},sn._DefaultImplementations.createImage=sn._Implementations.createImage,sn._DefaultImplementations.loadWithXhr=sn._Implementations.loadWithXhr,sn._DefaultImplementations.loadAndExecuteScript=sn._Implementations.loadAndExecuteScript,sn.DEFAULT=Object.freeze(new sn({url:"undefined"==typeof document?"":document.location.href.split("?")[0]})),mn.NONE=Object.freeze({getPromiseToLoad:function(){return t.when()},compute:function(e,n){return t.defined(n)?(n.xPoleWander=0,n.yPoleWander=0,n.xPoleOffset=0,n.yPoleOffset=0,n.ut1MinusUtc=0):n=new We(0,0,0,0,0),n}}),mn.prototype.getPromiseToLoad=function(){return t.when(this._downloadPromise)},mn.prototype.compute=function(e,n){if(t.defined(this._samples)){if(t.defined(n)||(n=new We(0,0,0,0,0)),0===this._samples.length)return n.xPoleWander=0,n.yPoleWander=0,n.xPoleOffset=0,n.yPoleOffset=0,n.ut1MinusUtc=0,n;var r=this._dates,a=this._lastIndex,o=0,s=0;if(t.defined(a)){var u=r[a],l=r[a+1],f=dt.lessThanOrEquals(u,e),c=!t.defined(l),d=c||dt.greaterThanOrEquals(l,e);if(f&&d)return o=a,!c&&l.equals(e)&&++o,s=o+1,Cn(this,r,this._samples,e,o,s,n),n}var h=Be(r,e,dt.compare,this._dateColumn);return h>=0?(h<r.length-1&&r[h+1].equals(e)&&++h,o=h,s=h):(o=(s=~h)-1)<0&&(o=0),this._lastIndex=o,Cn(this,r,this._samples,e,o,s,n),n}if(t.defined(this._dataError))throw new i.RuntimeError(this._dataError)},xn.fromQuaternion=function(e,n){t.defined(n)||(n=new xn);var a=2*(e.w*e.y-e.z*e.x),i=1-2*(e.x*e.x+e.y*e.y),o=2*(e.w*e.x+e.y*e.z),s=1-2*(e.y*e.y+e.z*e.z),u=2*(e.w*e.z+e.x*e.y);return n.heading=-Math.atan2(u,s),n.roll=Math.atan2(o,i),n.pitch=-r.CesiumMath.asinClamped(a),n},xn.fromDegrees=function(e,n,a,i){return t.defined(i)||(i=new xn),i.heading=e*r.CesiumMath.RADIANS_PER_DEGREE,i.pitch=n*r.CesiumMath.RADIANS_PER_DEGREE,i.roll=a*r.CesiumMath.RADIANS_PER_DEGREE,i},xn.clone=function(e,n){if(t.defined(e))return t.defined(n)?(n.heading=e.heading,n.pitch=e.pitch,n.roll=e.roll,n):new xn(e.heading,e.pitch,e.roll)},xn.equals=function(e,n){return e===n||t.defined(e)&&t.defined(n)&&e.heading===n.heading&&e.pitch===n.pitch&&e.roll===n.roll},xn.equalsEpsilon=function(e,n,a,i){return e===n||t.defined(e)&&t.defined(n)&&r.CesiumMath.equalsEpsilon(e.heading,n.heading,a,i)&&r.CesiumMath.equalsEpsilon(e.pitch,n.pitch,a,i)&&r.CesiumMath.equalsEpsilon(e.roll,n.roll,a,i)},xn.prototype.clone=function(e){return xn.clone(this,e)},xn.prototype.equals=function(e){return xn.equals(this,e)},xn.prototype.equalsEpsilon=function(e,t,n){return xn.equalsEpsilon(this,e,t,n)},xn.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var En,_n,On,Mn=/((?:.*\/)|^)Cesium\.js$/;function bn(e){return"undefined"==typeof document?e:(t.defined(En)||(En=document.createElement("a")),En.href=e,En.href=En.href,En.href)}function Sn(){return t.defined(_n)||(e="undefined"!=typeof CESIUM_BASE_URL?CESIUM_BASE_URL:"object"==typeof define&&t.defined(define.amd)&&!define.amd.toUrlUndefined&&t.defined(require.toUrl)?_t("..",Tn("Core/buildModuleUrl.js")):function(){for(var e=document.getElementsByTagName("script"),t=0,n=e.length;t<n;++t){var r=e[t].getAttribute("src"),a=Mn.exec(r);if(null!==a)return a[1]}}(),(_n=new sn({url:bn(e)})).appendForwardSlash()),_n;var e}function An(e){return bn(require.toUrl("../"+e))}function Rn(e){return Sn().getDerivedResource({url:e}).url}function Tn(e){return t.defined(On)||(On="object"==typeof define&&t.defined(define.amd)&&!define.amd.toUrlUndefined&&t.defined(require.toUrl)?An:Rn),On(e)}function In(e,t,n){this.x=e,this.y=t,this.s=n}function qn(e){e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT),this._xysFileUrlTemplate=sn.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=t.defaultValue(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=t.defaultValue(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new dt(this._sampleZeroJulianEphemerisDate,0,He.TAI),this._stepSizeDays=t.defaultValue(e.stepSizeDays,1),this._samplesPerXysFile=t.defaultValue(e.samplesPerXysFile,1e3),this._totalSamples=t.defaultValue(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var n=this._interpolationOrder,r=this._denominators=new Array(n+1),a=this._xTable=new Array(n+1),i=Math.pow(this._stepSizeDays,n),o=0;o<=n;++o){r[o]=i,a[o]=o*this._stepSizeDays;for(var s=0;s<=n;++s)s!==o&&(r[o]*=o-s);r[o]=1/r[o]}this._work=new Array(n+1),this._coef=new Array(n+1)}Tn._cesiumScriptRegex=Mn,Tn._buildModuleUrlFromBaseUrl=Rn,Tn._clearBaseResource=function(){_n=void 0},Tn.setBaseUrl=function(e){_n=sn.DEFAULT.getDerivedResource({url:e})},Tn.getCesiumBaseUrl=Sn;var Un=new dt(0,0,He.TAI);function zn(e,t,n){var r=Un;return r.dayNumber=t,r.secondsOfDay=n,dt.daysDifference(r,e._sampleZeroDateTT)}function Dn(e,n){if(e._chunkDownloadsInProgress[n])return e._chunkDownloadsInProgress[n];var r,a=t.when.defer();e._chunkDownloadsInProgress[n]=a;var i=e._xysFileUrlTemplate;return r=t.defined(i)?i.getDerivedResource({templateValues:{0:n}}):new sn({url:Tn("Assets/IAU2006_XYS/IAU2006_XYS_"+n+".json")}),t.when(r.fetchJson(),(function(t){e._chunkDownloadsInProgress[n]=!1;for(var r=e._samples,i=t.samples,o=n*e._samplesPerXysFile*3,s=0,u=i.length;s<u;++s)r[o+s]=i[s];a.resolve()})),a.promise}qn.prototype.preload=function(e,n,r,a){var i=zn(this,e,n),o=zn(this,r,a),s=i/this._stepSizeDays-this._interpolationOrder/2|0;s<0&&(s=0);var u=o/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;u>=this._totalSamples&&(u=this._totalSamples-1);for(var l=s/this._samplesPerXysFile|0,f=u/this._samplesPerXysFile|0,c=[],d=l;d<=f;++d)c.push(Dn(this,d));return t.when.all(c)},qn.prototype.computeXysRadians=function(e,n,r){var a=zn(this,e,n);if(!(a<0)){var i=a/this._stepSizeDays|0;if(!(i>=this._totalSamples)){var o=this._interpolationOrder,s=i-(o/2|0);s<0&&(s=0);var u=s+o;u>=this._totalSamples&&(s=(u=this._totalSamples-1)-o)<0&&(s=0);var l=!1,f=this._samples;if(t.defined(f[3*s])||(Dn(this,s/this._samplesPerXysFile|0),l=!0),t.defined(f[3*u])||(Dn(this,u/this._samplesPerXysFile|0),l=!0),!l){t.defined(r)?(r.x=0,r.y=0,r.s=0):r=new In(0,0,0);var c,d,h=a-s*this._stepSizeDays,p=this._work,m=this._denominators,y=this._coef,v=this._xTable;for(c=0;c<=o;++c)p[c]=h-v[c];for(c=0;c<=o;++c){for(y[c]=1,d=0;d<=o;++d)d!==c&&(y[c]*=p[d]);y[c]*=m[c];var w=3*(s+c);r.x+=y[c]*f[w++],r.y+=y[c]*f[w++],r.s+=y[c]*f[w]}return r}}}};var Pn={},Nn={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},Fn={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Vn={},Ln={east:new a.Cartesian3,north:new a.Cartesian3,up:new a.Cartesian3,west:new a.Cartesian3,south:new a.Cartesian3,down:new a.Cartesian3},Bn=new a.Cartesian3,Wn=new a.Cartesian3,kn=new a.Cartesian3;Pn.localFrameToFixedFrameGenerator=function(e,i){if(!Nn.hasOwnProperty(e)||!Nn[e].hasOwnProperty(i))throw new n.DeveloperError("firstAxis and secondAxis must be east, north, up, west, south or down.");var o,s=Nn[e][i],u=e+i;return t.defined(Vn[u])?o=Vn[u]:(o=function(n,o,u){if(t.defined(u)||(u=new E),a.Cartesian3.equalsEpsilon(n,a.Cartesian3.ZERO,r.CesiumMath.EPSILON14))a.Cartesian3.unpack(Fn[e],0,Bn),a.Cartesian3.unpack(Fn[i],0,Wn),a.Cartesian3.unpack(Fn[s],0,kn);else if(r.CesiumMath.equalsEpsilon(n.x,0,r.CesiumMath.EPSILON14)&&r.CesiumMath.equalsEpsilon(n.y,0,r.CesiumMath.EPSILON14)){var l=r.CesiumMath.sign(n.z);a.Cartesian3.unpack(Fn[e],0,Bn),"east"!==e&&"west"!==e&&a.Cartesian3.multiplyByScalar(Bn,l,Bn),a.Cartesian3.unpack(Fn[i],0,Wn),"east"!==i&&"west"!==i&&a.Cartesian3.multiplyByScalar(Wn,l,Wn),a.Cartesian3.unpack(Fn[s],0,kn),"east"!==s&&"west"!==s&&a.Cartesian3.multiplyByScalar(kn,l,kn)}else{(o=t.defaultValue(o,a.Ellipsoid.WGS84)).geodeticSurfaceNormal(n,Ln.up);var f=Ln.up,c=Ln.east;c.x=-n.y,c.y=n.x,c.z=0,a.Cartesian3.normalize(c,Ln.east),a.Cartesian3.cross(f,c,Ln.north),a.Cartesian3.multiplyByScalar(Ln.up,-1,Ln.down),a.Cartesian3.multiplyByScalar(Ln.east,-1,Ln.west),a.Cartesian3.multiplyByScalar(Ln.north,-1,Ln.south),Bn=Ln[e],Wn=Ln[i],kn=Ln[s]}return u[0]=Bn.x,u[1]=Bn.y,u[2]=Bn.z,u[3]=0,u[4]=Wn.x,u[5]=Wn.y,u[6]=Wn.z,u[7]=0,u[8]=kn.x,u[9]=kn.y,u[10]=kn.z,u[11]=0,u[12]=n.x,u[13]=n.y,u[14]=n.z,u[15]=1,u},Vn[u]=o),o},Pn.eastNorthUpToFixedFrame=Pn.localFrameToFixedFrameGenerator("east","north"),Pn.northEastDownToFixedFrame=Pn.localFrameToFixedFrameGenerator("north","east"),Pn.northUpEastToFixedFrame=Pn.localFrameToFixedFrameGenerator("north","up"),Pn.northWestUpToFixedFrame=Pn.localFrameToFixedFrameGenerator("north","west");var jn=new ce,Yn=new a.Cartesian3(1,1,1),Xn=new E;Pn.headingPitchRollToFixedFrame=function(e,n,r,i,o){i=t.defaultValue(i,Pn.eastNorthUpToFixedFrame);var s=ce.fromHeadingPitchRoll(n,jn),u=E.fromTranslationQuaternionRotationScale(a.Cartesian3.ZERO,s,Yn,Xn);return o=i(e,r,o),E.multiply(o,u,o)};var Jn=new E,Hn=new o;Pn.headingPitchRollQuaternion=function(e,t,n,r,a){var i=Pn.headingPitchRollToFixedFrame(e,t,n,r,Jn),o=E.getMatrix3(i,Hn);return ce.fromRotationMatrix(o,a)};var Zn=new a.Cartesian3(1,1,1),Gn=new a.Cartesian3,Qn=new E,Kn=new E,$n=new o,er=new ce;Pn.fixedFrameToHeadingPitchRoll=function(e,n,r,i){n=t.defaultValue(n,a.Ellipsoid.WGS84),r=t.defaultValue(r,Pn.eastNorthUpToFixedFrame),t.defined(i)||(i=new xn);var o=E.getTranslation(e,Gn);if(a.Cartesian3.equals(o,a.Cartesian3.ZERO))return i.heading=0,i.pitch=0,i.roll=0,i;var s=E.inverseTransformation(r(o,n,Qn),Qn),u=E.setScale(e,Zn,Kn);u=E.setTranslation(u,a.Cartesian3.ZERO,u),s=E.multiply(s,u,s);var l=ce.fromRotationMatrix(E.getMatrix3(s,$n),er);return l=ce.normalize(l,l),xn.fromQuaternion(l,i)};var tr=r.CesiumMath.TWO_PI/86400,nr=new dt;Pn.computeTemeToPseudoFixedMatrix=function(e,n){var a,i=(nr=dt.addSeconds(e,-dt.computeTaiMinusUtc(e),nr)).dayNumber,s=nr.secondsOfDay,u=i-2451545,l=(24110.54841+(a=s>=43200?(u+.5)/Je.DAYS_PER_JULIAN_CENTURY:(u-.5)/Je.DAYS_PER_JULIAN_CENTURY)*(8640184.812866+a*(.093104+-62e-7*a)))*tr%r.CesiumMath.TWO_PI+(72921158553e-15+11772758384668e-32*(i-2451545.5))*((s+.5*Je.SECONDS_PER_DAY)%Je.SECONDS_PER_DAY),f=Math.cos(l),c=Math.sin(l);return t.defined(n)?(n[0]=f,n[1]=-c,n[2]=0,n[3]=c,n[4]=f,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n):new o(f,c,0,-c,f,0,0,0,1)},Pn.iau2006XysData=new qn,Pn.earthOrientationParameters=mn.NONE;var rr=32.184;Pn.preloadIcrfFixed=function(e){var n=e.start.dayNumber,r=e.start.secondsOfDay+rr,a=e.stop.dayNumber,i=e.stop.secondsOfDay+rr,o=Pn.iau2006XysData.preload(n,r,a,i),s=Pn.earthOrientationParameters.getPromiseToLoad();return t.when.all([o,s])},Pn.computeIcrfToFixedMatrix=function(e,n){t.defined(n)||(n=new o);var r=Pn.computeFixedToIcrfMatrix(e,n);if(t.defined(r))return o.transpose(r,n)};var ar=new In(0,0,0),ir=new We(0,0,0,0,0,0),or=new o,sr=new o;Pn.computeFixedToIcrfMatrix=function(e,n){t.defined(n)||(n=new o);var a=Pn.earthOrientationParameters.compute(e,ir);if(t.defined(a)){var i=e.dayNumber,s=e.secondsOfDay+rr,u=Pn.iau2006XysData.computeXysRadians(i,s,ar);if(t.defined(u)){var l=u.x+a.xPoleOffset,f=u.y+a.yPoleOffset,c=1/(1+Math.sqrt(1-l*l-f*f)),d=or;d[0]=1-c*l*l,d[3]=-c*l*f,d[6]=l,d[1]=-c*l*f,d[4]=1-c*f*f,d[7]=f,d[2]=-l,d[5]=-f,d[8]=1-c*(l*l+f*f);var h=o.fromRotationZ(-u.s,sr),p=o.multiply(d,h,or),m=e.dayNumber-2451545,y=(e.secondsOfDay-dt.computeTaiMinusUtc(e)+a.ut1MinusUtc)/Je.SECONDS_PER_DAY,v=.779057273264+y+.00273781191135448*(m+y);v=v%1*r.CesiumMath.TWO_PI;var w=o.fromRotationZ(v,sr),g=o.multiply(p,w,or),C=Math.cos(a.xPoleWander),x=Math.cos(a.yPoleWander),E=Math.sin(a.xPoleWander),_=Math.sin(a.yPoleWander),O=i-2451545+s/Je.SECONDS_PER_DAY,M=-47e-6*(O/=36525)*r.CesiumMath.RADIANS_PER_DEGREE/3600,b=Math.cos(M),S=Math.sin(M),A=sr;return A[0]=C*b,A[1]=C*S,A[2]=E,A[3]=-x*S+_*E*b,A[4]=x*b+_*E*S,A[5]=-_*C,A[6]=-_*S-x*E*b,A[7]=_*b-x*E*S,A[8]=x*C,o.multiply(g,A,n)}}};var ur=new y;Pn.pointToWindowCoordinates=function(e,t,n,r){return(r=Pn.pointToGLWindowCoordinates(e,t,n,r)).y=2*t[5]-r.y,r},Pn.pointToGLWindowCoordinates=function(e,n,r,i){t.defined(i)||(i=new a.Cartesian2);var o=ur;return E.multiplyByVector(e,y.fromElements(r.x,r.y,r.z,1,o),o),y.multiplyByScalar(o,1/o.w,o),E.multiplyByVector(n,o,o),a.Cartesian2.fromCartesian4(o,i)};var lr=new a.Cartesian3,fr=new a.Cartesian3,cr=new a.Cartesian3;Pn.rotationMatrixFromPositionVelocity=function(e,n,i,s){var u=t.defaultValue(i,a.Ellipsoid.WGS84).geodeticSurfaceNormal(e,lr),l=a.Cartesian3.cross(n,u,fr);a.Cartesian3.equalsEpsilon(l,a.Cartesian3.ZERO,r.CesiumMath.EPSILON6)&&(l=a.Cartesian3.clone(a.Cartesian3.UNIT_X,l));var f=a.Cartesian3.cross(l,n,cr);return a.Cartesian3.normalize(f,f),a.Cartesian3.cross(n,f,l),a.Cartesian3.negate(l,l),a.Cartesian3.normalize(l,l),t.defined(s)||(s=new o),s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=l.x,s[4]=l.y,s[5]=l.z,s[6]=f.x,s[7]=f.y,s[8]=f.z,s};var dr=new E(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),hr=new a.Cartographic,pr=new a.Cartesian3,mr=new a.Cartesian3,yr=new o,vr=new E,wr=new E;Pn.basisTo2D=function(e,t,n){var r=E.getTranslation(t,mr),i=e.ellipsoid,o=i.cartesianToCartographic(r,hr),s=e.project(o,pr);a.Cartesian3.fromElements(s.z,s.x,s.y,s);var u=Pn.eastNorthUpToFixedFrame(r,i,vr),l=E.inverseTransformation(u,wr),f=E.getMatrix3(t,yr),c=E.multiplyByMatrix3(l,f,n);return E.multiply(dr,c,n),E.setTranslation(n,s,n),n},Pn.wgs84To2DModelMatrix=function(e,t,n){var r=e.ellipsoid,i=Pn.eastNorthUpToFixedFrame(t,r,vr),o=E.inverseTransformation(i,wr),s=r.cartesianToCartographic(t,hr),u=e.project(s,pr);a.Cartesian3.fromElements(u.z,u.x,u.y,u);var l=E.fromTranslation(u,vr);return E.multiply(dr,o,n),E.multiply(l,n,n),n},e.Cartesian4=y,e.Event=zt,e.FeatureDetection=fe,e.Matrix3=o,e.Matrix4=E,e.Quaternion=ce,e.Resource=sn,e.Transforms=Pn,e.buildModuleUrl=Tn,e.clone=xt,e.combine=Et,e.isCrossOriginUrl=St}));

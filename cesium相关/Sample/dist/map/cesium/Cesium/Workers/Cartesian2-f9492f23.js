define(["exports","./when-c2e8ef35","./Check-c4f3a3fc","./Math-d30358ed"],(function(e,n,t,r){"use strict";function i(e,t,r){this.x=n.defaultValue(e,0),this.y=n.defaultValue(t,0),this.z=n.defaultValue(r,0)}i.fromSpherical=function(e,t){n.defined(t)||(t=new i);var r=e.clock,a=e.cone,u=n.defaultValue(e.magnitude,1),o=u*Math.sin(a);return t.x=o*Math.cos(r),t.y=o*Math.sin(r),t.z=u*Math.cos(a),t},i.fromElements=function(e,t,r,a){return n.defined(a)?(a.x=e,a.y=t,a.z=r,a):new i(e,t,r)},i.clone=function(e,t){if(n.defined(e))return n.defined(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t):new i(e.x,e.y,e.z)},i.fromCartesian4=i.clone,i.packedLength=3,i.pack=function(e,t,r){return r=n.defaultValue(r,0),t[r++]=e.x,t[r++]=e.y,t[r]=e.z,t},i.unpack=function(e,t,r){return t=n.defaultValue(t,0),n.defined(r)||(r=new i),r.x=e[t++],r.y=e[t++],r.z=e[t],r},i.packArray=function(e,r){var a=e.length,u=3*a;if(n.defined(r)){if(!Array.isArray(r)&&r.length!==u)throw new t.DeveloperError("If result is a typed array, it must have exactly array.length * 3 elements");r.length!==u&&(r.length=u)}else r=new Array(u);for(var o=0;o<a;++o)i.pack(e[o],r,3*o);return r},i.unpackArray=function(e,t){var r=e.length;n.defined(t)?t.length=r/3:t=new Array(r/3);for(var a=0;a<r;a+=3){var u=a/3;t[u]=i.unpack(e,a,t[u])}return t},i.fromArray=i.unpack,i.maximumComponent=function(e){return Math.max(e.x,e.y,e.z)},i.minimumComponent=function(e){return Math.min(e.x,e.y,e.z)},i.minimumByComponent=function(e,n,t){return t.x=Math.min(e.x,n.x),t.y=Math.min(e.y,n.y),t.z=Math.min(e.z,n.z),t},i.maximumByComponent=function(e,n,t){return t.x=Math.max(e.x,n.x),t.y=Math.max(e.y,n.y),t.z=Math.max(e.z,n.z),t},i.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z},i.magnitude=function(e){return Math.sqrt(i.magnitudeSquared(e))};var a=new i;i.distance=function(e,n){return i.subtract(e,n,a),i.magnitude(a)},i.distanceSquared=function(e,n){return i.subtract(e,n,a),i.magnitudeSquared(a)},i.normalize=function(e,n){var t=i.magnitude(e);return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n},i.dot=function(e,n){return e.x*n.x+e.y*n.y+e.z*n.z},i.multiplyComponents=function(e,n,t){return t.x=e.x*n.x,t.y=e.y*n.y,t.z=e.z*n.z,t},i.divideComponents=function(e,n,t){return t.x=e.x/n.x,t.y=e.y/n.y,t.z=e.z/n.z,t},i.add=function(e,n,t){return t.x=e.x+n.x,t.y=e.y+n.y,t.z=e.z+n.z,t},i.subtract=function(e,n,t){return t.x=e.x-n.x,t.y=e.y-n.y,t.z=e.z-n.z,t},i.multiplyByScalar=function(e,n,t){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t},i.divideByScalar=function(e,n,t){return t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,t},i.negate=function(e,n){return n.x=-e.x,n.y=-e.y,n.z=-e.z,n},i.abs=function(e,n){return n.x=Math.abs(e.x),n.y=Math.abs(e.y),n.z=Math.abs(e.z),n};var u=new i;i.lerp=function(e,n,t,r){return i.multiplyByScalar(n,t,u),r=i.multiplyByScalar(e,1-t,r),i.add(u,r,r)};var o=new i,d=new i;i.angleBetween=function(e,n){i.normalize(e,o),i.normalize(n,d);var t=i.dot(o,d),r=i.magnitude(i.cross(o,d,o));return Math.atan2(r,t)};var c=new i;i.mostOrthogonalAxis=function(e,n){var t=i.normalize(e,c);return i.abs(t,t),n=t.x<=t.y?t.x<=t.z?i.clone(i.UNIT_X,n):i.clone(i.UNIT_Z,n):t.y<=t.z?i.clone(i.UNIT_Y,n):i.clone(i.UNIT_Z,n)},i.projectVector=function(e,n,t){var r=i.dot(e,n)/i.dot(n,n);return i.multiplyByScalar(n,r,t)},i.equals=function(e,t){return e===t||n.defined(e)&&n.defined(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z},i.equalsArray=function(e,n,t){return e.x===n[t]&&e.y===n[t+1]&&e.z===n[t+2]},i.equalsEpsilon=function(e,t,i,a){return e===t||n.defined(e)&&n.defined(t)&&r.CesiumMath.equalsEpsilon(e.x,t.x,i,a)&&r.CesiumMath.equalsEpsilon(e.y,t.y,i,a)&&r.CesiumMath.equalsEpsilon(e.z,t.z,i,a)},i.cross=function(e,n,t){var r=e.x,i=e.y,a=e.z,u=n.x,o=n.y,d=n.z,c=i*d-a*o,f=a*u-r*d,l=r*o-i*u;return t.x=c,t.y=f,t.z=l,t},i.midpoint=function(e,n,t){return t.x=.5*(e.x+n.x),t.y=.5*(e.y+n.y),t.z=.5*(e.z+n.z),t},i.fromDegrees=function(e,n,t,a,u){return e=r.CesiumMath.toRadians(e),n=r.CesiumMath.toRadians(n),i.fromRadians(e,n,t,a,u)};var f=new i,l=new i,s=new i(40680631590769,40680631590769,40408299984661.445);i.fromRadians=function(e,t,r,a,u){r=n.defaultValue(r,0);var o=n.defined(a)?a.radiiSquared:s,d=Math.cos(t);f.x=d*Math.cos(e),f.y=d*Math.sin(e),f.z=Math.sin(t),f=i.normalize(f,f),i.multiplyComponents(o,f,l);var c=Math.sqrt(i.dot(f,l));return l=i.divideByScalar(l,c,l),f=i.multiplyByScalar(f,r,f),n.defined(u)||(u=new i),i.add(l,f,u)},i.fromDegreesArray=function(e,t,r){var a=e.length;n.defined(r)?r.length=a/2:r=new Array(a/2);for(var u=0;u<a;u+=2){var o=e[u],d=e[u+1],c=u/2;r[c]=i.fromDegrees(o,d,0,t,r[c])}return r},i.fromRadiansArray=function(e,t,r){var a=e.length;n.defined(r)?r.length=a/2:r=new Array(a/2);for(var u=0;u<a;u+=2){var o=e[u],d=e[u+1],c=u/2;r[c]=i.fromRadians(o,d,0,t,r[c])}return r},i.fromDegreesArrayHeights=function(e,t,r){var a=e.length;n.defined(r)?r.length=a/3:r=new Array(a/3);for(var u=0;u<a;u+=3){var o=e[u],d=e[u+1],c=e[u+2],f=u/3;r[f]=i.fromDegrees(o,d,c,t,r[f])}return r},i.fromRadiansArrayHeights=function(e,t,r){var a=e.length;n.defined(r)?r.length=a/3:r=new Array(a/3);for(var u=0;u<a;u+=3){var o=e[u],d=e[u+1],c=e[u+2],f=u/3;r[f]=i.fromRadians(o,d,c,t,r[f])}return r},i.ZERO=Object.freeze(new i(0,0,0)),i.UNIT_X=Object.freeze(new i(1,0,0)),i.UNIT_Y=Object.freeze(new i(0,1,0)),i.UNIT_Z=Object.freeze(new i(0,0,1)),i.prototype.clone=function(e){return i.clone(this,e)},i.prototype.equals=function(e){return i.equals(this,e)},i.prototype.equalsEpsilon=function(e,n,t){return i.equalsEpsilon(this,e,n,t)},i.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};var y=new i,h=new i;function m(e,t,a,u,o){var d=e.x,c=e.y,f=e.z,l=t.x,s=t.y,m=t.z,p=d*d*l*l,x=c*c*s*s,g=f*f*m*m,v=p+x+g,z=Math.sqrt(1/v),w=i.multiplyByScalar(e,z,y);if(v<u)return isFinite(z)?i.clone(w,o):void 0;var S=a.x,q=a.y,_=a.z,M=h;M.x=w.x*S*2,M.y=w.y*q*2,M.z=w.z*_*2;var C,R,O,T,A,b,E,N=(1-z)*i.magnitude(e)/(.5*i.magnitude(M)),k=0;do{k=(C=p*(A=(R=1/(1+(N-=k)*S))*R)+x*(b=(O=1/(1+N*q))*O)+g*(E=(T=1/(1+N*_))*T)-1)/(-2*(p*(A*R)*S+x*(b*O)*q+g*(E*T)*_))}while(Math.abs(C)>r.CesiumMath.EPSILON12);return n.defined(o)?(o.x=d*R,o.y=c*O,o.z=f*T,o):new i(d*R,c*O,f*T)}function p(e,t,r){this.longitude=n.defaultValue(e,0),this.latitude=n.defaultValue(t,0),this.height=n.defaultValue(r,0)}p.fromRadians=function(e,t,r,i){return r=n.defaultValue(r,0),n.defined(i)?(i.longitude=e,i.latitude=t,i.height=r,i):new p(e,t,r)},p.fromDegrees=function(e,n,t,i){return e=r.CesiumMath.toRadians(e),n=r.CesiumMath.toRadians(n),p.fromRadians(e,n,t,i)};var x=new i,g=new i,v=new i,z=new i(1/6378137,1/6378137,1/6356752.314245179),w=new i(1/40680631590769,1/40680631590769,1/40408299984661.445),S=r.CesiumMath.EPSILON1;function q(e,t,a,u){t=n.defaultValue(t,0),a=n.defaultValue(a,0),u=n.defaultValue(u,0),e._radii=new i(t,a,u),e._radiiSquared=new i(t*t,a*a,u*u),e._radiiToTheFourth=new i(t*t*t*t,a*a*a*a,u*u*u*u),e._oneOverRadii=new i(0===t?0:1/t,0===a?0:1/a,0===u?0:1/u),e._oneOverRadiiSquared=new i(0===t?0:1/(t*t),0===a?0:1/(a*a),0===u?0:1/(u*u)),e._minimumRadius=Math.min(t,a,u),e._maximumRadius=Math.max(t,a,u),e._centerToleranceSquared=r.CesiumMath.EPSILON1,0!==e._radiiSquared.z&&(e._squaredXOverSquaredZ=e._radiiSquared.x/e._radiiSquared.z)}function _(e,n,t){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,q(this,e,n,t)}p.fromCartesian=function(e,t,a){var u=n.defined(t)?t.oneOverRadii:z,o=n.defined(t)?t.oneOverRadiiSquared:w,d=m(e,u,o,n.defined(t)?t._centerToleranceSquared:S,g);if(n.defined(d)){var c=i.multiplyComponents(d,o,x);c=i.normalize(c,c);var f=i.subtract(e,d,v),l=Math.atan2(c.y,c.x),s=Math.asin(c.z),y=r.CesiumMath.sign(i.dot(f,e))*i.magnitude(f);return n.defined(a)?(a.longitude=l,a.latitude=s,a.height=y,a):new p(l,s,y)}},p.toCartesian=function(e,n,t){return i.fromRadians(e.longitude,e.latitude,e.height,n,t)},p.clone=function(e,t){if(n.defined(e))return n.defined(t)?(t.longitude=e.longitude,t.latitude=e.latitude,t.height=e.height,t):new p(e.longitude,e.latitude,e.height)},p.equals=function(e,t){return e===t||n.defined(e)&&n.defined(t)&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height},p.equalsEpsilon=function(e,t,r){return e===t||n.defined(e)&&n.defined(t)&&Math.abs(e.longitude-t.longitude)<=r&&Math.abs(e.latitude-t.latitude)<=r&&Math.abs(e.height-t.height)<=r},p.ZERO=Object.freeze(new p(0,0,0)),p.prototype.clone=function(e){return p.clone(this,e)},p.prototype.equals=function(e){return p.equals(this,e)},p.prototype.equalsEpsilon=function(e,n){return p.equalsEpsilon(this,e,n)},p.prototype.toString=function(){return"("+this.longitude+", "+this.latitude+", "+this.height+")"},Object.defineProperties(_.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),_.clone=function(e,t){if(n.defined(e)){var r=e._radii;return n.defined(t)?(i.clone(r,t._radii),i.clone(e._radiiSquared,t._radiiSquared),i.clone(e._radiiToTheFourth,t._radiiToTheFourth),i.clone(e._oneOverRadii,t._oneOverRadii),i.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t):new _(r.x,r.y,r.z)}},_.fromCartesian3=function(e,t){return n.defined(t)||(t=new _),n.defined(e)?(q(t,e.x,e.y,e.z),t):t},_.WGS84=Object.freeze(new _(6378137,6378137,6356752.314245179)),_.UNIT_SPHERE=Object.freeze(new _(1,1,1)),_.MOON=Object.freeze(new _(r.CesiumMath.LUNAR_RADIUS,r.CesiumMath.LUNAR_RADIUS,r.CesiumMath.LUNAR_RADIUS)),_.prototype.clone=function(e){return _.clone(this,e)},_.packedLength=i.packedLength,_.pack=function(e,t,r){return r=n.defaultValue(r,0),i.pack(e._radii,t,r),t},_.unpack=function(e,t,r){t=n.defaultValue(t,0);var a=i.unpack(e,t);return _.fromCartesian3(a,r)},_.prototype.geocentricSurfaceNormal=i.normalize,_.prototype.geodeticSurfaceNormalCartographic=function(e,t){var r=e.longitude,a=e.latitude,u=Math.cos(a),o=u*Math.cos(r),d=u*Math.sin(r),c=Math.sin(a);return n.defined(t)||(t=new i),t.x=o,t.y=d,t.z=c,i.normalize(t,t)},_.prototype.geodeticSurfaceNormal=function(e,t){return n.defined(t)||(t=new i),t=i.multiplyComponents(e,this._oneOverRadiiSquared,t),i.normalize(t,t)};var M=new i,C=new i;_.prototype.cartographicToCartesian=function(e,t){var r=M,a=C;this.geodeticSurfaceNormalCartographic(e,r),i.multiplyComponents(this._radiiSquared,r,a);var u=Math.sqrt(i.dot(r,a));return i.divideByScalar(a,u,a),i.multiplyByScalar(r,e.height,r),n.defined(t)||(t=new i),i.add(a,r,t)},_.prototype.cartographicArrayToCartesianArray=function(e,t){var r=e.length;n.defined(t)?t.length=r:t=new Array(r);for(var i=0;i<r;i++)t[i]=this.cartographicToCartesian(e[i],t[i]);return t};var R=new i,O=new i,T=new i;function A(e,t){this.x=n.defaultValue(e,0),this.y=n.defaultValue(t,0)}_.prototype.cartesianToCartographic=function(e,t){var a=this.scaleToGeodeticSurface(e,O);if(n.defined(a)){var u=this.geodeticSurfaceNormal(a,R),o=i.subtract(e,a,T),d=Math.atan2(u.y,u.x),c=Math.asin(u.z),f=r.CesiumMath.sign(i.dot(o,e))*i.magnitude(o);return n.defined(t)?(t.longitude=d,t.latitude=c,t.height=f,t):new p(d,c,f)}},_.prototype.cartesianArrayToCartographicArray=function(e,t){var r=e.length;n.defined(t)?t.length=r:t=new Array(r);for(var i=0;i<r;++i)t[i]=this.cartesianToCartographic(e[i],t[i]);return t},_.prototype.scaleToGeodeticSurface=function(e,n){return m(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,n)},_.prototype.scaleToGeocentricSurface=function(e,t){n.defined(t)||(t=new i);var r=e.x,a=e.y,u=e.z,o=this._oneOverRadiiSquared,d=1/Math.sqrt(r*r*o.x+a*a*o.y+u*u*o.z);return i.multiplyByScalar(e,d,t)},_.prototype.transformPositionToScaledSpace=function(e,t){return n.defined(t)||(t=new i),i.multiplyComponents(e,this._oneOverRadii,t)},_.prototype.transformPositionFromScaledSpace=function(e,t){return n.defined(t)||(t=new i),i.multiplyComponents(e,this._radii,t)},_.prototype.equals=function(e){return this===e||n.defined(e)&&i.equals(this._radii,e._radii)},_.prototype.toString=function(){return this._radii.toString()},_.prototype.getSurfaceNormalIntersectionWithZAxis=function(e,t,r){t=n.defaultValue(t,0);var a=this._squaredXOverSquaredZ;if(n.defined(r)||(r=new i),r.x=0,r.y=0,r.z=e.z*(1-a),!(Math.abs(r.z)>=this._radii.z-t))return r},A.fromElements=function(e,t,r){return n.defined(r)?(r.x=e,r.y=t,r):new A(e,t)},A.clone=function(e,t){if(n.defined(e))return n.defined(t)?(t.x=e.x,t.y=e.y,t):new A(e.x,e.y)},A.fromCartesian3=A.clone,A.fromCartesian4=A.clone,A.packedLength=2,A.pack=function(e,t,r){return r=n.defaultValue(r,0),t[r++]=e.x,t[r]=e.y,t},A.unpack=function(e,t,r){return t=n.defaultValue(t,0),n.defined(r)||(r=new A),r.x=e[t++],r.y=e[t],r},A.packArray=function(e,r){var i=e.length,a=2*i;if(n.defined(r)){if(!Array.isArray(r)&&r.length!==a)throw new t.DeveloperError("If result is a typed array, it must have exactly array.length * 2 elements");r.length!==a&&(r.length=a)}else r=new Array(a);for(var u=0;u<i;++u)A.pack(e[u],r,2*u);return r},A.unpackArray=function(e,t){var r=e.length;n.defined(t)?t.length=r/2:t=new Array(r/2);for(var i=0;i<r;i+=2){var a=i/2;t[a]=A.unpack(e,i,t[a])}return t},A.fromArray=A.unpack,A.maximumComponent=function(e){return Math.max(e.x,e.y)},A.minimumComponent=function(e){return Math.min(e.x,e.y)},A.minimumByComponent=function(e,n,t){return t.x=Math.min(e.x,n.x),t.y=Math.min(e.y,n.y),t},A.maximumByComponent=function(e,n,t){return t.x=Math.max(e.x,n.x),t.y=Math.max(e.y,n.y),t},A.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},A.magnitude=function(e){return Math.sqrt(A.magnitudeSquared(e))};var b=new A;A.distance=function(e,n){return A.subtract(e,n,b),A.magnitude(b)},A.distanceSquared=function(e,n){return A.subtract(e,n,b),A.magnitudeSquared(b)},A.normalize=function(e,n){var t=A.magnitude(e);return n.x=e.x/t,n.y=e.y/t,n},A.dot=function(e,n){return e.x*n.x+e.y*n.y},A.multiplyComponents=function(e,n,t){return t.x=e.x*n.x,t.y=e.y*n.y,t},A.divideComponents=function(e,n,t){return t.x=e.x/n.x,t.y=e.y/n.y,t},A.add=function(e,n,t){return t.x=e.x+n.x,t.y=e.y+n.y,t},A.subtract=function(e,n,t){return t.x=e.x-n.x,t.y=e.y-n.y,t},A.multiplyByScalar=function(e,n,t){return t.x=e.x*n,t.y=e.y*n,t},A.divideByScalar=function(e,n,t){return t.x=e.x/n,t.y=e.y/n,t},A.negate=function(e,n){return n.x=-e.x,n.y=-e.y,n},A.abs=function(e,n){return n.x=Math.abs(e.x),n.y=Math.abs(e.y),n};var E=new A;A.lerp=function(e,n,t,r){return A.multiplyByScalar(n,t,E),r=A.multiplyByScalar(e,1-t,r),A.add(E,r,r)};var N=new A,k=new A;A.angleBetween=function(e,n){return A.normalize(e,N),A.normalize(n,k),r.CesiumMath.acosClamped(A.dot(N,k))};var V=new A;A.mostOrthogonalAxis=function(e,n){var t=A.normalize(e,V);return A.abs(t,t),n=t.x<=t.y?A.clone(A.UNIT_X,n):A.clone(A.UNIT_Y,n)},A.equals=function(e,t){return e===t||n.defined(e)&&n.defined(t)&&e.x===t.x&&e.y===t.y},A.equalsArray=function(e,n,t){return e.x===n[t]&&e.y===n[t+1]},A.equalsEpsilon=function(e,t,i,a){return e===t||n.defined(e)&&n.defined(t)&&r.CesiumMath.equalsEpsilon(e.x,t.x,i,a)&&r.CesiumMath.equalsEpsilon(e.y,t.y,i,a)},A.ZERO=Object.freeze(new A(0,0)),A.UNIT_X=Object.freeze(new A(1,0)),A.UNIT_Y=Object.freeze(new A(0,1)),A.prototype.clone=function(e){return A.clone(this,e)},A.prototype.equals=function(e){return A.equals(this,e)},A.prototype.equalsEpsilon=function(e,n,t){return A.equalsEpsilon(this,e,n,t)},A.prototype.toString=function(){return"("+this.x+", "+this.y+")"},e.Cartesian2=A,e.Cartesian3=i,e.Cartographic=p,e.Ellipsoid=_}));
